<!DOCTYPE html><html lang="en"><head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <!-- This should probably be done with a server-side include, but
         PHP is easier. -->
    <meta name="description" content="Woburn Collegiate Institute Programming
Enrichment Group Online Judge">
<meta name="keywords" content="PEG Judge,wcipeg.com,Online judge,Canadian
Computing Competition,CCC,American Computer Science League,ACSL,Programming
Enrichment Group,Validator,COCI,Croatian Open Competition in Informatics,
Woburn,Woburn Challenge,Woburn Collegiate Institute,APIO,Asian Pacific
Informatics Olympiad,BOI,Bulgarian Olympiad in Informatics,SMAC,Sane's Monthly
Algorithms Challenge,Problem Solving in Pascal,Bi-Weekly Challenge,Validator,
Hanson Wang,Canada">

    <title>PEG Judge - CCC09 Stage 2 - Parade</title>

    <link href="https://wcipeg.com/assets/css/common.css" rel="stylesheet" type="text/css">
    <link href="https://wcipeg.com/assets/css/submissions.css" rel="stylesheet" type="text/css">
    <link href="https://wcipeg.com/assets/css/bbcode.css" rel="stylesheet" type="text/css">
    <link href="https://wcipeg.com/assets/highlight/styles/idea.css" rel="stylesheet" type="text/css">
    <link href="https://wcipeg.com/assets/icons/favicon.ico" rel="shortcut icon" type="text/css">
    <link href="https://wcipeg.com/assets/css/style.css" rel="stylesheet" type="text/css">
    <link href="https://wcipeg.com/assets/css/jquery.autocomplete.css" rel="stylesheet" type="text/css">
    <link href="https://wcipeg.com/assets/css/desc.css" rel="stylesheet" type="text/css">
    <link href="https://wcipeg.com/assets/css/testcase_editor.css" rel="stylesheet" type="text/css">

    <script type="text/javascript">
        function get_csrf_key() {
            return "csrf_test_name";
        }
        function get_csrf_value() {
            return "a5a6da31e315e7ee609958a2aedecd0f";
        }
        function get_site_url() {
            return "https:\/\/wcipeg.com\/";
        }
    </script>
    <script type="text/javascript" src="https://wcipeg.com/assets/js/jquery-1.10.1.min.js"></script>    <script type="text/javascript" src="https://wcipeg.com/assets/js/jquery-post-csrf.js"></script>    <script type="text/javascript" src="https://wcipeg.com/assets/js/global.js"></script>    <script type="text/javascript" src="https://wcipeg.com/assets/js/moment.min.js"></script>    <script type="text/javascript" src="https://wcipeg.com/assets/js/moment-timezone.min.js"></script>    <script type="text/javascript" src="https://wcipeg.com/assets/highlight/highlight.pack.js"></script>    <script type="text/javascript">hljs.initHighlightingOnLoad();</script>
  </head>

  <body style="">
    <div id="backheader"></div>
    <div id="backmenu"></div>

    <div id="wrapper">
      <div id="container">
        <div id="header">
          <div id="logo">
            <!-- TODO: Change "PEG" to something customizable -->
            <a href="https://wcipeg.com/main"><img src="https://wcipeg.com/assets/img/logo.gif" alt="PEG"></a>          </div>
          <div id="user">
                                      Please <a href="https://wcipeg.com/auth/login?ref=%2Fproblem%2Fccc09s2p5"><b>log in</b></a>              or <a href="https://wcipeg.com/auth/register"><b>register an account</b></a>.
                      </div> <!-- user -->
                  </div> <!-- header -->

<div id="menu">
  <ul class="nav">
        <li><a href="https://wcipeg.com/main">main</a></li>        <li><a href="https://wcipeg.com/announcements">announcements</a></li>        <li><a href="https://wcipeg.com/problems">problems</a></li>        <li><a href="https://wcipeg.com/submissions">submissions</a></li>        <li><a href="https://wcipeg.com/users">users</a></li>        <li><a href="https://wcipeg.com/organizations">organizations</a></li>        <li><a href="https://wcipeg.com/submit">submit</a></li>        <li><a href="https://wcipeg.com/contests">contests</a></li>        <li><a href="/wiki/Judge:Help" target="_blank">help (<strong>README</strong>)</a></li>        <li><a href="/wiki" target="_blank">wiki</a></li>        <li><a href="/legacy" target="_blank">old</a></li>        <li><a href="/wiki/Judge:Contact" target="_blank">contact</a></li>          </ul>
</div>

<div id="content">


<div id="descContent">
<h3>2009 Canadian Computing Competition, Stage 2</h3>
<h2>Day 2, Problem 2: Parade</h2>

<p>May 9 is VE day, when the annual victory parade is held through Red Square. Inspired by the award ceremony of the 2009 ACM World Finals, you have decided to recreate the original VE day parade digitally. Since you have skillfully obtained all the necessary hardware, the most difficult part remaining is to track the configuration of a single formation.</p>
<p>A formation can be viewed as a 4-by-4 array, with the people initially labelled 1 through 16:</p>
<table class="temp">
  <tbody><tr>
    <td>1</td>
    <td>2</td>
    <td>3</td>
    <td>4</td>
  </tr>
  <tr>
    <td>5</td>
    <td>6</td>
    <td>7</td>
    <td>8</td>
  </tr>
  <tr>
    <td>9</td>
    <td>10</td>
    <td>11</td>
    <td>12</td>
  </tr>
  <tr>
    <td>13</td>
    <td>14</td>
    <td>15</td>
    <td>16</td>
  </tr>
</tbody></table>
<p>Then a sequence of commands (<var>r</var>, <var>c</var>, <var>k</var>) are issued. Each command is a <i>rotation</i> based on the three integer parameters <var>r</var>, <var>c</var> and <var>k</var>:</p>
<blockquote>Rotate all people on the perimeter of a <var>k</var>-by-<var>k</var> square with its upper left corner located at row <var>r</var>, column <var>c</var> clockwise by one position.</blockquote>
<p>For example, the command (1, 1, 2) would alter the initial board to:</p>
<table class="temp">
  <tbody><tr>
    <td>5</td>
    <td>1</td>
    <td>3</td>
    <td>4</td>
  </tr>
  <tr>
    <td>6</td>
    <td>2</td>
    <td>7</td>
    <td>8</td>
  </tr>
  <tr>
    <td>9</td>
    <td>10</td>
    <td>11</td>
    <td>12</td>
  </tr>
  <tr>
    <td>13</td>
    <td>14</td>
    <td>15</td>
    <td>16</td>
  </tr>
</tbody></table>
<p>As another example, (2, 2, 3) would bring the initial board to</p>
<table class="temp">
  <tbody><tr>
    <td>1</td>
    <td>2</td>
    <td>3</td>
    <td>4</td>
  </tr>
  <tr>
    <td>5</td>
    <td>10</td>
    <td>6</td>
    <td>7</td>
  </tr>
  <tr>
    <td>9</td>
    <td>14</td>
    <td>11</td>
    <td>8</td>
  </tr>
  <tr>
    <td>13</td>
    <td>15</td>
    <td>16</td>
    <td>12</td>
  </tr>
</tbody></table>
<p>A third example, (1, 1, 4) would bring the initial board to</p>
<table class="temp">
  <tbody><tr>
    <td>5</td>
    <td>1</td>
    <td>2</td>
    <td>3</td>
  </tr>
  <tr>
    <td>9</td>
    <td>6</td>
    <td>7</td>
    <td>4</td>
  </tr>
  <tr>
    <td>13</td>
    <td>10</td>
    <td>11</td>
    <td>8</td>
  </tr>
  <tr>
    <td>14</td>
    <td>15</td>
    <td>16</td>
    <td>12</td>
  </tr>
</tbody></table>
<p>You have obtained the original sequence of commands issued. However, you are not quite pleased with the final result and would like to edit some of the commands. Support <var>Q</var> (1 ≤ <var>Q</var> ≤ 100, 000) changes of the command sequence, each change as follows:</p>
<blockquote>Change the ith command to <var>r'</var>, <var>c'</var>, and <var>k'</var> permanently.</blockquote>
<p>Furthermore, you would like to see the effects of your change immediately. After each change, output what the formation would looks like at the end of all <var>N</var> commands. To re-emphasize, each change is cumulative and permanent.</p>
<p>For 30% of the test cases, 1 ≤ <var>N</var>, <var>Q</var> ≤ 1000.</p>
<h3>Input</h3>
<p>The first line contains two integers <var>N</var> and <var>Q</var> (1 ≤ <var>N</var>, <var>Q</var> ≤ 100,000), which is the number of commands and number of edits, respectively.</p>
<p>The next <var>N</var> lines contain three integers per line: r c and k which describe each rotation command. Note that 1 ≤ <var>k</var> ≤ 4, <var>r</var> + <var>k</var> - 1 ≤ 4 and <var>c</var> + <var>k</var> - 1 ≤ 4.</p>
<p>The next <var>Q</var> lines contain four integers per line: the first integer on the line is the 1-based index of the command whose detail is to be changed, followed by 3 integers, <var>r'</var>, <var>c'</var>, <var>k'</var>, the new description of the command.</p>
<h3>Output</h3>
<p>For each change, print 4 lines, the final configuration of the formation after the modifications so far.</p>
<h3>Sample Input</h3>
<p><code>2 4<br>
  1 1 1<br>
  1 1 1<br>
  1 1 1 2<br>
  2 2 2 3<br>
  1 1 1 1<br>
2 1 1 4</code></p>
<h3>Sample Output</h3>
<p><code>5 1 3 4<br>
  6 2 7 8<br>
  9 10 11 12<br>
  13 14 15 16<br>
  5 1 3 4<br>
  6 10 2 7<br>
  9 14 11 8<br>
  13 15 16 12<br>
  1 2 3 4<br>
  5 10 6 7<br>
  9 14 11 8<br>
  13 15 16 12<br>
  5 1 2 3<br>
  9 6 7 4<br>
  13 10 11 8<br>
14 15 16 12</code></p>
<h3>Explanation</h3>
<p>The two commands (1, 1, 1) leave the configuration unchanged. The first change (1, 1, 2) on the initial configuration causes the configuration to become the first configuration in this problem statement. That is,</p>
<table class="temp">
  <tbody><tr>
    <td>5</td>
    <td>1</td>
    <td>3</td>
    <td>4</td>
  </tr>
  <tr>
    <td>6</td>
    <td>2</td>
    <td>7</td>
    <td>8</td>
  </tr>
  <tr>
    <td>9</td>
    <td>10</td>
    <td>11</td>
    <td>12</td>
  </tr>
  <tr>
    <td>13</td>
    <td>14</td>
    <td>15</td>
    <td>16</td>
  </tr>
</tbody></table>
<p>The second change takes this configuration and applies (2, 2, 3).</p>
<p>The next change alters the first change to be the original command, and then, since the second command has been changed to (2, 2, 3), we have</p>
<table class="temp">
  <tbody><tr>
    <td>1</td>
    <td>2</td>
    <td>3</td>
    <td>4</td>
  </tr>
  <tr>
    <td>5</td>
    <td>10</td>
    <td>6</td>
    <td>7</td>
  </tr>
  <tr>
    <td>9</td>
    <td>14</td>
    <td>11</td>
    <td>8</td>
  </tr>
  <tr>
    <td>13</td>
    <td>15</td>
    <td>16</td>
    <td>12</td>
  </tr>
</tbody></table>
<p>The last change causes the second command to be (1, 1, 4) which rotates the outermost perimeter of the previous output.</p>
<p>&nbsp;</p>
</div>

<div id="descSidebar"> <!-- TODO: Make this nicer/more semantic -->
  <p>
        
        <a href="https://wcipeg.com/submissions/,ccc09s2p5">All Submissions</a>    <br>
    
        <a href="https://wcipeg.com/submissions/rank/ccc09s2p5">Best Solutions</a>        <br>
  </p>

  <p>
    
      </p>

  <p>
            <br>
  </p>

  <p>
    <!-- TODO: Move this into the controller -->
    <b>Point Value:</b> 30 (partial)<br>
    <b>Time Limit:</b> 1.00s<br>
    <b>Memory Limit:</b> 128M<br>
    <b>Added:</b> Jun 06, 2009<br>
      </p>

  
  <p>
  <b>Languages Allowed:</b><br>
  <span title="C++03 (g++ 4.1.3)">C++03</span>, <span title="Pascal (fpc 2.6.0-9)">PAS</span>, <span title="C (gcc 4.7.2)">C</span>, <span title="Haskell (ghc-6.12.1)">HASK</span>, <span title="Intel x86 assembly (nasm 2.10.01)">ASM</span>, <span title="Ruby (ruby 2.1.2)">RUBY</span>, <span title="Python 2 (python 2.6.8)">PYTH2</span>, <span title="Java (OpenJDK javac 1.7.0_03)">JAVA</span>, <span title="PHP (PHP 5.4.4)">PHP</span>, <span title="Scheme (Racket v5.0.1) (NOT WORKING)">SCM</span>, <span title="OCaml (version 3.12.1)">CAML</span>, <span title="Perl, v5.10.1">PERL</span>, <span title="C# (Mono version 2.4.4.0) (NOT WORKING)">C#</span>, <span title="C++11 (g++ 4.9.1)">C++11</span>, <span title="Python 3 (python 3.2.3)">PYTH3</span>  </p>
</div> <!-- descSidebar -->

<div id="comments">
  <h2 class="icon" style="background: url(https://wcipeg.com/assets/icons/comment_bubble.png) no-repeat right top">Comments (<a href="https://wcipeg.com/comments/search/place=ccc09s2p5">Search</a>)</h2><p style="text-align: center"></p>It's quiet in here...</div>

<div style="clear: both">&nbsp;</div>

</div> <!-- content -->
</div> <!-- container -->
</div> <!-- wrapper -->

<div id="footer">
  <div id="footer_time_info">
    Loaded in 0.0176s.<br>
    Server time on page load:
    Jun 24, 2018 07:08:21 UTC 
    <br>
  </div>
  <div style="clear: both; height: 1ex"></div>

  <div style="float: right">
    <a href="https://wcipeg.com%2Fproblem%2Fccc09s2p5">Secure server</a>  </div>

<a href="http://www.debian.org" target="_blank">
  <img src="https://wcipeg.com/assets/img/debian.png" alt="Powered by Debian GNU/Linux"></a>

<a href="http://www.apache.org" target="_blank">
  <img src="https://wcipeg.com/assets/img/apache.gif" alt="Powered by Apache"></a>

<a href="http://www.mysql.com" target="_blank">
  <img src="https://wcipeg.com/assets/img/mysql.png" alt="Powered by MySQL"></a>

<a href="http://www.php.net" target="_blank">
  <img src="https://wcipeg.com/assets/img/php.gif" alt="Powered by PHP"> 
</a>

<a href="http://www.openssl.org" target="_blank">
  <img src="https://wcipeg.com/assets/img/openssl.png" alt="Powered by OpenSSL"> 
</a>

<a href="http://www.codeigniter.com" target="_blank">
  <img src="https://wcipeg.com/assets/img/codeignited.gif" alt="Powered by CodeIgniter"> 
</a>

<a href="http://validator.w3.org/check?uri=referer" target="_blank">
  <img src="https://wcipeg.com/assets/img/html5.png" alt="Valid HTML 5"></a>

<a href="http://jigsaw.w3.org/css-validator/check/referer" target="_blank">
  <img src="https://wcipeg.com/assets/img/css3.png" alt="Valid CSS 3"></a>

<span title="Thanks to Naomi Cui for helping to create this image">
  <a href="http://git-scm.com/" target="_blank">
    <img src="https://wcipeg.com/assets/img/git-80x15-final.png" alt="git managed">  </a>
</span>

<br>

<div style="font-size: 85%; line-height: 1.5">
  <a href="/wiki/Judge:Copyright" target="_blank">Notes on copyright</a> |
  <a href="/wiki/Judge:TOS" target="_blank">Terms of service</a>
  <br>
  <a href="/wiki/Judge:Free_software" target="_blank">The PEG Judge is powered
  solely by free software.</a>
</div>
 
</div> <!-- footer -->



</body></html>