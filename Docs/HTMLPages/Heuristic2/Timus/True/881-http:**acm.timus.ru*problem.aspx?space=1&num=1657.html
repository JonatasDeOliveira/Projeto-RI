<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=768"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>1657. Cube Snake @ Timus Online Judge</title><link rel="alternate" hreflang="x-default" href="/problem.aspx?space=1&amp;num=1657"><link rel="alternate" hreflang="en-us" href="/problem.aspx?space=1&amp;num=1657&amp;locale=en"><link rel="alternate" hreflang="ru-ru" href="/problem.aspx?space=1&amp;num=1657&amp;locale=ru"><link rel="stylesheet" type="text/css" href="/style55.css"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico"></head><body><table width="100%" cellspacing="0" cellpadding="0" class="body"><tbody><tr><td class="caption"><table width="100%" cellspacing="0" cellpadding="0"><tbody><tr><td width="130" class="locale"><a href="/problem.aspx?space=1&amp;num=1657&amp;locale=en">ENG</a>&nbsp;&nbsp;<a href="/problem.aspx?space=1&amp;num=1657&amp;locale=ru">RUS</a></td><td class="title"><a href="/">Timus Online Judge</a></td><td width="130"></td></tr></tbody></table></td></tr><tr><td class="panel"><table width="100%" cellspacing="0" cellpadding="0"><tbody><tr><td width="130" valign="TOP" align="CENTER" style="padding-bottom:5px;"><a href="/"><img border="0" src="/images/usu-summer.jpg" height="134" width="106" alt=""></a></td><td valign="TOP" align="LEFT"><table width="100%" cellspacing="0" cellpadding="0" class="panel"><tbody><tr><th width="25%"><div>Online Judge</div></th><th width="25%"><div>Problems</div></th><th width="25%"><div>Authors</div></th><th width="25%"><div>Online contests</div></th></tr><tr><td valign="TOP" align="LEFT"><a href="/">About Online Judge</a><br><a href="/help.aspx?topic=faq">Frequently asked questions</a><br><a href="/news.aspx">Site news</a><br><a href="/forum/">Webboard</a><br><a href="/help.aspx?topic=links">Links</a><br></td><td valign="TOP" align="LEFT"><a href="/problemset.aspx">Problem set</a><br><a href="/submit.aspx">Submit solution</a><br><a href="/status.aspx">Judge status</a><br><a href="/help.aspx?topic=judge">Guide</a><br></td><td valign="TOP"><a href="/register.aspx">Register</a><br><a href="/authedit.aspx">Update your info</a><br><a href="/ranklist.aspx">Authors ranklist</a><br><form action="/search.aspx" method="GET" style="margin-top:0.6em;"><input name="Str" size="12" value="" placeholder="Author’s name"> <input type="SUBMIT" value="Search"></form></td><td valign="TOP"><a href="/contest.aspx">Current contest</a><br><a href="/schedule.aspx">Scheduled contests</a><br><a href="/archive.aspx">Past contests</a><br><a href="/help.aspx?topic=contest">Rules</a><br></td></tr></tbody></table></td></tr></tbody></table></td></tr><tr><td style="padding-top: 32px; padding-bottom: 20px;"><table align="CENTER" cellspacing="0" cellpadding="0"><tbody><tr><td width="800"><div class="problem_content"><h2 class="problem_title">1657. Cube Snake</h2><div class="problem_limits">Time limit: 2.0 second<br>Memory limit: 64 MB<br></div><div id="problem_text"><img src="/image/get.aspx/b1b9ed4e-5872-47d0-8272-c4ec3965fd22" border="0" alt="Problem illustration" align="RIGHT" class="problem_raimage"><div class="problem_par"><div class="problem_par_normal">Before the Quarterfinal contest, a team of programmers were given several
puzzles from the online shop <nobr><a href="http://www.ru-toys.ru">ru-toys.ru</a></nobr>.
The most insidious of them was the cube snake: once you take it incautiously,
it unfolds immediately, and to fold it back into a cube you have to waste the precious
contest time. That is why the programmers decided to quickly write a program
that would solve the problem in the general form. The program would determine
if it were possible to fold a snake of an arbitrary configuration into a cube. If
yes, it would find how to do it.</div></div><img src="/image/get.aspx/732b2524-31a6-4edd-acd7-311ab1ed80e9" border="0" alt="Problem illustration" align="LEFT" class="problem_laimage"><div class="problem_par"><div class="problem_par_normal">A snake consists of 27 small cubes that are strung, as beads,
onto a strong thread. The thread is fixed inside the end cubes and goes through
each of the remaining cubes from the center of one face to the center of another face.
Though some of the cubes the thread goes straight, connecting opposite faces,
and inside other cubes it turns, going through the centers of adjacent faces.
The thread doesn't allow the cubes to move apart, but makes it possible to rotate
a part of the cubes with respect to the other part. It is required to fold the
snake into a <nobr>3 × 3 × 3</nobr> cube.</div></div><h3 class="problem_subtitle">Input</h3><div class="problem_par"><div class="problem_par_normal">The only input line contains 27 letters describing the snake as a sequence of
“straight” (denoted by the letter “F”) and
“turning” (denoted by the letter “T”) small cubes.
The end cubes are considered as straight.
</div></div><h3 class="problem_subtitle">Output</h3><div class="problem_par"><div class="problem_par_normal">If you can make a cube from the given snake, output
26 letters describing the sequence of folding. Each letter shows the
position of a small cube (starting from the second one) with respect to the
preceding small cube. This position can be at the front (“F”),
behind (“B”), on the right (“R”), on the left
(“L”), on top (“U”), or below (“D”).
</div></div><div class="problem_par"><div class="problem_par_normal">If it is impossible to make a cube from the given snake, output
“IMPOSSIBLE”.
</div></div><h3 class="problem_subtitle">Samples</h3><table class="sample"><tbody><tr><th width="350">input</th><th width="350">output</th></tr><tr><td><pre>FFTTTFTTFTTTFTFTTTTFTFTFTFF</pre></td><td><pre>UURDFFRBBUFLLDDRBRFFLLUURR</pre></td></tr><tr><td><pre>FFTFTFTFTTTTFFFTTTFTTFTTTFF</pre></td><td><pre>IMPOSSIBLE</pre></td></tr></tbody></table><div class="problem_source"><b>Problem Author: </b>Stanislav Vasilyev (prepared by Sergey Pupyrev)<br><b>Problem Source: </b>NEERC 2008, Eastern subregion quarterfinals<br></div></div></div><div><b>Tags: </b>none &nbsp;<span class="problem_tags_toggle">(<form method="POST" action="problem.aspx?space=1&amp;num=1657" style="display:inline;" id="ToggleTagsForm"><a href="problem.aspx?space=1&amp;num=1657" onclick="document.getElementById('ToggleTagsForm').submit();return false;"><input type="hidden" name="Action" value="HideTags">hide tags for unsolved problems</a></form>)</span></div><div class="problem_links"><span>Difficulty: 1308</span> &nbsp;&nbsp;&nbsp;<a href="print.aspx?space=1&amp;num=1657" target="_blank">Printable version</a> &nbsp;&nbsp;&nbsp;<a href="submit.aspx?space=1&amp;num=1657">Submit solution</a> &nbsp;&nbsp;&nbsp;<a href="forum/?space=1&amp;num=1657">Discussion (2)</a><br><a href="status.aspx?space=1&amp;num=1657">All submissions (1122)</a> &nbsp;&nbsp;&nbsp;<a href="status.aspx?space=1&amp;num=1657&amp;status=accepted">All accepted submissions (425)</a> &nbsp;&nbsp;&nbsp;<a href="rating.aspx?space=1&amp;num=1657">Solutions rating (238)</a></div></td></tr></tbody></table></td></tr><tr><td class="footer"><script type="text/javascript" async="" src="https://mc.yandex.ru/metrika/watch.js"></script><script type="text/javascript"> (function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter20918869 = new Ya.Metrika({ id:20918869, clickmap:true, trackLinks:true, accurateTrackBounce:true }); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = "https://mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript>&lt;div&gt;&lt;img src="https://mc.yandex.ru/watch/20918869" style="position:absolute; left:-9999px;" alt=""&gt;&lt;/div&gt;</noscript>© 2000–2017 <a href="/team.aspx">Timus Online Judge Team</a>. All rights reserved.</td></tr></tbody></table></body></html>