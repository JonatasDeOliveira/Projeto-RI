<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=768"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>1202. Rectangles Travel @ Timus Online Judge</title><link rel="alternate" hreflang="x-default" href="/problem.aspx?space=1&amp;num=1202"><link rel="alternate" hreflang="en-us" href="/problem.aspx?space=1&amp;num=1202&amp;locale=en"><link rel="alternate" hreflang="ru-ru" href="/problem.aspx?space=1&amp;num=1202&amp;locale=ru"><link rel="stylesheet" type="text/css" href="/style52.css"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico"></head><body><table width="100%" cellspacing="0" cellpadding="0" class="body"><tbody><tr><td class="caption"><table width="100%" cellspacing="0" cellpadding="0"><tbody><tr><td width="130" class="locale"><a href="/problem.aspx?space=1&amp;num=1202&amp;locale=en">ENG</a>&nbsp;&nbsp;<a href="/problem.aspx?space=1&amp;num=1202&amp;locale=ru">RUS</a></td><td class="title"><a href="/">Timus Online Judge</a></td><td width="130"></td></tr></tbody></table></td></tr><tr><td class="panel"><table width="100%" cellspacing="0" cellpadding="0"><tbody><tr><td width="130" valign="TOP" align="CENTER" style="padding-bottom:5px;"><a href="/"><img border="0" src="/images/usu-summer.jpg" height="134" width="106" alt=""></a></td><td valign="TOP" align="LEFT"><table width="100%" cellspacing="0" cellpadding="0" class="panel"><tbody><tr><th width="25%"><div>Online Judge</div></th><th width="25%"><div>Problems</div></th><th width="25%"><div>Authors</div></th><th width="25%"><div>Online contests</div></th></tr><tr><td valign="TOP" align="LEFT"><a href="/">About Online Judge</a><br><a href="/help.aspx?topic=faq">Frequently asked questions</a><br><a href="/news.aspx">Site news</a><br><a href="/forum/">Webboard</a><br><a href="/help.aspx?topic=links">Links</a><br></td><td valign="TOP" align="LEFT"><a href="/problemset.aspx">Problem set</a><br><a href="/submit.aspx">Submit solution</a><br><a href="/status.aspx">Judge status</a><br><a href="/help.aspx?topic=judge">Guide</a><br></td><td valign="TOP"><a href="/register.aspx">Register</a><br><a href="/authedit.aspx">Update your info</a><br><a href="/ranklist.aspx">Authors ranklist</a><br><form action="/search.aspx" method="GET" style="margin-top:0.6em;"><input name="Str" size="12" value="" placeholder="Author’s name"> <input type="SUBMIT" value="Search"></form></td><td valign="TOP"><a href="/contest.aspx">Current contest</a><br><a href="/schedule.aspx">Scheduled contests</a><br><a href="/archive.aspx">Past contests</a><br><a href="/help.aspx?topic=contest">Rules</a><br></td></tr></tbody></table></td></tr></tbody></table></td></tr><tr><td style="padding-top: 32px; padding-bottom: 20px;"><table align="CENTER" cellspacing="0" cellpadding="0"><tbody><tr><td width="800"><div class="problem_content"><h2 class="problem_title">1202. Rectangles Travel</h2><div class="problem_limits">Time limit: 1.0 second<br>Memory limit: 64 MB<br></div><div id="problem_text"><div class="problem_par"><div class="problem_par_normal">On an endless sheet of checked paper there are axes of coordinates. A unit for measurement in this coordinates system is the length of the square’s edge. Also there are <i>N</i> rectangles on this sheet of paper. Their edges are parallel to the coordinate axis, and go through the borders between the squares. If we denote the coordinates of the lower left corner of the <i>i</i>-th rectangle with (<i>x<sub>i</sub></i>, <i>y<sub>i</sub></i>), and the coordinates of its upper right corner with (<i>x<sup>i</sup></i>, <i>y<sup>i</sup></i>), we will see, that:
</div></div><div class="problem_par"><div class="problem_par_center"><i>x</i><sub>1</sub> = 0, <i>y</i><sub>1</sub> = 0<br>
<i>x<sup>i</sup></i> = <i>x</i><sub><i>i</i> + 1</sub><br>
2 ≤ <i>x<sup>i</sup></i> − <i>x<sub>i</sub></i> ≤ 100<br>
2 ≤ <i>y<sup>i</sup></i> − <i>y<sub>i</sub></i> ≤ 100
</div></div><div class="problem_par"><div class="problem_par_normal">If two rectangles with numbers <i>i</i> and <i>i</i> + 1 overlap, their common border disappears:</div></div><div class="problem_centered_picture"><img src="/image/get.aspx/76185b69-e537-4175-9cac-180ec9c327f7" border="0" alt="Problem illustration"></div><div class="problem_par"><div class="problem_par_normal">A traveler starts his way from the point with the coordinates (1, 1), which, as it follows from the rules above, certainly lays in the first rectangle. The traveler walks strictly along the edges of the squares. He is not allowed to walk on the borders of the rectangles. Thus, he can leave one rectangle for another only through their disappeared common border. There is an example of some beginning of his walk on the picture.</div></div><div class="problem_par"><div class="problem_par_normal">The traveler’s goal is the point (<i>x<sup>n</sup></i> − 1, <i>y<sup>n</sup></i> − 1), which is obviously situated inside the last rectangle.</div></div><h3 class="problem_subtitle">Input</h3><div class="problem_par"><div class="problem_par_normal">In the first line there is a positive integer <i>n</i>, 0 &lt; <i>n</i> &lt; 100000 — the number of rectangles on the plane. Then <i>n</i> lines follow, each one of them containing four integer numbers <i>x<sub>i</sub></i>, <i>y<sub>i</sub></i>, <i>x<sup>i</sup></i>, <i>y<sup>i</sup></i>, separated with spaces, satisfying the above rules.</div></div><h3 class="problem_subtitle">Output</h3><div class="problem_par"><div class="problem_par_normal">You should output the length (the measurement unit is the edge of one square) of the shortest possible route for the traveler to go from the point (1, 1) to the point (<i>x<sup>n</sup></i> − 1,  <i>y<sup>n</sup></i> − 1), or the number −1, if there exists no such route (the latter possibility is realized, for instance, on the picture).</div></div><h3 class="problem_subtitle">Sample</h3><table class="sample"><tbody><tr><th width="350">input</th><th width="350">output</th></tr><tr><td><pre>2
0 0 3 5
3 1 5 7</pre></td><td><pre>8</pre></td></tr></tbody></table><div class="problem_source"><b>Problem Author: </b>Leonid Volkov<br><b>Problem Source: </b>USU Internal Contest, March 2002<br></div></div></div><div><b>Tags: </b>none &nbsp;<span class="problem_tags_toggle">(<form method="POST" action="problem.aspx?space=1&amp;num=1202" style="display:inline;" id="ToggleTagsForm"><a href="problem.aspx?space=1&amp;num=1202" onclick="document.getElementById('ToggleTagsForm').submit();return false;"><input type="hidden" name="Action" value="HideTags">hide tags for unsolved problems</a></form>)</span></div><div class="problem_links"><span>Difficulty: 442</span> &nbsp;&nbsp;&nbsp;<a href="print.aspx?space=1&amp;num=1202" target="_blank">Printable version</a> &nbsp;&nbsp;&nbsp;<a href="submit.aspx?space=1&amp;num=1202">Submit solution</a> &nbsp;&nbsp;&nbsp;<a href="forum/?space=1&amp;num=1202">Discussion (12)</a><br><a href="status.aspx?space=1&amp;num=1202">All submissions (3483)</a> &nbsp;&nbsp;&nbsp;<a href="status.aspx?space=1&amp;num=1202&amp;status=accepted">All accepted submissions (1174)</a> &nbsp;&nbsp;&nbsp;<a href="rating.aspx?space=1&amp;num=1202">Solutions rating (944)</a></div></td></tr></tbody></table></td></tr><tr><td class="footer"><script type="text/javascript" async="" src="https://mc.yandex.ru/metrika/watch.js"></script><script type="text/javascript"> (function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter20918869 = new Ya.Metrika({ id:20918869, clickmap:true, trackLinks:true, accurateTrackBounce:true }); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = "https://mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript>&lt;div&gt;&lt;img src="https://mc.yandex.ru/watch/20918869" style="position:absolute; left:-9999px;" alt=""&gt;&lt;/div&gt;</noscript>© 2000–2017 <a href="/team.aspx">Timus Online Judge Team</a>. All rights reserved.</td></tr></tbody></table></body></html>