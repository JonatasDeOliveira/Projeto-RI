<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=768"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>1447. Portkey Network @ Timus Online Judge</title><link rel="alternate" hreflang="x-default" href="/problem.aspx?space=1&amp;num=1447"><link rel="alternate" hreflang="en-us" href="/problem.aspx?space=1&amp;num=1447&amp;locale=en"><link rel="alternate" hreflang="ru-ru" href="/problem.aspx?space=1&amp;num=1447&amp;locale=ru"><link rel="stylesheet" type="text/css" href="/style55.css"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico"></head><body><table width="100%" cellspacing="0" cellpadding="0" class="body"><tbody><tr><td class="caption"><table width="100%" cellspacing="0" cellpadding="0"><tbody><tr><td width="130" class="locale"><a href="/problem.aspx?space=1&amp;num=1447&amp;locale=en">ENG</a>&nbsp;&nbsp;<a href="/problem.aspx?space=1&amp;num=1447&amp;locale=ru">RUS</a></td><td class="title"><a href="/">Timus Online Judge</a></td><td width="130"></td></tr></tbody></table></td></tr><tr><td class="panel"><table width="100%" cellspacing="0" cellpadding="0"><tbody><tr><td width="130" valign="TOP" align="CENTER" style="padding-bottom:5px;"><a href="/"><img border="0" src="/images/usu-summer.jpg" height="134" width="106" alt=""></a></td><td valign="TOP" align="LEFT"><table width="100%" cellspacing="0" cellpadding="0" class="panel"><tbody><tr><th width="25%"><div>Online Judge</div></th><th width="25%"><div>Problems</div></th><th width="25%"><div>Authors</div></th><th width="25%"><div>Online contests</div></th></tr><tr><td valign="TOP" align="LEFT"><a href="/">About Online Judge</a><br><a href="/help.aspx?topic=faq">Frequently asked questions</a><br><a href="/news.aspx">Site news</a><br><a href="/forum/">Webboard</a><br><a href="/help.aspx?topic=links">Links</a><br></td><td valign="TOP" align="LEFT"><a href="/problemset.aspx">Problem set</a><br><a href="/submit.aspx">Submit solution</a><br><a href="/status.aspx">Judge status</a><br><a href="/help.aspx?topic=judge">Guide</a><br></td><td valign="TOP"><a href="/register.aspx">Register</a><br><a href="/authedit.aspx">Update your info</a><br><a href="/ranklist.aspx">Authors ranklist</a><br><form action="/search.aspx" method="GET" style="margin-top:0.6em;"><input name="Str" size="12" value="" placeholder="Author’s name"> <input type="SUBMIT" value="Search"></form></td><td valign="TOP"><a href="/contest.aspx">Current contest</a><br><a href="/schedule.aspx">Scheduled contests</a><br><a href="/archive.aspx">Past contests</a><br><a href="/help.aspx?topic=contest">Rules</a><br></td></tr></tbody></table></td></tr></tbody></table></td></tr><tr><td style="padding-top: 32px; padding-bottom: 20px;"><table align="CENTER" cellspacing="0" cellpadding="0"><tbody><tr><td width="800"><div class="problem_content"><h2 class="problem_title">1447. Portkey Network</h2><div class="problem_limits">Time limit: 4.0 second<br>Memory limit: 64 MB<br></div><div id="problem_text"><div class="problem_par"><div class="problem_par_normal">A Muggle firm offered Lucius Malfoy a contract for laying a portkey
network connecting the firm's branches. Muggles believe that the
cost of creating a portkey is proportional to the distance over
which this portkey can transfer a person, so they're ready to pay
for each meter of the network. Their requirements are the
following: the network must make it possible for employees to
travel from any branch of the firm to any other branch (using
several portkeys if necessary), and there mustn't be redundant
portkeys (such that can be excluded and the network would still
connect all the branches).</div></div><div class="problem_par"><div class="problem_par_normal">Lucius understands that the cost of a portkey is determined not by
the distance, but by some other factors. He wants to cheat the
Muggles and lay a network for which the ratio of
the total cost of portkeys to the amount of money paid by the
Muggles is minimal. Thus, he tries to minimize the mean cost of
one meter of the network. Help Mr. Malfoy to cheat the Muggles.</div></div><h3 class="problem_subtitle">Input</h3><div class="problem_par"><div class="problem_par_normal">The first line contains the number of the firm's branches <i>N</i>
(1 ≤ <i>N</i> ≤ 1000). The second line contains an
integer <i>M</i> (1 ≤ <i>M</i> ≤ 500000), which is the number
of pairs of branches that can technically be connected by a
portkey. The next <i>M</i> lines describe these pairs: in each of these
lines, the numbers of the branches, the distance between them in
meters, and the cost of creating a portkey are given. 
The numbers in each line are separated with spaces.
Costs and distances are integers in the range from 1 to 10<sup>6</sup>.
You may assume that a network satisfying the firm's requirements
always exists.</div></div><h3 class="problem_subtitle">Output</h3><div class="problem_par"><div class="problem_par_normal">Output the minimal mean cost of one meter of the network accurate
to 10<sup>−8</sup>. The mean cost of one meter is the ratio of the total
cost of the network's portkeys to its total length.
</div></div><h3 class="problem_subtitle">Samples</h3><table class="sample"><tbody><tr><th width="350">input</th><th width="350">output</th></tr><tr><td><pre>3
3
1 2 50 60
1 3 100 100
2 3 100 100
</pre></td><td><pre>1
</pre></td></tr><tr><td><pre>3
3
1 2 1000 3000
1 3 1 5
2 3 1000 1997
</pre></td><td><pre>2
</pre></td></tr></tbody></table><div class="problem_source"><b>Problem Author: </b>Author — Den Raskovalov, text by Stanislav Vasilyev<br><b>Problem Source: </b>The Xth Urals Collegiate Programing Championship, March 24-25, 2006<br></div></div></div><div><b>Tags: </b><a href="problemset.aspx?space=1&amp;tag=graphs">graph theory</a> &nbsp;<span class="problem_tags_toggle">(<form method="POST" action="problem.aspx?space=1&amp;num=1447" style="display:inline;" id="ToggleTagsForm"><a href="problem.aspx?space=1&amp;num=1447" onclick="document.getElementById('ToggleTagsForm').submit();return false;"><input type="hidden" name="Action" value="HideTags">hide tags for unsolved problems</a></form>)</span></div><div class="problem_links"><span>Difficulty: 1096</span> &nbsp;&nbsp;&nbsp;<a href="print.aspx?space=1&amp;num=1447" target="_blank">Printable version</a> &nbsp;&nbsp;&nbsp;<a href="submit.aspx?space=1&amp;num=1447">Submit solution</a> &nbsp;&nbsp;&nbsp;<a href="forum/?space=1&amp;num=1447">Discussion (10)</a><br><a href="status.aspx?space=1&amp;num=1447">All submissions (5455)</a> &nbsp;&nbsp;&nbsp;<a href="status.aspx?space=1&amp;num=1447&amp;status=accepted">All accepted submissions (1076)</a> &nbsp;&nbsp;&nbsp;<a href="rating.aspx?space=1&amp;num=1447">Solutions rating (379)</a></div></td></tr></tbody></table></td></tr><tr><td class="footer"><script type="text/javascript" async="" src="https://mc.yandex.ru/metrika/watch.js"></script><script type="text/javascript"> (function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter20918869 = new Ya.Metrika({ id:20918869, clickmap:true, trackLinks:true, accurateTrackBounce:true }); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = "https://mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript>&lt;div&gt;&lt;img src="https://mc.yandex.ru/watch/20918869" style="position:absolute; left:-9999px;" alt=""&gt;&lt;/div&gt;</noscript>© 2000–2017 <a href="/team.aspx">Timus Online Judge Team</a>. All rights reserved.</td></tr></tbody></table></body></html>