<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=768"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>1543. Dance Revolution @ Timus Online Judge</title><link rel="alternate" hreflang="x-default" href="/problem.aspx?space=1&amp;num=1543"><link rel="alternate" hreflang="en-us" href="/problem.aspx?space=1&amp;num=1543&amp;locale=en"><link rel="alternate" hreflang="ru-ru" href="/problem.aspx?space=1&amp;num=1543&amp;locale=ru"><link rel="stylesheet" type="text/css" href="/style55.css"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico"></head><body><table width="100%" cellspacing="0" cellpadding="0" class="body"><tbody><tr><td class="caption"><table width="100%" cellspacing="0" cellpadding="0"><tbody><tr><td width="130" class="locale"><a href="/problem.aspx?space=1&amp;num=1543&amp;locale=en">ENG</a>&nbsp;&nbsp;<a href="/problem.aspx?space=1&amp;num=1543&amp;locale=ru">RUS</a></td><td class="title"><a href="/">Timus Online Judge</a></td><td width="130"></td></tr></tbody></table></td></tr><tr><td class="panel"><table width="100%" cellspacing="0" cellpadding="0"><tbody><tr><td width="130" valign="TOP" align="CENTER" style="padding-bottom:5px;"><a href="/"><img border="0" src="/images/usu-summer.jpg" height="134" width="106" alt=""></a></td><td valign="TOP" align="LEFT"><table width="100%" cellspacing="0" cellpadding="0" class="panel"><tbody><tr><th width="25%"><div>Online Judge</div></th><th width="25%"><div>Problems</div></th><th width="25%"><div>Authors</div></th><th width="25%"><div>Online contests</div></th></tr><tr><td valign="TOP" align="LEFT"><a href="/">About Online Judge</a><br><a href="/help.aspx?topic=faq">Frequently asked questions</a><br><a href="/news.aspx">Site news</a><br><a href="/forum/">Webboard</a><br><a href="/help.aspx?topic=links">Links</a><br></td><td valign="TOP" align="LEFT"><a href="/problemset.aspx">Problem set</a><br><a href="/submit.aspx">Submit solution</a><br><a href="/status.aspx">Judge status</a><br><a href="/help.aspx?topic=judge">Guide</a><br></td><td valign="TOP"><a href="/register.aspx">Register</a><br><a href="/authedit.aspx">Update your info</a><br><a href="/ranklist.aspx">Authors ranklist</a><br><form action="/search.aspx" method="GET" style="margin-top:0.6em;"><input name="Str" size="12" value="" placeholder="Author’s name"> <input type="SUBMIT" value="Search"></form></td><td valign="TOP"><a href="/contest.aspx">Current contest</a><br><a href="/schedule.aspx">Scheduled contests</a><br><a href="/archive.aspx">Past contests</a><br><a href="/help.aspx?topic=contest">Rules</a><br></td></tr></tbody></table></td></tr></tbody></table></td></tr><tr><td style="padding-top: 32px; padding-bottom: 20px;"><table align="CENTER" cellspacing="0" cellpadding="0"><tbody><tr><td width="800"><div class="problem_content"><h2 class="problem_title">1543. Dance Revolution</h2><div class="problem_limits">Time limit: 1.0 second<br>Memory limit: 64 MB<br></div><div id="problem_text"><div class="problem_par"><div class="problem_par_normal">Dance Dance Revolution, or DDR (known as Dancing Stage in Europe) is
a music video games series produced by Konami. As of 2005, over 90
official versions have been produced, including those for home video
game consoles. The game is played on a dance pad with four arrow
panels: left, down, up, and right. These panels are pressed using the
player's feet, in response to arrows that appear on the screen in
front of the player. The arrows are synchronized to the general
rhythm or beat of a chosen song, and success is dependent on the
player's ability to time and position his or her steps accordingly.
</div></div><div class="problem_par"><div class="problem_par_right"><i>From Wikipedia, the Free Encyclopedia.</i></div></div><div class="problem_par"><div class="problem_par_normal">DDR machines are extremely popular in Japan. Gradually they have
won hearts and feet of admirers all over the world and have already
appeared in Ekaterinburg. Especially for severe Ural conditions,
the project Dance Dance Revolution Ural Mix (or, simply, DDRUMix)
based on DDR 5th Mix, which is widespread only in Japan, has been developed.
</div></div><div class="problem_par"><div class="problem_par_normal">DDRUMix operates similarly to other Dance Dance Revolution games:
a player must move his or her feet to the beat of a song
following instructions on the screen. During a game, arrows scroll
upwards from the bottom of the screen. When the scrolling arrows
reach the top of the screen, the player must step on the corresponding
arrow panels on the dance platform. The actions of the player are estimated
by the machine and, after the song, the player is taken to the results screen,
which shows the score and bonus points.
</div></div><div class="problem_par"><div class="problem_par_normal">Since DDRUMix is a joint project, the Japanese entrusted leading Ural
programmers with developing the software for the machine. Your task will be
to create the scoring system. For that, you have to know the scoring algorithm.
</div></div><div class="problem_par"><div class="problem_par_normal">Each song in DDRUMix has one of the 3 difficulty levels: Easy, Medium, or Hard
depending on its rhythm (Easy for 1 beat per second, Medium for 2 beats per
second, and Hard for 4 beats per second). A period between two consecutive beats
is called a <i>beat-period</i>, for example, a beat-period for the Medium level is
500 milliseconds. Beat-periods during which the player should step on an
arrow panel are called <i>step-periods</i>, and there may also be empty beat-periods
during which the player isn't expected to make any steps. Each beat-period of
a song is assigned a letter: <b>N</b> if it is empty, and <b>U</b>, <b>D</b>, <b>L</b>, or <b>R</b> if
the player should step on the “Up”, “Down”, “Left”, or “Right” arrow panel during
this beat-period.
</div></div><div class="problem_par"><div class="problem_par_normal">The actions of the player during an empty period are not estimated.
</div></div><div class="problem_par"><div class="problem_par_normal">The actions of the player during a step-period are estimated as follows:
<ol>
<li>All non-first steps are not estimated.</li>
<li>If the player has not pressed any panel during the period, then he or she gets “BOO”.</li>
<li>If the first step was wrong, then the player gets “MISS”.</li>
<li>If the first step was correct (i.e., the player has pressed the arrow panel
corresponding to this beat-period), then the estimate depends on
the time between the start of the step-period and the first step: “PERFECT” if
it is less than 40% of the length of the period, “GREAT” if it is no less than
40% but less than 70%, and “GOOD” if it is no less than 70%.</li>
</ol>
</div></div><div class="problem_par"><div class="problem_par_normal">The total score for a game is the sum of the <i>Stage Score</i>,
<i>Combo Bonus</i>, and <i>Dance Level Bonus</i></div></div><div class="problem_par"><div class="problem_par_normal"><b>How to calculate the Stage Score:</b>
</div></div><div class="problem_par"><div class="problem_par_normal">Let B = 10<sup>6</sup> * Diff, where Diff = 1 for the Easy level, 2
for the Medium level, and 3 for the Hard level.<br>
Denote by N the total number of step-periods and let S = (N*(N+1))/2.<br>
Let n be the number of the current step-period (from 1 to N),
then the number of points for this step-period
</div></div><div class="problem_par"><div class="problem_par_center">StepScore = p * n * (B div S),
</div></div><div class="problem_par"><div class="problem_par_normal">where B div S is the integer part of B/S, and
the score multiplier p depends on the estimate of the player's actions in this
step-period: p = 10 for “PERFECT”, p = 5 for “GREAT”, and p = 0 in other cases.<br>
The Stage Score is the sum of Step Scores for all step-periods of the song.
</div></div><div class="problem_par"><div class="problem_par_normal"><b>How to calculate the Combo Bonus:</b>
</div></div><div class="problem_par"><div class="problem_par_normal">A <i>Combo</i> is a series of consecutive step-periods consisting of
“PERFECT”, “GREAT”, or “GOOD” step-periods only (of course, there can be
empty beat-periods inside a combo, but they are not taken into account and
do not increase the length of the combo).<br>
For each step-period in a combo, the player scores q * c combo points, where
the step multiplier q = 55 for “PERFECT”, q = 33 for “GREAT”, and q = 0 in other cases,
and c is the number of the step-period in the current combo.<br>
The Combo Bonus is the sum of combo points for all step-periods in all combos.
</div></div><div class="problem_par"><div class="problem_par_normal"><b>How to calculate the Dance Level Bonus:</b>
</div></div><div class="problem_par"><div class="problem_par_normal">The player begins a game with zero Dance Points. Each step-period can add or
subtract Dance Points: a “PERFECT” step-period adds 2 Dance Points, a “GREAT”
step-period adds 1 Dance Point, a “GOOD” step-period does nothing, a “BOO”
step-period subtracts 4 Dance Points, and a “MISS” step-period subtracts 5 Dance
Points.<br>
The player is given one of the following Dance Level Bonuses:<br>
AAA = 10,000,000 (all step-periods are “PERFECT”);<br>
AA = 1,000,000 (all step-periods are “PERFECT” or “GREAT”);<br>
A = 100,000 (the player's Dance Points are at least 80% of maximum Dance
Points);<br>
B = 10,000 (at least 64% of maximum Dance Points);<br>
C = 1,000 (at least 50% of maximum Dance Points);<br>
D = 100 (less than 50% of maximum Dance Points);<br>
E = 0 (the player's Dance Points went below zero during the game).
</div></div><div class="problem_par"><div class="problem_par_normal">Given information about one game, you must calculate the total score and
output the game statistics.
</div></div><h3 class="problem_subtitle">Input</h3><div class="problem_par"><div class="problem_par_normal">The first line contains the duration of the song in the format
<b>m:ss</b> (each song is at least 10 seconds and is shorter than 10 minutes)
and the difficulty level of the song: <b>Easy</b>, <b>Medium</b>, or <b>Hard</b>.
The second line describes beat-periods. There is at least one step-period in
the song. The remaining lines of the input contain the log of the player's
actions. Each line corresponds to one pressing of an arrow panel and has
the following form:<br>
<b>&lt;time&gt; &lt;action&gt;</b><br>
where <b>&lt;time&gt;</b> is the time in milliseconds from the start of the song,
and <b>&lt;action&gt;</b> denotes the panel pressed: <b>U</b>, <b>D</b>, <b>L</b>, or <b>R</b>.
Note that it is impossible for any human to press panels more often that one
time in 50 milliseconds.
</div></div><h3 class="problem_subtitle">Output</h3><div class="problem_par"><div class="problem_par_normal">Output the player's statistics. In the first line output the number of
“PERFECT” step-periods, in the second line output the number of “GREAT”
step-periods, and so on. The sixth line is a separator consisting of 20
hyphens (<b>-</b>). In the next lines output the Stage Score, the Combo Bonus, the
Dance Level Bonus, and the total score. For details, see the sample.
</div></div><h3 class="problem_subtitle">Sample</h3><table class="sample"><tbody><tr><th width="350">input</th><th width="350">output</th></tr><tr><td><pre>0:30 Easy
NNNNNLNNRNUNNUNNNDDDNNUNNNNRNU
5201 L
8475 R
8735 L
10000 U
13200 U
17284 D
18355 D
19124 D
22222 U
27543 R
29923 U
</pre></td><td><pre>Perfect: 7
Great: 2
Good: 1
Boo: 0
Miss: 0
--------------------
Stage Score: 7181495
Combo Bonus: 2233
Dance Level Bonus: 100000
Total Score: 7283728
</pre></td></tr></tbody></table><div class="problem_source"><b>Problem Author: </b>Denis Musin<br><b>Problem Source: </b>The 11th Urals Collegiate Programing Championship, Ekaterinburg, April 21, 2007<br></div></div></div><div><b>Tags: </b>none &nbsp;<span class="problem_tags_toggle">(<form method="POST" action="problem.aspx?space=1&amp;num=1543" style="display:inline;" id="ToggleTagsForm"><a href="problem.aspx?space=1&amp;num=1543" onclick="document.getElementById('ToggleTagsForm').submit();return false;"><input type="hidden" name="Action" value="HideTags">hide tags for unsolved problems</a></form>)</span></div><div class="problem_links"><span>Difficulty: 2161</span> &nbsp;&nbsp;&nbsp;<a href="print.aspx?space=1&amp;num=1543" target="_blank">Printable version</a> &nbsp;&nbsp;&nbsp;<a href="submit.aspx?space=1&amp;num=1543">Submit solution</a> &nbsp;&nbsp;&nbsp;<a href="forum/?space=1&amp;num=1543">Discussion (9)</a><br><a href="status.aspx?space=1&amp;num=1543">All submissions (1495)</a> &nbsp;&nbsp;&nbsp;<a href="status.aspx?space=1&amp;num=1543&amp;status=accepted">All accepted submissions (228)</a> &nbsp;&nbsp;&nbsp;<a href="rating.aspx?space=1&amp;num=1543">Solutions rating (167)</a></div></td></tr></tbody></table></td></tr><tr><td class="footer"><script type="text/javascript" async="" src="https://mc.yandex.ru/metrika/watch.js"></script><script type="text/javascript"> (function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter20918869 = new Ya.Metrika({ id:20918869, clickmap:true, trackLinks:true, accurateTrackBounce:true }); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = "https://mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript>&lt;div&gt;&lt;img src="https://mc.yandex.ru/watch/20918869" style="position:absolute; left:-9999px;" alt=""&gt;&lt;/div&gt;</noscript>© 2000–2017 <a href="/team.aspx">Timus Online Judge Team</a>. All rights reserved.</td></tr></tbody></table></body></html>