<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=768"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>1568. Train Car Sorting @ Timus Online Judge</title><link rel="alternate" hreflang="x-default" href="/problem.aspx?space=1&amp;num=1568"><link rel="alternate" hreflang="en-us" href="/problem.aspx?space=1&amp;num=1568&amp;locale=en"><link rel="alternate" hreflang="ru-ru" href="/problem.aspx?space=1&amp;num=1568&amp;locale=ru"><link rel="stylesheet" type="text/css" href="/style52.css"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico"></head><body><table width="100%" cellspacing="0" cellpadding="0" class="body"><tbody><tr><td class="caption"><table width="100%" cellspacing="0" cellpadding="0"><tbody><tr><td width="130" class="locale"><a href="/problem.aspx?space=1&amp;num=1568&amp;locale=en">ENG</a>&nbsp;&nbsp;<a href="/problem.aspx?space=1&amp;num=1568&amp;locale=ru">RUS</a></td><td class="title"><a href="/">Timus Online Judge</a></td><td width="130"></td></tr></tbody></table></td></tr><tr><td class="panel"><table width="100%" cellspacing="0" cellpadding="0"><tbody><tr><td width="130" valign="TOP" align="CENTER" style="padding-bottom:5px;"><a href="/"><img border="0" src="/images/usu-summer.jpg" height="134" width="106" alt=""></a></td><td valign="TOP" align="LEFT"><table width="100%" cellspacing="0" cellpadding="0" class="panel"><tbody><tr><th width="25%"><div>Online Judge</div></th><th width="25%"><div>Problems</div></th><th width="25%"><div>Authors</div></th><th width="25%"><div>Online contests</div></th></tr><tr><td valign="TOP" align="LEFT"><a href="/">About Online Judge</a><br><a href="/help.aspx?topic=faq">Frequently asked questions</a><br><a href="/news.aspx">Site news</a><br><a href="/forum/">Webboard</a><br><a href="/help.aspx?topic=links">Links</a><br></td><td valign="TOP" align="LEFT"><a href="/problemset.aspx">Problem set</a><br><a href="/submit.aspx">Submit solution</a><br><a href="/status.aspx">Judge status</a><br><a href="/help.aspx?topic=judge">Guide</a><br></td><td valign="TOP"><a href="/register.aspx">Register</a><br><a href="/authedit.aspx">Update your info</a><br><a href="/ranklist.aspx">Authors ranklist</a><br><form action="/search.aspx" method="GET" style="margin-top:0.6em;"><input name="Str" size="12" value="" placeholder="Author’s name"> <input type="SUBMIT" value="Search"></form></td><td valign="TOP"><a href="/contest.aspx">Current contest</a><br><a href="/schedule.aspx">Scheduled contests</a><br><a href="/archive.aspx">Past contests</a><br><a href="/help.aspx?topic=contest">Rules</a><br></td></tr></tbody></table></td></tr></tbody></table></td></tr><tr><td style="padding-top: 32px; padding-bottom: 20px;"><table align="CENTER" cellspacing="0" cellpadding="0"><tbody><tr><td width="800"><div class="problem_content"><h2 class="problem_title">1568. Train Car Sorting</h2><div class="problem_limits">Time limit: 1.0 second<br>Memory limit: 64 MB<br></div><div id="problem_text"><div class="problem_par"><div class="problem_par_normal">There are several towers being built simultaneously in the city of Ekaterinburg.
A lot of high quality hardware and materials is needed for the construction, 
and most materials are being shipped to the city via railroad.
Railroad delivery isn't always as fast as contractors would like it to be.
Trains spend too much time at the intermediate stations,
being sorted and directed to different regions of the country.
</div></div><div class="problem_par"><div class="problem_par_normal">As you know, freight train cars are sorted in the following way:
the train is driven to a two-way switch, where each individual car 
can follow either left or right track. After that, the cars are
joined back together.
For example, if the order of the cars in the train is “1 2 3 4 5 6 7”,
they can be split in two parts: “1 3 5” (left track) and “2 4 6 7” (right track),
and then joined: “1 3 5 2 4 6 7”.
</div></div><div class="problem_par"><div class="problem_par_normal">Help railroad workers speed up the sorting process. Write
a program to rearrange cars according to the given order 
using the minimum number of join operations.
</div></div><h3 class="problem_subtitle">Input</h3><div class="problem_par"><div class="problem_par_normal">The first line of input contains a single integer <i>N</i> — the number of cars
in the train (1 ≤ <i>N</i> ≤ 10000).
The second line contains <i>N</i> numbers — the initial ordering of the cars.
Each car has an unique number from 1 to <i>N</i>. The cars have to be reordered
so their numbers are increasing, starting from 1.
</div></div><h3 class="problem_subtitle">Output</h3><div class="problem_par"><div class="problem_par_normal">The first line of ouput shall contain the integer <i>K</i> — minimum number of
times the join must be done.
The following <i>K</i>&nbsp;+&nbsp;1 lines shall contain <i>N</i> numbers each. Output the initial
ordering of the cars on the first of these lines; each following line 
shall contain the ordering achieved with the next join operation.
</div></div><h3 class="problem_subtitle">Samples</h3><table class="sample"><tbody><tr><th width="350">input</th><th width="350">output</th></tr><tr><td><pre>5
5 1 3 2 4
</pre></td><td><pre>2
5 1 3 2 4
1 2 5 3 4
1 2 3 4 5
</pre></td></tr><tr><td><pre>6
6 5 2 4 1 3
</pre></td><td><pre>3
6 5 2 4 1 3
6 4 1 5 2 3
6 1 2 3 4 5
1 2 3 4 5 6
</pre></td></tr></tbody></table><div class="problem_source"><b>Problem Author: </b>Sergey Pupyrev<br><b>Problem Source: </b>The XIIth USU Programing Championship, October 6, 2007<br></div></div></div><div><b>Tags: </b>none &nbsp;<span class="problem_tags_toggle">(<form method="POST" action="problem.aspx?space=1&amp;num=1568" style="display:inline;" id="ToggleTagsForm"><a href="problem.aspx?space=1&amp;num=1568" onclick="document.getElementById('ToggleTagsForm').submit();return false;"><input type="hidden" name="Action" value="HideTags">hide tags for unsolved problems</a></form>)</span></div><div class="problem_links"><span>Difficulty: 1531</span> &nbsp;&nbsp;&nbsp;<a href="print.aspx?space=1&amp;num=1568" target="_blank">Printable version</a> &nbsp;&nbsp;&nbsp;<a href="submit.aspx?space=1&amp;num=1568">Submit solution</a> &nbsp;&nbsp;&nbsp;<a href="forum/?space=1&amp;num=1568">Discussion (4)</a><br><a href="status.aspx?space=1&amp;num=1568">All submissions (881)</a> &nbsp;&nbsp;&nbsp;<a href="status.aspx?space=1&amp;num=1568&amp;status=accepted">All accepted submissions (291)</a> &nbsp;&nbsp;&nbsp;<a href="rating.aspx?space=1&amp;num=1568">Solutions rating (227)</a></div></td></tr></tbody></table></td></tr><tr><td class="footer"><script type="text/javascript" async="" src="https://mc.yandex.ru/metrika/watch.js"></script><script type="text/javascript"> (function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter20918869 = new Ya.Metrika({ id:20918869, clickmap:true, trackLinks:true, accurateTrackBounce:true }); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = "https://mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript>&lt;div&gt;&lt;img src="https://mc.yandex.ru/watch/20918869" style="position:absolute; left:-9999px;" alt=""&gt;&lt;/div&gt;</noscript>© 2000–2017 <a href="/team.aspx">Timus Online Judge Team</a>. All rights reserved.</td></tr></tbody></table></body></html>