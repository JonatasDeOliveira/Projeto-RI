<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=768"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>1741. Communication Fiend @ Timus Online Judge</title><link rel="alternate" hreflang="x-default" href="/problem.aspx?space=1&amp;num=1741"><link rel="alternate" hreflang="en-us" href="/problem.aspx?space=1&amp;num=1741&amp;locale=en"><link rel="alternate" hreflang="ru-ru" href="/problem.aspx?space=1&amp;num=1741&amp;locale=ru"><link rel="stylesheet" type="text/css" href="/style55.css"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico"></head><body><table width="100%" cellspacing="0" cellpadding="0" class="body"><tbody><tr><td class="caption"><table width="100%" cellspacing="0" cellpadding="0"><tbody><tr><td width="130" class="locale"><a href="/problem.aspx?space=1&amp;num=1741&amp;locale=en">ENG</a>&nbsp;&nbsp;<a href="/problem.aspx?space=1&amp;num=1741&amp;locale=ru">RUS</a></td><td class="title"><a href="/">Timus Online Judge</a></td><td width="130"></td></tr></tbody></table></td></tr><tr><td class="panel"><table width="100%" cellspacing="0" cellpadding="0"><tbody><tr><td width="130" valign="TOP" align="CENTER" style="padding-bottom:5px;"><a href="/"><img border="0" src="/images/usu-summer.jpg" height="134" width="106" alt=""></a></td><td valign="TOP" align="LEFT"><table width="100%" cellspacing="0" cellpadding="0" class="panel"><tbody><tr><th width="25%"><div>Online Judge</div></th><th width="25%"><div>Problems</div></th><th width="25%"><div>Authors</div></th><th width="25%"><div>Online contests</div></th></tr><tr><td valign="TOP" align="LEFT"><a href="/">About Online Judge</a><br><a href="/help.aspx?topic=faq">Frequently asked questions</a><br><a href="/news.aspx">Site news</a><br><a href="/forum/">Webboard</a><br><a href="/help.aspx?topic=links">Links</a><br></td><td valign="TOP" align="LEFT"><a href="/problemset.aspx">Problem set</a><br><a href="/submit.aspx">Submit solution</a><br><a href="/status.aspx">Judge status</a><br><a href="/help.aspx?topic=judge">Guide</a><br></td><td valign="TOP"><a href="/register.aspx">Register</a><br><a href="/authedit.aspx">Update your info</a><br><a href="/ranklist.aspx">Authors ranklist</a><br><form action="/search.aspx" method="GET" style="margin-top:0.6em;"><input name="Str" size="12" value="" placeholder="Author’s name"> <input type="SUBMIT" value="Search"></form></td><td valign="TOP"><a href="/contest.aspx">Current contest</a><br><a href="/schedule.aspx">Scheduled contests</a><br><a href="/archive.aspx">Past contests</a><br><a href="/help.aspx?topic=contest">Rules</a><br></td></tr></tbody></table></td></tr></tbody></table></td></tr><tr><td style="padding-top: 32px; padding-bottom: 20px;"><table align="CENTER" cellspacing="0" cellpadding="0"><tbody><tr><td width="800"><div class="problem_content"><h2 class="problem_title">1741. Communication Fiend</h2><div class="problem_limits">Time limit: 1.0 second<br>Memory limit: 64 MB<br></div><div id="problem_text"><div class="problem_par"><div class="problem_par_normal">Kolya has returned from a summer camp and now he's a real <i>communication
fiend</i>. He spends all his free time on the Web chatting with his friends via
ICQ. However, lately the protocol of this service was changed once again, and
Kolya's client stopped working. Now, in order to communicate with his friends
again, Kolya has to upgrade his client from version 1 to version <i>n</i>.
</div></div><div class="problem_par"><div class="problem_par_normal">Kolya has found <i>m</i> upgrade programs on the Web. The <i>i</i>-th program upgrades
the client from version <i>x</i><sub><i>i</i></sub> to version <i>y</i><sub><i>i</i></sub> and its size is <i>d</i><sub><i>i</i></sub> megabytes. Each
program can be installed on the corresponding version of the client only; it
can't be installed on either earlier or later versions.
</div></div><div class="problem_par"><div class="problem_par_normal">The first version, which is currently installed on Kolya's computer, is
licensed, and many of the upgrade programs are pirate copies. If a pirate
upgrade program is used, the client will always be pirated after that, whatever
upgrade is used later. Some of the licensed upgrade programs can be installed
on a pirate version of the client, and some of them can't. All the pirate
upgrade programs can be installed on both licensed and pirate versions of the
client.
</div></div><div class="problem_par"><div class="problem_par_normal">Kolya is missing his friends very much, so he wants to download the necessary
upgrade programs as soon as possible. Unfortunately, his Web connection is not
very fast. Help Kolya determine the minimal total traffic volume necessary for
upgrading the client from version 1 to version <i>n</i>. Kolya doesn't care if the
final version <i>n</i> of his client is licensed or not.
</div></div><h3 class="problem_subtitle">Input</h3><div class="problem_par"><div class="problem_par_normal">The first line contains space-separated integers <i>n</i> and <i>m</i> (2&nbsp;≤&nbsp;<i>n</i>&nbsp;≤&nbsp;10<sup>4</sup>; 1&nbsp;≤&nbsp;<i>m</i>&nbsp;≤&nbsp;10<sup>4</sup>).
</div></div><div class="problem_par"><div class="problem_par_normal">Each of the following <i>m</i> lines describes one upgrade program in the form
“<i>x</i><sub><i>i</i></sub> <i>y</i><sub><i>i</i></sub> <i>d</i><sub><i>i</i></sub> <i>s</i><sub><i>i</i></sub>”. Here, <i>s</i><sub><i>i</i></sub> is the type of the program: “Pirated”,
“Cracked”, or “Licensed”. A cracked upgrade program is a licensed program
that can be installed on a pirate version of the client, and a licensed program
can't be installed on a pirate version. The numbers <i>x</i><sub><i>i</i></sub> and <i>y</i><sub><i>i</i></sub> mean that
the program is installed on version <i>x</i><sub><i>i</i></sub> of the client and upgrades it to
version <i>y</i><sub><i>i</i></sub>. The number <i>d</i><sub><i>i</i></sub> is the size of the program in megabytes (1&nbsp;≤&nbsp;<i>x</i><sub><i>i</i></sub>&nbsp;&lt;&nbsp;<i>y</i><sub><i>i</i></sub>&nbsp;≤&nbsp;<i>n</i>; 1&nbsp;≤&nbsp;<i>d</i><sub><i>i</i></sub>&nbsp;≤&nbsp;10<sup>6</sup>). The data
in each line are separated with exactly one space.
</div></div><h3 class="problem_subtitle">Output</h3><div class="problem_par"><div class="problem_par_normal">If Kolya can upgrade the client from version 1 to version <i>n</i>,
output “Online” in the first line and the minimal necessary total incoming
traffic volume in the second line.
</div></div><div class="problem_par"><div class="problem_par_normal">If it is impossible to upgrade the client, output “Offline”.
</div></div><h3 class="problem_subtitle">Samples</h3><table class="sample"><tbody><tr><th width="350">input</th><th width="350">output</th></tr><tr><td><pre>3 4
1 3 10 Licensed
1 2 2 Pirated
2 3 3 Licensed
2 3 6 Cracked
</pre></td><td><pre>Online
8
</pre></td></tr><tr><td><pre>3 1
1 2 10 Licensed
</pre></td><td><pre>Offline
</pre></td></tr></tbody></table><div class="problem_source"><b>Problem Author: </b>Alex Samsonov (prepared by Marina Mukhacheva)<br><b>Problem Source: </b>XIV Open USU Championship<br></div></div></div><div><b>Tags: </b><a href="problemset.aspx?space=1&amp;tag=dynprog">dynamic programming</a> &nbsp;<span class="problem_tags_toggle">(<form method="POST" action="problem.aspx?space=1&amp;num=1741" style="display:inline;" id="ToggleTagsForm"><a href="problem.aspx?space=1&amp;num=1741" onclick="document.getElementById('ToggleTagsForm').submit();return false;"><input type="hidden" name="Action" value="HideTags">hide tags for unsolved problems</a></form>)</span></div><div class="problem_links"><span>Difficulty: 271</span> &nbsp;&nbsp;&nbsp;<a href="print.aspx?space=1&amp;num=1741" target="_blank">Printable version</a> &nbsp;&nbsp;&nbsp;<a href="submit.aspx?space=1&amp;num=1741">Submit solution</a> &nbsp;&nbsp;&nbsp;<a href="forum/?space=1&amp;num=1741">Discussion (16)</a><br><a href="status.aspx?space=1&amp;num=1741">All submissions (6327)</a> &nbsp;&nbsp;&nbsp;<a href="status.aspx?space=1&amp;num=1741&amp;status=accepted">All accepted submissions (1464)</a> &nbsp;&nbsp;&nbsp;<a href="rating.aspx?space=1&amp;num=1741">Solutions rating (1058)</a></div></td></tr></tbody></table></td></tr><tr><td class="footer"><script type="text/javascript" async="" src="https://mc.yandex.ru/metrika/watch.js"></script><script type="text/javascript"> (function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter20918869 = new Ya.Metrika({ id:20918869, clickmap:true, trackLinks:true, accurateTrackBounce:true }); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = "https://mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript>&lt;div&gt;&lt;img src="https://mc.yandex.ru/watch/20918869" style="position:absolute; left:-9999px;" alt=""&gt;&lt;/div&gt;</noscript>© 2000–2017 <a href="/team.aspx">Timus Online Judge Team</a>. All rights reserved.</td></tr></tbody></table></body></html>