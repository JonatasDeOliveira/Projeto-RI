<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=768"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>2083. The Guardian of Traditions @ Timus Online Judge</title><link rel="alternate" hreflang="x-default" href="/problem.aspx?space=1&amp;num=2083"><link rel="alternate" hreflang="en-us" href="/problem.aspx?space=1&amp;num=2083&amp;locale=en"><link rel="alternate" hreflang="ru-ru" href="/problem.aspx?space=1&amp;num=2083&amp;locale=ru"><link rel="stylesheet" type="text/css" href="/style52.css"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico"></head><body><table width="100%" cellspacing="0" cellpadding="0" class="body"><tbody><tr><td class="caption"><table width="100%" cellspacing="0" cellpadding="0"><tbody><tr><td width="130" class="locale"><a href="/problem.aspx?space=1&amp;num=2083&amp;locale=en">ENG</a>&nbsp;&nbsp;<a href="/problem.aspx?space=1&amp;num=2083&amp;locale=ru">RUS</a></td><td class="title"><a href="/">Timus Online Judge</a></td><td width="130"></td></tr></tbody></table></td></tr><tr><td class="panel"><table width="100%" cellspacing="0" cellpadding="0"><tbody><tr><td width="130" valign="TOP" align="CENTER" style="padding-bottom:5px;"><a href="/"><img border="0" src="/images/usu-summer.jpg" height="134" width="106" alt=""></a></td><td valign="TOP" align="LEFT"><table width="100%" cellspacing="0" cellpadding="0" class="panel"><tbody><tr><th width="25%"><div>Online Judge</div></th><th width="25%"><div>Problems</div></th><th width="25%"><div>Authors</div></th><th width="25%"><div>Online contests</div></th></tr><tr><td valign="TOP" align="LEFT"><a href="/">About Online Judge</a><br><a href="/help.aspx?topic=faq">Frequently asked questions</a><br><a href="/news.aspx">Site news</a><br><a href="/forum/">Webboard</a><br><a href="/help.aspx?topic=links">Links</a><br></td><td valign="TOP" align="LEFT"><a href="/problemset.aspx">Problem set</a><br><a href="/submit.aspx">Submit solution</a><br><a href="/status.aspx">Judge status</a><br><a href="/help.aspx?topic=judge">Guide</a><br></td><td valign="TOP"><a href="/register.aspx">Register</a><br><a href="/authedit.aspx">Update your info</a><br><a href="/ranklist.aspx">Authors ranklist</a><br><form action="/search.aspx" method="GET" style="margin-top:0.6em;"><input name="Str" size="12" value="" placeholder="Author’s name"> <input type="SUBMIT" value="Search"></form></td><td valign="TOP"><a href="/contest.aspx">Current contest</a><br><a href="/schedule.aspx">Scheduled contests</a><br><a href="/archive.aspx">Past contests</a><br><a href="/help.aspx?topic=contest">Rules</a><br></td></tr></tbody></table></td></tr></tbody></table></td></tr><tr><td style="padding-top: 32px; padding-bottom: 20px;"><table align="CENTER" cellspacing="0" cellpadding="0"><tbody><tr><td width="800"><div class="problem_content"><h2 class="problem_title">2083. The Guardian of Traditions</h2><div class="problem_limits">Time limit: 4.0 second<br>Memory limit: 256 MB<br></div><div id="problem_text"><div class="problem_par"><div class="problem_par_normal">Russian ACM ICPC competitors form a strange and miraculous community, and Ural ACMers&nbsp;— even more so.
A newbie can’t even begin to understand strange laws and patterns, according to which everything in this community works.
The Guardian of Traditions Alexander manages not only to understand everything about Ural ACM, but also to discover new patterns.</div></div><div class="problem_par"><div class="problem_par_normal">One of his points of interest lately is searching for dependencies between the distribution of places at the Ural Federal University Championship and the team’s rank at the ACM ICPC World Finals, given that the team qualifies for them.</div></div><div class="problem_par"><div class="problem_par_normal">Alexander has already made huge progress in his research.
It is well-known that every year <i>n</i> teams participate in UrFU Championship and each one of them gets an id number from 1 to <i>n</i> (the competition is held only once a year).
Once upon a time upon completion of another UrFU Championship Alexander wrote down a sequence of teams’ ids, so that the id on <i>i</i>-th position belonged to the team that took <i>i</i>-th place at the Championship.
Alexander quickly noticed that his sequence was just a permutation of integers from 1 to <i>n</i>. Since then, he began writing down such permutations after every UrFU Championship and started looking for interesting patterns in them.</div></div><div class="problem_par"><div class="problem_par_normal">For a long time he had no success, but then a <i>turning</i> year has come. This year Alexander wrote down the permutation <i>p</i>: <i>p</i>(1), <i>p</i>(2), <i>p</i>(3),…,<i>p</i>(<i>n</i>). After that the following pattern has emerged: if in some year the team <i>k</i> took <i>i</i>-th place, then the next year <i>i</i>-th place would be taken by a team <i>p</i>(<i>k</i>). For the last <i>m</i> years now (including the turning year) the UrFU Championship results confirm that pattern.</div></div><div class="problem_par"><div class="problem_par_normal">ACM ICPC Finals are coming soon, and Alexander wants very badly to predict the results of this competition. In addition to discovering this new pattern, he managed to find the Characteristic Vector <i>q</i>.
He believes that if permutations corresponding to last <i>m</i> years were placed into a matrix <i>A</i>, so that the first line described the results of the turning year UrFU Championship, the next line&nbsp;— the results for the next year and so on, and vector <i>q</i> were multiplied by this matrix, the resulting vector would help make an accurate prediction for team UrFU at the upcoming Finals.</div></div><div class="problem_par"><div class="problem_par_normal">Calculate the product of <i>q</i> and <i>A</i> for Alexander, please.</div></div><h3 class="problem_subtitle">Input</h3><div class="problem_par"><div class="problem_par_normal">The first line contains two integers <i>m</i> and <i>n</i>  (2 ≤ <i>m</i>, <i>n</i> ≤ 5 × 10<sup>4</sup>).</div></div><div class="problem_par"><div class="problem_par_normal">The second line contains <i>n</i> integers <i>p</i>(1), <i>p</i>(2), …, <i>p</i>(<i>n</i>) (1 ≤ <i>p</i>(<i>i</i>)
≤ <i>n</i>, <i>p</i>(<i>i</i>) differ for different <i>i</i>) — elements of permutation <i>p</i>.</div></div><div class="problem_par"><div class="problem_par_normal">In the third line the components of the Characteristic Vector <i>q</i> are given: <i>m</i> integers <i>q</i><sub>1</sub>, <i>q</i><sub>2</sub>, …, <i>q</i><sub><i>m</i></sub> 
(0 ≤ <i>q</i><sub><i>i</i></sub> ≤ 10<sup>9</sup>).</div></div><h3 class="problem_subtitle">Output</h3><div class="problem_par"><div class="problem_par_normal">In a single line output <i>n</i> integers separated by spaces&nbsp;— components of the resulting vector <i>q</i>× <i>A</i>.</div></div><h3 class="problem_subtitle">Sample</h3><table class="sample"><tbody><tr><th width="350">input</th><th width="350">output</th></tr><tr><td><pre>3 4
3 2 4 1
3 5 8
</pre></td><td><pre>37 32 41 50 
</pre></td></tr></tbody></table><div class="problem_source"><b>Problem Author: </b>Denis Dublennykh<br></div></div></div><div><b>Tags: </b>none &nbsp;<span class="problem_tags_toggle">(<form method="POST" action="problem.aspx?space=1&amp;num=2083" style="display:inline;" id="ToggleTagsForm"><a href="problem.aspx?space=1&amp;num=2083" onclick="document.getElementById('ToggleTagsForm').submit();return false;"><input type="hidden" name="Action" value="HideTags">hide tags for unsolved problems</a></form>)</span></div><div class="problem_links"><span>Difficulty: 2934</span> &nbsp;&nbsp;&nbsp;<a href="print.aspx?space=1&amp;num=2083" target="_blank">Printable version</a> &nbsp;&nbsp;&nbsp;<a href="submit.aspx?space=1&amp;num=2083">Submit solution</a> &nbsp;&nbsp;&nbsp;<a href="forum/?space=1&amp;num=2083">Discussion (0)</a><br><a href="status.aspx?space=1&amp;num=2083">All submissions (198)</a> &nbsp;&nbsp;&nbsp;<a href="status.aspx?space=1&amp;num=2083&amp;status=accepted">All accepted submissions (60)</a> &nbsp;&nbsp;&nbsp;<a href="rating.aspx?space=1&amp;num=2083">Solutions rating (20)</a></div></td></tr></tbody></table></td></tr><tr><td class="footer"><script type="text/javascript" async="" src="https://mc.yandex.ru/metrika/watch.js"></script><script type="text/javascript"> (function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter20918869 = new Ya.Metrika({ id:20918869, clickmap:true, trackLinks:true, accurateTrackBounce:true }); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = "https://mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript>&lt;div&gt;&lt;img src="https://mc.yandex.ru/watch/20918869" style="position:absolute; left:-9999px;" alt=""&gt;&lt;/div&gt;</noscript>© 2000–2017 <a href="/team.aspx">Timus Online Judge Team</a>. All rights reserved.</td></tr></tbody></table><img src="https://mc.yandex.ru/metrika/advert.gif" style="position: absolute; visibility: hidden; width: 0px; height: 0px;"></body></html>