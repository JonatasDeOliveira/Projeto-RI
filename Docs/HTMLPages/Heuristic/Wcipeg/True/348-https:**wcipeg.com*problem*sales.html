<!DOCTYPE html><html lang="en"><head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <!-- This should probably be done with a server-side include, but
         PHP is easier. -->
    <meta name="description" content="Woburn Collegiate Institute Programming
Enrichment Group Online Judge">
<meta name="keywords" content="PEG Judge,wcipeg.com,Online judge,Canadian
Computing Competition,CCC,American Computer Science League,ACSL,Programming
Enrichment Group,Validator,COCI,Croatian Open Competition in Informatics,
Woburn,Woburn Challenge,Woburn Collegiate Institute,APIO,Asian Pacific
Informatics Olympiad,BOI,Bulgarian Olympiad in Informatics,SMAC,Sane's Monthly
Algorithms Challenge,Problem Solving in Pascal,Bi-Weekly Challenge,Validator,
Hanson Wang,Canada">

    <title>PEG Judge - Sales</title>

    <link href="https://wcipeg.com/assets/css/common.css" rel="stylesheet" type="text/css">
    <link href="https://wcipeg.com/assets/css/submissions.css" rel="stylesheet" type="text/css">
    <link href="https://wcipeg.com/assets/css/bbcode.css" rel="stylesheet" type="text/css">
    <link href="https://wcipeg.com/assets/highlight/styles/idea.css" rel="stylesheet" type="text/css">
    <link href="https://wcipeg.com/assets/icons/favicon.ico" rel="shortcut icon" type="text/css">
    <link href="https://wcipeg.com/assets/css/style.css" rel="stylesheet" type="text/css">
    <link href="https://wcipeg.com/assets/css/jquery.autocomplete.css" rel="stylesheet" type="text/css">
    <link href="https://wcipeg.com/assets/css/desc.css" rel="stylesheet" type="text/css">
    <link href="https://wcipeg.com/assets/css/testcase_editor.css" rel="stylesheet" type="text/css">

    <script type="text/javascript">
        function get_csrf_key() {
            return "csrf_test_name";
        }
        function get_csrf_value() {
            return "a846b326ae579368c4a4e84e51d36946";
        }
        function get_site_url() {
            return "https:\/\/wcipeg.com\/";
        }
    </script>
    <script type="text/javascript" src="https://wcipeg.com/assets/js/jquery-1.10.1.min.js"></script>    <script type="text/javascript" src="https://wcipeg.com/assets/js/jquery-post-csrf.js"></script>    <script type="text/javascript" src="https://wcipeg.com/assets/js/global.js"></script>    <script type="text/javascript" src="https://wcipeg.com/assets/js/moment.min.js"></script>    <script type="text/javascript" src="https://wcipeg.com/assets/js/moment-timezone.min.js"></script>    <script type="text/javascript" src="https://wcipeg.com/assets/highlight/highlight.pack.js"></script>    <script type="text/javascript">hljs.initHighlightingOnLoad();</script>
  </head>

  <body style="">
    <div id="backheader"></div>
    <div id="backmenu"></div>

    <div id="wrapper">
      <div id="container">
        <div id="header">
          <div id="logo">
            <!-- TODO: Change "PEG" to something customizable -->
            <a href="https://wcipeg.com/main"><img src="https://wcipeg.com/assets/img/logo.gif" alt="PEG"></a>          </div>
          <div id="user">
                                      Please <a href="https://wcipeg.com/auth/login?ref=%2Fproblem%2Fsales"><b>log in</b></a>              or <a href="https://wcipeg.com/auth/register"><b>register an account</b></a>.
                      </div> <!-- user -->
                  </div> <!-- header -->

<div id="menu">
  <ul class="nav">
        <li><a href="https://wcipeg.com/main">main</a></li>        <li><a href="https://wcipeg.com/announcements">announcements</a></li>        <li><a href="https://wcipeg.com/problems">problems</a></li>        <li><a href="https://wcipeg.com/submissions">submissions</a></li>        <li><a href="https://wcipeg.com/users">users</a></li>        <li><a href="https://wcipeg.com/organizations">organizations</a></li>        <li><a href="https://wcipeg.com/submit">submit</a></li>        <li><a href="https://wcipeg.com/contests">contests</a></li>        <li><a href="/wiki/Judge:Help" target="_blank">help (<strong>README</strong>)</a></li>        <li><a href="/wiki" target="_blank">wiki</a></li>        <li><a href="/legacy" target="_blank">old</a></li>        <li><a href="/wiki/Judge:Contact" target="_blank">contact</a></li>          </ul>
</div>

<div id="content">


<div id="descContent">
<style type="text/css">
    #descContent span.nobr {
        white-space: nowrap;
    }
    
    #input-table {
        text-align: justify;
    }

    #input-table > tbody > tr > td:first-child {
        vertical-align: top;
        width: 120px;
        text-align: left;
    }
</style>

<h2 align="center">Sales</h2>

<p>Bosco has gotten his hands on <var>B</var> (1 ≤ <var>B</var> ≤ 50) dollars! Being a Magic the Gathering™ enthusiast, he wishes to spend some amount of his budget on cards to improve his deck.</p>

<p>He has located a local store that has <var>N</var> (1 ≤ <var>N</var> ≤ 30,000) cards for sale. Card <var>i</var> costs <var>c<sub>i</sub></var> (1 ≤ <var>c<sub>i</sub></var> ≤ 50) dollars. and will improve Bosco's DQI (Deck Quality Index) by <var>v<sub>i</sub></var> (1 ≤ <var>v<sub>i</sub></var> ≤ 1000) points. Only one copy of each card is for sale.</p>

<p>Business hasn't been too great lately, so the store is offering sales on various days. Though the term "price adjustments" would be more accurate, as card prices can increase, "sales" are much more appealing - and, indeed, Bosco wants to go do all of his shopping on one of the <var>D</var> (1 ≤ <var>D</var> ≤ 3000) days of the sales. In fact he's already acquired a list of the price adjustments that will be made.</p>

<p>On day <var>i</var>, the cost of card <var>a<sub>i</sub></var> (1 ≤ <var>a<sub>i</sub></var> ≤ <var>N</var>) is changed to <var>b<sub>i</sub></var> (1 ≤ <var>b<sub>i</sub></var> ≤ 50), while all other cards remain unchanged. That is, before day 1, all cards have their initial costs (<var>c</var>), and from then on, price adjustments accumulate from day to day.</p>

<p>Additionally, on each day, only certain cards from the store's inventory are actually up for sale. In particular, on day <var>i</var>, only cards from <var>x<sub>i</sub></var> to <var>y<sub>i</sub></var> (1 ≤ <var>x<sub>i</sub></var> ≤ <var>y<sub>i</sub></var> ≤ <var>N</var>), inclusive, may be purchased.</p>

<p>Bosco doesn't care how much of his budget he spends, but he absolutely must have the best possible deck. As such, for each of the <var>D</var> days, he wants to buy some (possibly empty) set of cards, such that the sum of their costs is no larger than <var>B</var>, and the sum of their DQI points is maximal. Determine the DQI sum for each day, so that Bosco will know when to go to take full advantage of the "sales".


</p><h3>Input</h3>

<table id="input-table">
<tbody><tr>
    <td>Line 1:</td>
    <td>The integers <var>B</var>, <var>N</var>, and <var>D</var></td>
</tr>
<tr>
    <td>The next <var>N</var> lines:</td>
    <td>The integers <var>c<sub>i</sub></var> and <var>v<sub>i</sub></var></td>
</tr>
<tr>
    <td>The next <var>D</var> lines:</td>
    <td>The integers <var>a<sub>i</sub></var>, <var>b<sub>i</sub></var>, <var>x<sub>i</sub></var> and <var>y<sub>i</sub></var></td>
</tr>
</tbody></table>

<h3>Output</h3>
<p>For each day, output the maximal DQI sum of cards up for purchase that day which Bosco can purchase without going over his budget, considering all prices changes that have occurred so far.</p>


<h3>Sample Input</h3>
<pre>5 5 3
9 6
1 5
2 3
3 11
2 7
1 1 1 4
4 6 3 5
4 1 1 4</pre>

<h3>Explanation</h3>
<p>At first, the 5 cards (with point values 6, 5, 3, 11 and 7, respectively) have costs of 9, 1, 2, 3, and 2 dollars, in that order.<br>
On the first day, the cost of the first card is reduced to 1 dollar, and the first 4 cards are up for purchase.<br>
On the second day, the cost of the fourth card is increased to 6 dollars, and only the last 3 cards can be bought.<br>
On the final day, the cost of card 4 is changed again, this time to 1 dollar, and the first 4 cards are once again considered.</p>

<h3>Sample Output</h3>
<pre>22
10
25</pre>

<h3>Explanation</h3>
<p>On the first day, Bosco should buy the first, second, and fourth cards, costing a total of 5 dollars.<br>
On the second, cards 3 and 5 should be purchased for 4 dollars, as card 4 is now too expensive.<br>
On the final day, all of the cards up for sale can be bought for 5 dollars. Notice that card 1 still costs 1 dollar, from the first price change.</p></div>

<div id="descSidebar"> <!-- TODO: Make this nicer/more semantic -->
  <p>
        
        <a href="https://wcipeg.com/submissions/,sales">All Submissions</a>    <br>
    
        <a href="https://wcipeg.com/submissions/rank/sales">Best Solutions</a>        <br>
  </p>

  <p>
    
      </p>

  <p>
            <br>
  </p>

  <p>
    <!-- TODO: Move this into the controller -->
    <b>Point Value:</b> 30 (partial)<br>
    <b>Time Limit:</b> 1.00s<br>
    <b>Memory Limit:</b> 16M<br>
    <b>Added:</b> Jun 26, 2010<br>
        <b>Author:</b> <a href="https://wcipeg.com/user/SourSpinach">SourSpinach</a>  </p>

  
  <p>
  <b>Languages Allowed:</b><br>
  <span title="C++03 (g++ 4.1.3)">C++03</span>, <span title="Pascal (fpc 2.6.0-9)">PAS</span>, <span title="C (gcc 4.7.2)">C</span>, <span title="Haskell (ghc-6.12.1)">HASK</span>, <span title="Intel x86 assembly (nasm 2.10.01)">ASM</span>, <span title="Ruby (ruby 2.1.2)">RUBY</span>, <span title="Python 2 (python 2.6.8)">PYTH2</span>, <span title="Java (OpenJDK javac 1.7.0_03)">JAVA</span>, <span title="PHP (PHP 5.4.4)">PHP</span>, <span title="Scheme (Racket v5.0.1) (NOT WORKING)">SCM</span>, <span title="OCaml (version 3.12.1)">CAML</span>, <span title="Perl, v5.10.1">PERL</span>, <span title="C# (Mono version 2.4.4.0) (NOT WORKING)">C#</span>, <span title="C++11 (g++ 4.9.1)">C++11</span>, <span title="Python 3 (python 3.2.3)">PYTH3</span>  </p>
</div> <!-- descSidebar -->

<div id="comments">
  <h2 class="icon" style="background: url(https://wcipeg.com/assets/icons/comment_bubble.png) no-repeat right top">Comments (<a href="https://wcipeg.com/comments/search/place=sales">Search</a>)</h2><p style="text-align: center"></p><div class="comment_block" id="comment2692">
  <div class="comment_header" style="opacity: 1">
    <span class="comment_info">
            <b><a href="https://wcipeg.com/user/bbi5291">bbi5291</a></b>
            <span class="comment_date">
        on <a href="https://wcipeg.com/comments/thread/2692">Jul 03, 2010 - 8:22:25 pm UTC</a>      </span>
      <a class="comment_title" id="title2692" onclick="toggle(&quot;body2692&quot;)">New test data</a>
          </span>
    <ul class="controls">
              <li class="comment_rating" id="rating2692">
    (<span class="upvotes"><span id="upvotes2692">0</span></span>/<span class="downvotes"><span id="downvotes2692">0</span></span>)
  </li>
  </ul>  </div>
  <div id="body2692" class="comment_body">
    <pre id="msg2692" style="display: none">Because Jacob is a nitch and wants Ammar to fail, the test data size has been increased. N can now be up to 30000 and D up to 3000. This is reflected in the problem statement.</pre>
    <div style="opacity: 1">
      Because Jacob is a nitch and wants Ammar to fail, the test data size has been increased. N can now be up to 30000 and D up to 3000. This is reflected in the problem statement.    </div>
    <br><div class="comment_block" id="comment2693">
  <div class="comment_header" style="opacity: 1">
    <span class="comment_info">
            <b><a href="https://wcipeg.com/user/SourSpinach">SourSpinach</a></b>
            <span class="comment_date">
        on <a href="https://wcipeg.com/comments/thread/2693">Jul 03, 2010 - 8:29:59 pm UTC</a>      </span>
      <a class="comment_title" id="title2693" onclick="toggle(&quot;body2693&quot;)">Re: New test data</a>
          </span>
    <ul class="controls">
              <li class="comment_rating" id="rating2693">
    (<span class="upvotes"><span id="upvotes2693">0</span></span>/<span class="downvotes"><span id="downvotes2693">0</span></span>)
  </li>
  </ul>  </div>
  <div id="body2693" class="comment_body">
    <pre id="msg2693" style="display: none">These should've been the limits in the first place, I had just been too lazy to check whether a solution such as Ammar's would run in time.

Now, I believe the only way to solve it fully is the "intended" way - which happens to connect to a topic Brian has recently taught in PEG.</pre>
    <div style="opacity: 1">
      These should've been the limits in the first place, I had just been too lazy to check whether a solution such as Ammar's would run in time. <br> <br>Now, I believe the only way to solve it fully is the "intended" way - which happens to connect to a topic Brian has recently taught in PEG.    </div>
      </div>
</div>
<br><div class="comment_block" id="comment2694">
  <div class="comment_header" style="opacity: 1">
    <span class="comment_info">
            <b><a href="https://wcipeg.com/user/bbi5291">bbi5291</a></b>
            <span class="comment_date">
        on <a href="https://wcipeg.com/comments/thread/2694">Jul 03, 2010 - 8:41:56 pm UTC</a>      </span>
      <a class="comment_title" id="title2694" onclick="toggle(&quot;body2694&quot;)">Re: New test data</a>
          </span>
    <ul class="controls">
              <li class="comment_rating" id="rating2694">
    (<span class="upvotes"><span id="upvotes2694">0</span></span>/<span class="downvotes"><span id="downvotes2694">0</span></span>)
  </li>
  </ul>  </div>
  <div id="body2694" class="comment_body">
    <pre id="msg2694" style="display: none">Also, because I don't like bad HTML, the entire problem statement has been converted to image format, except for the sample input. Enjoy xD</pre>
    <div style="opacity: 1">
      Also, because I don't like bad HTML, the entire problem statement has been converted to image format, except for the sample input. Enjoy xD    </div>
      </div>
</div>
  </div>
</div>
<br>
<div class="comment_block" id="comment2687">
  <div class="comment_header" style="opacity: 1">
    <span class="comment_info">
            <b><a href="https://wcipeg.com/user/Daniel">Daniel</a></b>
            <span class="comment_date">
        on <a href="https://wcipeg.com/comments/thread/2687">Jun 26, 2010 - 1:39:10 pm UTC</a>      </span>
      <a class="comment_title" id="title2687" onclick="toggle(&quot;body2687&quot;)">Clarification</a>
          </span>
    <ul class="controls">
              <li class="comment_rating" id="rating2687">
    (<span class="upvotes"><span id="upvotes2687">0</span></span>/<span class="downvotes"><span id="downvotes2687">0</span></span>)
  </li>
  </ul>  </div>
  <div id="body2687" class="comment_body">
    <pre id="msg2687" style="display: none">So we are suppose to calculate the maximum DQI for each day?
And also for the second line of input, shouldn't it be '2 6' rather than 
'9 6'?</pre>
    <div style="opacity: 1">
      So we are suppose to calculate the maximum DQI for each day? <br>And also for the second line of input, shouldn't it be '2 6' rather than  <br>'9 6'?    </div>
    <br><div class="comment_block" id="comment2688">
  <div class="comment_header" style="opacity: 1">
    <span class="comment_info">
            <b><a href="https://wcipeg.com/user/SourSpinach">SourSpinach</a></b>
            <span class="comment_date">
        on <a href="https://wcipeg.com/comments/thread/2688">Jun 27, 2010 - 1:17:12 am UTC</a>      </span>
      <a class="comment_title" id="title2688" onclick="toggle(&quot;body2688&quot;)">Re: Clarification</a>
          </span>
    <ul class="controls">
              <li class="comment_rating" id="rating2688">
    (<span class="upvotes"><span id="upvotes2688">0</span></span>/<span class="downvotes"><span id="downvotes2688">0</span></span>)
  </li>
  </ul>  </div>
  <div id="body2688" class="comment_body">
    <pre id="msg2688" style="display: none">Yes, for each day (given the range of cards up for sale, and the price changes so far). The initial cost of the 1st card should be 9 dollars - the first sentence of the Explanation will be fixed accordingly.</pre>
    <div style="opacity: 1">
      Yes, for each day (given the range of cards up for sale, and the price changes so far). The initial cost of the 1st card should be 9 dollars - the first sentence of the Explanation will be fixed accordingly.    </div>
      </div>
</div>
  </div>
</div>
<br>
</div>

<div style="clear: both">&nbsp;</div>

</div> <!-- content -->
</div> <!-- container -->
</div> <!-- wrapper -->

<div id="footer">
  <div id="footer_time_info">
    Loaded in 0.0234s.<br>
    Server time on page load:
    May 9, 2018 16:23:01 UTC 
    <br>
  </div>
  <div style="clear: both; height: 1ex"></div>

  <div style="float: right">
    <a href="https://wcipeg.com%2Fproblem%2Fsales">Secure server</a>  </div>

<a href="http://www.debian.org" target="_blank">
  <img src="https://wcipeg.com/assets/img/debian.png" alt="Powered by Debian GNU/Linux"></a>

<a href="http://www.apache.org" target="_blank">
  <img src="https://wcipeg.com/assets/img/apache.gif" alt="Powered by Apache"></a>

<a href="http://www.mysql.com" target="_blank">
  <img src="https://wcipeg.com/assets/img/mysql.png" alt="Powered by MySQL"></a>

<a href="http://www.php.net" target="_blank">
  <img src="https://wcipeg.com/assets/img/php.gif" alt="Powered by PHP"> 
</a>

<a href="http://www.openssl.org" target="_blank">
  <img src="https://wcipeg.com/assets/img/openssl.png" alt="Powered by OpenSSL"> 
</a>

<a href="http://www.codeigniter.com" target="_blank">
  <img src="https://wcipeg.com/assets/img/codeignited.gif" alt="Powered by CodeIgniter"> 
</a>

<a href="http://validator.w3.org/check?uri=referer" target="_blank">
  <img src="https://wcipeg.com/assets/img/html5.png" alt="Valid HTML 5"></a>

<a href="http://jigsaw.w3.org/css-validator/check/referer" target="_blank">
  <img src="https://wcipeg.com/assets/img/css3.png" alt="Valid CSS 3"></a>

<span title="Thanks to Naomi Cui for helping to create this image">
  <a href="http://git-scm.com/" target="_blank">
    <img src="https://wcipeg.com/assets/img/git-80x15-final.png" alt="git managed">  </a>
</span>

<br>

<div style="font-size: 85%; line-height: 1.5">
  <a href="/wiki/Judge:Copyright" target="_blank">Notes on copyright</a> |
  <a href="/wiki/Judge:TOS" target="_blank">Terms of service</a>
  <br>
  <a href="/wiki/Judge:Free_software" target="_blank">The PEG Judge is powered
  solely by free software.</a>
</div>
 
</div> <!-- footer -->



</body></html>