<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=768"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>H. Sniper Shot @ Ural SU contest. Petrozavodsk training camp. Winter 2009 @ Timus Online Judge</title><link rel="alternate" hreflang="x-default" href="/problem.aspx?space=72&amp;num=8"><link rel="alternate" hreflang="en-us" href="/problem.aspx?space=72&amp;num=8&amp;locale=en"><link rel="alternate" hreflang="ru-ru" href="/problem.aspx?space=72&amp;num=8&amp;locale=ru"><link rel="stylesheet" type="text/css" href="/style52.css"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico"></head><body><table width="100%" cellspacing="0" cellpadding="0" class="body"><tbody><tr><td class="caption"><table width="100%" cellspacing="0" cellpadding="0"><tbody><tr><td width="130" class="locale"><a href="/problem.aspx?space=72&amp;num=8&amp;locale=en">ENG</a>&nbsp;&nbsp;<a href="/problem.aspx?space=72&amp;num=8&amp;locale=ru">RUS</a></td><td class="title"><a href="/">Timus Online Judge</a></td><td width="130"></td></tr></tbody></table></td></tr><tr><td class="panel"><table width="100%" cellspacing="0" cellpadding="0"><tbody><tr><td width="130" valign="TOP" align="CENTER" style="padding-bottom:5px;"><a href="/"><img border="0" src="/images/usu-summer.jpg" height="134" width="106" alt=""></a></td><td valign="TOP" align="LEFT"><table width="100%" cellspacing="0" cellpadding="0" class="panel"><tbody><tr><th width="25%"><div>Online Judge</div></th><th width="25%"><div>Problems</div></th><th width="25%"><div>Authors</div></th><th width="25%"><div>Online contests</div></th></tr><tr><td valign="TOP" align="LEFT"><a href="/">About Online Judge</a><br><a href="/help.aspx?topic=faq">Frequently asked questions</a><br><a href="/news.aspx">Site news</a><br><a href="/forum/">Webboard</a><br><a href="/help.aspx?topic=links">Links</a><br></td><td valign="TOP" align="LEFT"><a href="/problemset.aspx">Problem set</a><br><a href="/submit.aspx">Submit solution</a><br><a href="/status.aspx">Judge status</a><br><a href="/help.aspx?topic=judge">Guide</a><br></td><td valign="TOP"><a href="/register.aspx">Register</a><br><a href="/authedit.aspx">Update your info</a><br><a href="/ranklist.aspx">Authors ranklist</a><br><form action="/search.aspx" method="GET" style="margin-top:0.6em;"><input name="Str" size="12" value="" placeholder="Author’s name"> <input type="SUBMIT" value="Search"></form></td><td valign="TOP"><a href="/contest.aspx">Current contest</a><br><a href="/schedule.aspx">Scheduled contests</a><br><a href="/archive.aspx">Past contests</a><br><a href="/help.aspx?topic=contest">Rules</a><br></td></tr></tbody></table></td></tr></tbody></table></td></tr><tr><td style="padding-top: 32px; padding-bottom: 20px;"><h2 class="title">Ural SU contest. Petrozavodsk training camp. Winter 2009</h2><div style="text-align:center; margin-bottom:1em;"><a href="/contest.aspx?id=72">About</a> &nbsp; &nbsp; <a href="/problemset.aspx?space=72" class="selectedMenu">Problems</a> &nbsp; &nbsp; <a href="/submit.aspx?space=72">Submit solution</a> &nbsp; &nbsp; <a href="/status.aspx?space=72">Judge status</a> &nbsp; &nbsp; <a href="/monitor.aspx?id=72">Standings</a></div><div style="margin-bottom:1em;"><div style="text-align:center; font-weight:bold;">Contest is over</div></div><table align="CENTER" cellspacing="0" cellpadding="0"><tbody><tr><td width="800"><div class="problem_content"><h2 class="problem_title">H. Sniper Shot</h2><div class="problem_limits">Time limit: 1.0 second<br>Memory limit: 64 MB<br></div><div id="problem_text"><div class="problem_par"><div class="problem_par_normal">There is a sniper at point <i>S</i>. His mission is to eliminate an enemy of the state, who rides his bicycle along a straight line from point <i>A</i> to point <i>B</i>. The bullet flies along a striaght line with infinite speed. There are <i>n</i> rectangular parallelepiped-shaped skyscrapers in the city. The bullet can't fly through the skyscraper but can touch its border. Of course, the sniper will make a deadly shot as soon as possible. Your task is to calculate the coordinates of the enemy at the moment of the shot.</div></div><h3 class="problem_subtitle">Input</h3><div class="problem_par"><div class="problem_par_normal">The first line contains space-separated coordinates of <i>S</i>: <i>s<sub>x</sub></i>, <i>s<sub>y</sub></i>, <i>s<sub>z</sub></i> <nobr>(<i>s<sub>z</sub></i> ≥ 0)</nobr>. The second line contains space-separated coordinates of points <i>A</i> and <i>B</i>: <i>a<sub>x</sub></i>, <i>a<sub>y</sub></i>, <i>b<sub>x</sub></i>, <i>b<sub>y</sub></i>. The enemy of the state moves on the surface of earth, so his <i>z</i>-coordinate is always equal to zero. The third line containts an integer <i>n</i> <nobr>(0 ≤ <i>n</i> ≤ 100)</nobr>. Each of the following <i>n</i> lines contains space-separated numbers <i>l<sub>x</sub></i>, <i>l<sub>y</sub></i>, <i>r<sub>x</sub></i>, <i>r<sub>y</sub></i>, <i>h</i> <nobr>(<i>l<sub>x</sub></i> &lt; <i>r<sub>x</sub></i>; <i>l<sub>y</sub></i> &lt; <i>r<sub>y</sub></i>; <i>h</i> &gt; 0)</nobr>—coordinates of the opposite corners of the bottom of the current skyscraper and its height. The sides of the skyscrapers are parallel to the corrdinate axes. All coordinates and heights are integers and don't exceed 100 by their absolute values.
It is guaranteed that no two skyscrapers have common points, the point <i>S</i> doesn't lie inside or on the border of the skyscraper and the segment <i>AB</i> doesn't have common points with any of the skyscrapers.</div></div><h3 class="problem_subtitle">Output</h3><div class="problem_par"><div class="problem_par_normal">If the enemy of the state cannot be eliminated, output “Impossible”. In the other case output the coordinates of the enemy of the state precise up to 10<sup>−7</sup>.</div></div><h3 class="problem_subtitle">Samples</h3><table class="sample"><tbody><tr><th width="350">input</th><th width="350">output</th></tr><tr><td><pre>0 0 2
-4 4 4 4
2
-3 2 -1 3 10
1 -1 4 2 20
</pre></td><td><pre>-1.3333333333 4.0000000000
</pre></td></tr><tr><td><pre>0 0 2
4 1 4 -1
1
1 -1 3 1 10
</pre></td><td><pre>Impossible
</pre></td></tr></tbody></table><div class="problem_source"><b>Problem Author: </b>Alex Samsonov<br><b>Problem Source: </b>Ural SU Contest. Petrozavodsk Winter Session, February 2009
<br></div></div></div><div class="problem_links"><a href="print.aspx?space=72&amp;num=8" target="_blank">Printable version</a><br></div>To submit the solution for this problem go to the Problem set: <a href="problem.aspx?space=1&amp;num=1697"><nobr>1697. Sniper Shot</nobr></a></td></tr></tbody></table></td></tr><tr><td class="footer"><script type="text/javascript" async="" src="https://mc.yandex.ru/metrika/watch.js"></script><script type="text/javascript"> (function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter20918869 = new Ya.Metrika({ id:20918869, clickmap:true, trackLinks:true, accurateTrackBounce:true }); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = "https://mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript>&lt;div&gt;&lt;img src="https://mc.yandex.ru/watch/20918869" style="position:absolute; left:-9999px;" alt=""&gt;&lt;/div&gt;</noscript>© 2000–2017 <a href="/team.aspx">Timus Online Judge Team</a>. All rights reserved.</td></tr></tbody></table><img src="https://mc.yandex.ru/metrika/advert.gif" style="position: absolute; visibility: hidden; width: 0px; height: 0px;"></body></html>