<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=768"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>D. Warlord of the Army of Mages @ Ural SU contest. Petrozavodsk training camp. Summer 2010 @ Timus Online Judge</title><link rel="alternate" hreflang="x-default" href="/problem.aspx?space=89&amp;num=4"><link rel="alternate" hreflang="en-us" href="/problem.aspx?space=89&amp;num=4&amp;locale=en"><link rel="alternate" hreflang="ru-ru" href="/problem.aspx?space=89&amp;num=4&amp;locale=ru"><link rel="stylesheet" type="text/css" href="/style52.css"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico"></head><body><table width="100%" cellspacing="0" cellpadding="0" class="body"><tbody><tr><td class="caption"><table width="100%" cellspacing="0" cellpadding="0"><tbody><tr><td width="130" class="locale"><a href="/problem.aspx?space=89&amp;num=4&amp;locale=en">ENG</a>&nbsp;&nbsp;<a href="/problem.aspx?space=89&amp;num=4&amp;locale=ru">RUS</a></td><td class="title"><a href="/">Timus Online Judge</a></td><td width="130"></td></tr></tbody></table></td></tr><tr><td class="panel"><table width="100%" cellspacing="0" cellpadding="0"><tbody><tr><td width="130" valign="TOP" align="CENTER" style="padding-bottom:5px;"><a href="/"><img border="0" src="/images/usu-summer.jpg" height="134" width="106" alt=""></a></td><td valign="TOP" align="LEFT"><table width="100%" cellspacing="0" cellpadding="0" class="panel"><tbody><tr><th width="25%"><div>Online Judge</div></th><th width="25%"><div>Problems</div></th><th width="25%"><div>Authors</div></th><th width="25%"><div>Online contests</div></th></tr><tr><td valign="TOP" align="LEFT"><a href="/">About Online Judge</a><br><a href="/help.aspx?topic=faq">Frequently asked questions</a><br><a href="/news.aspx">Site news</a><br><a href="/forum/">Webboard</a><br><a href="/help.aspx?topic=links">Links</a><br></td><td valign="TOP" align="LEFT"><a href="/problemset.aspx">Problem set</a><br><a href="/submit.aspx">Submit solution</a><br><a href="/status.aspx">Judge status</a><br><a href="/help.aspx?topic=judge">Guide</a><br></td><td valign="TOP"><a href="/register.aspx">Register</a><br><a href="/authedit.aspx">Update your info</a><br><a href="/ranklist.aspx">Authors ranklist</a><br><form action="/search.aspx" method="GET" style="margin-top:0.6em;"><input name="Str" size="12" value="" placeholder="Author’s name"> <input type="SUBMIT" value="Search"></form></td><td valign="TOP"><a href="/contest.aspx">Current contest</a><br><a href="/schedule.aspx">Scheduled contests</a><br><a href="/archive.aspx">Past contests</a><br><a href="/help.aspx?topic=contest">Rules</a><br></td></tr></tbody></table></td></tr></tbody></table></td></tr><tr><td style="padding-top: 32px; padding-bottom: 20px;"><h2 class="title">Ural SU contest. Petrozavodsk training camp. Summer 2010</h2><div style="text-align:center; margin-bottom:1em;"><a href="/contest.aspx?id=89">About</a> &nbsp; &nbsp; <a href="/problemset.aspx?space=89" class="selectedMenu">Problems</a> &nbsp; &nbsp; <a href="/submit.aspx?space=89">Submit solution</a> &nbsp; &nbsp; <a href="/status.aspx?space=89">Judge status</a> &nbsp; &nbsp; <a href="/monitor.aspx?id=89">Standings</a></div><div style="margin-bottom:1em;"><div style="text-align:center; font-weight:bold;">Contest is over</div></div><table align="CENTER" cellspacing="0" cellpadding="0"><tbody><tr><td width="800"><div class="problem_content"><h2 class="problem_title">D. Warlord of the Army of Mages</h2><div class="problem_limits">Time limit: 0.5 second<br>Memory limit: 64 MB<br></div><div id="problem_text"><div class="problem_par"><div class="problem_par_normal">After government of the Kingdom of Mages had formed a new army, they had to elect its
warlord. Two wisest Masters, head of the Kingdom Zagamius and lich Sandro, decided
to interview some candidates. They entered two different cabinets and started to invite
certain mages for an interview or let go the mages they already talked to. Sandro and Zagamius
could call the same mage for an interview several times and there could be more than one
mage in their cabinets at some moments.</div></div><div class="problem_par"><div class="problem_par_normal">Each Master defined an order in which he will invite mages and let them go.
If at certain moment both Masters can perform an action, then one of them performs it and the other
one waits for him. In some cases only one Master can perform his action.
For example, if Sandro invites a mage <i>a</i>, and this mage is being interviewed by Zagamius at that moment,
then Sandro will wait until the mage <i>a</i> is free.</div></div><div class="problem_par"><div class="problem_par_normal">Unfortunately, there can be a situation when both Masters will wait for each other.
In that case they won't elect the warlord of the army of mages and will lose a war that
haven't yet started. Your should determine whether such a stupid defeat is possible.</div></div><h3 class="problem_subtitle">Input</h3><div class="problem_par"><div class="problem_par_normal">The first line contains the number of test cases <i>t</i> (1 ≤ <i>t</i> ≤ 10).
Each test case starts with a line containing space-separated integers <i>n</i>, <i>m</i> and <i>k</i> (1 ≤ <i>n</i>, <i>m</i>, <i>k</i> ≤ 1&nbsp;000),
which are the number of actions planned by Sandro, the number of actions planned by Zagamius and the number of mages
in the new army. Mages are numbered with integers from 1 to <i>k</i>.
The next <i>n</i> lines contain the Sandro's plan. Each line contains a sign “+” or “-” and an integer <i>i</i> (1 ≤ <i>i</i> ≤ <i>k</i>).
Sign “+” means that Sandro wants to invite the <i>i</i>-th mage, and sign “-” means that he wants to let him go.
The next <i>m</i> lines contain the plan of Zagamius in the same format.
In both plans Masters let a mage go only if he is present in his cabinet.
It is guaranteed that no Master will invite a mage if he is already present in his cabinet.
If all the planned actions are performed, the cabinets of both Masters will be empty.</div></div><h3 class="problem_subtitle">Output</h3><div class="problem_par"><div class="problem_par_normal">For each test case, output “:-)” if both Masters will certainly perform all the planned actions
and will elect the warlord. In the other case, output “:-(”.</div></div><h3 class="problem_subtitle">Sample</h3><table class="sample"><tbody><tr><th width="350">input</th><th width="350">output</th></tr><tr><td><pre>2
4 4 2
+ 1
+ 2
- 2
- 1
+ 1
+ 2
- 2
- 1
4 4 2
+ 1
+ 2
- 1
- 2
+ 2
+ 1
- 2
- 1
</pre></td><td><pre>:-)
:-(
</pre></td></tr></tbody></table><div class="problem_source"><b>Problem Author: </b>Eugene Kurpilyanskiy<br><b>Problem Source: </b>Ural SU Contest. Petrozavodsk Summer Session, August 2010<br></div></div></div><div class="problem_links"><a href="print.aspx?space=89&amp;num=4" target="_blank">Printable version</a><br></div>To submit the solution for this problem go to the Problem set: <a href="problem.aspx?space=1&amp;num=1844"><nobr>1844. Warlord of the Army of Mages</nobr></a></td></tr></tbody></table></td></tr><tr><td class="footer"><script type="text/javascript" async="" src="https://mc.yandex.ru/metrika/watch.js"></script><script type="text/javascript"> (function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter20918869 = new Ya.Metrika({ id:20918869, clickmap:true, trackLinks:true, accurateTrackBounce:true }); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = "https://mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript>&lt;div&gt;&lt;img src="https://mc.yandex.ru/watch/20918869" style="position:absolute; left:-9999px;" alt=""&gt;&lt;/div&gt;</noscript>© 2000–2017 <a href="/team.aspx">Timus Online Judge Team</a>. All rights reserved.</td></tr></tbody></table><img src="https://mc.yandex.ru/metrika/advert.gif" style="position: absolute; visibility: hidden; width: 0px; height: 0px;"></body></html>