<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><HTML><HEAD><META http-equiv="Content-Type" content="text/html; charset=utf-8"><META NAME="viewport" CONTENT="width=768"><META HTTP-EQUIV="X-UA-Compatible" CONTENT="IE=edge"><TITLE>D. Reductions @ Qualification round of Eastern subregional contest 2015 @ Timus Online Judge</TITLE><LINK REL="alternate" HREFLANG="x-default" HREF="/problem.aspx?space=340&amp;num=4"><LINK REL="alternate" HREFLANG="en-us" HREF="/problem.aspx?space=340&amp;num=4&amp;locale=en"><LINK REL="alternate" HREFLANG="ru-ru" HREF="/problem.aspx?space=340&amp;num=4&amp;locale=ru"><LINK REL="stylesheet" TYPE="text/css" HREF="/style52.css"><LINK REL="shortcut icon" TYPE="image/x-icon" HREF="/favicon.ico"></HEAD><BODY><TABLE WIDTH="100%" CELLSPACING="0" CELLPADDING="0" CLASS="body"><TR><TD CLASS="caption"><TABLE WIDTH="100%" CELLSPACING="0" CELLPADDING="0"><TR><TD WIDTH="130" CLASS="locale"><A HREF="/problem.aspx?space=340&amp;num=4&amp;locale=en">ENG</A>&nbsp;&nbsp;<A HREF="/problem.aspx?space=340&amp;num=4&amp;locale=ru">RUS</A></TD><TD CLASS="title"><A HREF="/">Timus Online Judge</A></TD><TD WIDTH="130"></TD></TR></TABLE></TD></TR><TR><TD CLASS="panel"><TABLE WIDTH="100%" CELLSPACING="0" CELLPADDING="0"><TR><TD WIDTH="130" VALIGN="TOP" ALIGN="CENTER" STYLE="padding-bottom:5px;"><A HREF="/"><IMG BORDER="0" SRC="/images/usu-summer.jpg" HEIGHT="134" WIDTH="106" ALT=""></A></TD><TD VALIGN="TOP" ALIGN="LEFT"><TABLE WIDTH="100%" CELLSPACING="0" CELLPADDING="0" CLASS="panel"><TR><TH WIDTH="25%"><DIV>Online Judge</DIV></TH><TH WIDTH="25%"><DIV>Problems</DIV></TH><TH WIDTH="25%"><DIV>Authors</DIV></TH><TH WIDTH="25%"><DIV>Online contests</DIV></TH></TR><TR><TD VALIGN="TOP" ALIGN="LEFT"><A HREF="/">About Online Judge</A><BR><A HREF="/help.aspx?topic=faq">Frequently asked questions</A><BR><A HREF="/news.aspx">Site news</A><BR><A HREF="/forum/">Webboard</A><BR><A HREF="/help.aspx?topic=links">Links</A><BR></TD><TD VALIGN="TOP" ALIGN="LEFT"><A HREF="/problemset.aspx">Problem set</A><BR><A HREF="/submit.aspx">Submit solution</A><BR><A HREF="/status.aspx">Judge status</A><BR><A HREF="/help.aspx?topic=judge">Guide</A><BR></TD><TD VALIGN="TOP"><A HREF="/register.aspx">Register</A><BR><A HREF="/authedit.aspx">Update your info</A><BR><A HREF="/ranklist.aspx">Authors ranklist</A><BR><FORM ACTION="/search.aspx" METHOD="GET" STYLE="margin-top:0.6em;"><INPUT NAME="Str" SIZE="12" VALUE="" PLACEHOLDER="Author’s name"> <INPUT TYPE="SUBMIT" VALUE="Search"></FORM></TD><TD VALIGN="TOP"><A HREF="/contest.aspx">Current contest</A><BR><A HREF="/schedule.aspx">Scheduled contests</A><BR><A HREF="/archive.aspx">Past contests</A><BR><A HREF="/help.aspx?topic=contest">Rules</A><BR></TD></TR></TABLE></TD></TR></TABLE></TD></TR><TR><TD STYLE="padding-top: 32px; padding-bottom: 20px;"><H2 CLASS="title">Qualification round of Eastern subregional contest 2015</H2><DIV STYLE="text-align:center; margin-bottom:1em;"><A HREF="/contest.aspx?id=340">About</A> &nbsp; &nbsp; <A HREF="/problemset.aspx?space=340" CLASS="selectedMenu">Problems</A> &nbsp; &nbsp; <A HREF="/submit.aspx?space=340">Submit solution</A> &nbsp; &nbsp; <A HREF="/status.aspx?space=340">Judge status</A> &nbsp; &nbsp; <A HREF="/monitor.aspx?id=340">Standings</A></DIV><DIV STYLE="margin-bottom:1em;"><DIV STYLE="text-align:center; font-weight:bold;">Contest is over</DIV></DIV><TABLE ALIGN="CENTER" CELLSPACING="0" CELLPADDING="0"><TR><TD WIDTH="800"><DIV CLASS="problem_content"><H2 class="problem_title">D. Reductions</H2><DIV class="problem_limits">Time limit: 0.5 second<BR>Memory limit: 32 MB<BR>Language limit: C, C++, Pascal<BR></DIV><DIV ID="problem_text"><DIV CLASS="problem_par"><DIV CLASS="problem_par_normal">You are given a set of words. For each word you must create one of the following representations:
<ol>
<li> The whole word as it is, without changes.
<li> A prefix of the word with a dot at its end.
<li> A prefix and a suffix of the word separated by a hyphen.
</ol></DIV></DIV><DIV CLASS="problem_par"><DIV CLASS="problem_par_normal">Let us call this new representation of a word <i>reduction</i>.
Word fits a given reduction if it is possible to reconstruct the word from the reduction 
by replacing dot/hyphen with a (possibly empty) string.</DIV></DIV><DIV CLASS="problem_par"><DIV CLASS="problem_par_normal">Your task is to create a reduction for each word in a given set, so that
only one word would fit each reduction.</DIV></DIV><DIV CLASS="problem_par"><DIV CLASS="problem_par_normal">For example, if you are given two words &ldquo;information&rdquo; and &ldquo;instruction&rdquo; you
can’t create a reduction &ldquo;in-ion&rdquo; for either of them, because both can be reconstructed
from it. You can, however, create reductions &ldquo;inf.&rdquo; and &ldquo;ins.&rdquo;.
If you are given two words &ldquo;bar&rdquo; and &ldquo;barn&rdquo; you can’t use reduction &ldquo;bar.&rdquo;, but
can create reductions &ldquo;bar&rdquo; and &ldquo;b-n&rdquo;.</DIV></DIV><DIV CLASS="problem_par"><DIV CLASS="problem_par_normal">From all possible sets of reductions you must choose one with minimal aggregated
length of reductions. If there are several of those, choose one, where maximal amount
of words are left in their initial form. If there are still several solutions, choose one with
minimal amount of reductions with a hyphen. Lastly, if there is still an ambiguity, choose
a solution with maximal aggregated length of prefixes before hyphens.
It is guaranteed, that there is a single solution, that meets all of the conditions above.</DIV></DIV><H3 CLASS="problem_subtitle">Input</H3><DIV CLASS="problem_par"><DIV CLASS="problem_par_normal">First line contains a number of words <i>n</i> (1 &le; <i>n</i> &le; 1&nbsp;000&nbsp;000).
Next <i>n</i> lines contain one word each. All words are different and consist of 
lower-case latin letters. Their aggregated length is not greater than 1&nbsp;000&nbsp;000.
Words in the input are ordered lexicographically.</DIV></DIV><H3 CLASS="problem_subtitle">Output</H3><DIV CLASS="problem_par"><DIV CLASS="problem_par_normal">Print list of reductions for all words in the same order in which words appeared in the input.</DIV></DIV><H3 CLASS="problem_subtitle">Samples</H3><TABLE CLASS="sample"><TR><TH WIDTH="350">input</TH><TH WIDTH="350">output</TH></TR><TR><TD><PRE>4
aba
abaca
add
dd
</PRE></TD><TD><PRE>aba
a-ca
add
dd
</PRE></TD></TR><TR><TD><PRE>2
aa
aaaaa
</PRE></TD><TD><PRE>aa
aaa.
</PRE></TD></TR><TR><TD><PRE>2
abc
abcdabc
</PRE></TD><TD><PRE>abc
abcd.
</PRE></TD></TR></TABLE><DIV CLASS="problem_source"><B>Problem Author: </B>Mikhail Rubinchik (prepared by Egor Shchelkonogov)<BR></DIV></DIV></DIV><DIV CLASS="problem_links"><A HREF="print.aspx?space=340&amp;num=4" TARGET="_blank">Printable version</A><BR></DIV>To submit the solution for this problem go to the Problem set: <A HREF="problem.aspx?space=1&amp;num=2077"><nobr>2077. Reductions</nobr></A></TD></TR></TABLE></TD></TR><TR><TD CLASS="footer"><script type="text/javascript"> (function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter20918869 = new Ya.Metrika({ id:20918869, clickmap:true, trackLinks:true, accurateTrackBounce:true }); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = "https://mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="https://mc.yandex.ru/watch/20918869" style="position:absolute; left:-9999px;" alt=""></div></noscript>© 2000–2017 <A HREF="/team.aspx">Timus Online Judge Team</A>. All rights reserved.</TD></TR></TABLE></BODY></HTML>