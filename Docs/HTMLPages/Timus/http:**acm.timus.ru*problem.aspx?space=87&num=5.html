<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><HTML><HEAD><META http-equiv="Content-Type" content="text/html; charset=utf-8"><META NAME="viewport" CONTENT="width=768"><META HTTP-EQUIV="X-UA-Compatible" CONTENT="IE=edge"><TITLE>E. Tennis Racket @ Ural Championship 2011 @ Timus Online Judge</TITLE><LINK REL="alternate" HREFLANG="x-default" HREF="/problem.aspx?space=87&amp;num=5"><LINK REL="alternate" HREFLANG="en-us" HREF="/problem.aspx?space=87&amp;num=5&amp;locale=en"><LINK REL="alternate" HREFLANG="ru-ru" HREF="/problem.aspx?space=87&amp;num=5&amp;locale=ru"><LINK REL="stylesheet" TYPE="text/css" HREF="/style52.css"><LINK REL="shortcut icon" TYPE="image/x-icon" HREF="/favicon.ico"></HEAD><BODY><TABLE WIDTH="100%" CELLSPACING="0" CELLPADDING="0" CLASS="body"><TR><TD CLASS="caption"><TABLE WIDTH="100%" CELLSPACING="0" CELLPADDING="0"><TR><TD WIDTH="130" CLASS="locale"><A HREF="/problem.aspx?space=87&amp;num=5&amp;locale=en">ENG</A>&nbsp;&nbsp;<A HREF="/problem.aspx?space=87&amp;num=5&amp;locale=ru">RUS</A></TD><TD CLASS="title"><A HREF="/">Timus Online Judge</A></TD><TD WIDTH="130"></TD></TR></TABLE></TD></TR><TR><TD CLASS="panel"><TABLE WIDTH="100%" CELLSPACING="0" CELLPADDING="0"><TR><TD WIDTH="130" VALIGN="TOP" ALIGN="CENTER" STYLE="padding-bottom:5px;"><A HREF="/"><IMG BORDER="0" SRC="/images/usu-summer.jpg" HEIGHT="134" WIDTH="106" ALT=""></A></TD><TD VALIGN="TOP" ALIGN="LEFT"><TABLE WIDTH="100%" CELLSPACING="0" CELLPADDING="0" CLASS="panel"><TR><TH WIDTH="25%"><DIV>Online Judge</DIV></TH><TH WIDTH="25%"><DIV>Problems</DIV></TH><TH WIDTH="25%"><DIV>Authors</DIV></TH><TH WIDTH="25%"><DIV>Online contests</DIV></TH></TR><TR><TD VALIGN="TOP" ALIGN="LEFT"><A HREF="/">About Online Judge</A><BR><A HREF="/help.aspx?topic=faq">Frequently asked questions</A><BR><A HREF="/news.aspx">Site news</A><BR><A HREF="/forum/">Webboard</A><BR><A HREF="/help.aspx?topic=links">Links</A><BR></TD><TD VALIGN="TOP" ALIGN="LEFT"><A HREF="/problemset.aspx">Problem set</A><BR><A HREF="/submit.aspx">Submit solution</A><BR><A HREF="/status.aspx">Judge status</A><BR><A HREF="/help.aspx?topic=judge">Guide</A><BR></TD><TD VALIGN="TOP"><A HREF="/register.aspx">Register</A><BR><A HREF="/authedit.aspx">Update your info</A><BR><A HREF="/ranklist.aspx">Authors ranklist</A><BR><FORM ACTION="/search.aspx" METHOD="GET" STYLE="margin-top:0.6em;"><INPUT NAME="Str" SIZE="12" VALUE="" PLACEHOLDER="Author’s name"> <INPUT TYPE="SUBMIT" VALUE="Search"></FORM></TD><TD VALIGN="TOP"><A HREF="/contest.aspx">Current contest</A><BR><A HREF="/schedule.aspx">Scheduled contests</A><BR><A HREF="/archive.aspx">Past contests</A><BR><A HREF="/help.aspx?topic=contest">Rules</A><BR></TD></TR></TABLE></TD></TR></TABLE></TD></TR><TR><TD STYLE="padding-top: 32px; padding-bottom: 20px;"><H2 CLASS="title">Ural Championship 2011</H2><DIV STYLE="text-align:center; margin-bottom:1em;"><A HREF="/contest.aspx?id=87">About</A> &nbsp; &nbsp; <A HREF="/problemset.aspx?space=87" CLASS="selectedMenu">Problems</A> &nbsp; &nbsp; <A HREF="/submit.aspx?space=87">Submit solution</A> &nbsp; &nbsp; <A HREF="/status.aspx?space=87">Judge status</A> &nbsp; &nbsp; <A HREF="/monitor.aspx?id=87">Standings</A></DIV><DIV STYLE="margin-bottom:1em;"><DIV STYLE="text-align:center; font-weight:bold;">Contest is over</DIV></DIV><TABLE ALIGN="CENTER" CELLSPACING="0" CELLPADDING="0"><TR><TD WIDTH="800"><DIV CLASS="problem_content"><H2 class="problem_title">E. Tennis Racket</H2><DIV class="problem_limits">Time limit: 1.0 second<BR>Memory limit: 64 MB<BR></DIV><DIV ID="problem_text"><DIV CLASS="problem_par"><DIV CLASS="problem_par_normal">After the Battle of Stalingrad the divisions of the Soviet Army that participated in Operation Ring were re-equipped and sent to other sectors of the front by railway.
</DIV></DIV><DIV CLASS="problem_par"><DIV CLASS="problem_par_normal">When the first train with troops and tanks had been formed, it turned out that the railroaders hadn't thought of the order of the cars. It was decided to use a dead end near the Lazur chemical plant for sorting the cars. Because of its shape, and, perhaps, because of the dozens of German attacks repelled there in November 1942, the dead end was named by German dive-bombers the “Tennis Racket.”
</DIV></DIV><IMG SRC="/image/get.aspx/7990b046-32f2-4662-a801-fa0b87f0ff6b" BORDER="0" ALT="Problem illustration" ALIGN="RIGHT" CLASS="problem_raimage"><DIV CLASS="problem_par"><DIV CLASS="problem_par_normal">The train is sorted as follows. It is driven tailfirst to the fork and the rear car is uncoupled and brought into the loop. The remaining cars are also uncoupled one by one and brought into the loop along one of the two tracks. They are connected either to the head or to the tail of the newly formed train. When all the cars have been put into the loop, the train is driven out of it headfirst.
</DIV></DIV><DIV CLASS="problem_par"><DIV CLASS="problem_par_normal">The railroaders repeat this operation until the train is sorted. Help them do this task as quickly as possible.
</DIV></DIV><H3 CLASS="problem_subtitle">Input</H3><DIV CLASS="problem_par"><DIV CLASS="problem_par_normal">The first line contains the number of cars in the train <i>n</i> (2 ≤ <i>n</i> ≤ 10000). In the next line you are given a permutation of the integers from 1 to <i>n</i>, which describes the initial order of the cars from head to tail. The numbers are separated with a space. After the sorting the cars must be ordered according to their numbers starting from 1.
</DIV></DIV><H3 CLASS="problem_subtitle">Output</H3><DIV CLASS="problem_par"><DIV CLASS="problem_par_normal">In the first line output the minimal number of times <i>k</i> the train should be brought into the loop for sorting. In each of the following <i>k</i> lines output <i>n</i> integers describing the order of the cars in the train after the corresponding sorting. If there are several answers, output any of them.
</DIV></DIV><H3 CLASS="problem_subtitle">Sample</H3><TABLE CLASS="sample"><TR><TH WIDTH="350">input</TH><TH WIDTH="350">output</TH></TR><TR><TD><PRE>6
2 5 3 1 6 4
</PRE></TD><TD><PRE>3
5 1 6 4 3 2 
1 2 3 4 6 5 
1 2 3 4 5 6 
</PRE></TD></TR></TABLE><DIV CLASS="problem_source"><B>Problem Author: </B>Daniil Ayzenshteyn<BR><B>Problem Source: </B>Ural Championship 2011<BR></DIV></DIV></DIV><DIV CLASS="problem_links"><A HREF="print.aspx?space=87&amp;num=5" TARGET="_blank">Printable version</A><BR></DIV>To submit the solution for this problem go to the Problem set: <A HREF="problem.aspx?space=1&amp;num=1834"><nobr>1834. Tennis Racket</nobr></A></TD></TR></TABLE></TD></TR><TR><TD CLASS="footer"><script type="text/javascript"> (function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter20918869 = new Ya.Metrika({ id:20918869, clickmap:true, trackLinks:true, accurateTrackBounce:true }); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = "https://mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="https://mc.yandex.ru/watch/20918869" style="position:absolute; left:-9999px;" alt=""></div></noscript>© 2000–2017 <A HREF="/team.aspx">Timus Online Judge Team</A>. All rights reserved.</TD></TR></TABLE></BODY></HTML>