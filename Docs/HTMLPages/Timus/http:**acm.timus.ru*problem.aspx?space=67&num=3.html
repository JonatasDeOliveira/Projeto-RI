<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><HTML><HEAD><META http-equiv="Content-Type" content="text/html; charset=utf-8"><META NAME="viewport" CONTENT="width=768"><META HTTP-EQUIV="X-UA-Compatible" CONTENT="IE=edge"><TITLE>C. Cactuses @ Ural Championship 2008 @ Timus Online Judge</TITLE><LINK REL="alternate" HREFLANG="x-default" HREF="/problem.aspx?space=67&amp;num=3"><LINK REL="alternate" HREFLANG="en-us" HREF="/problem.aspx?space=67&amp;num=3&amp;locale=en"><LINK REL="alternate" HREFLANG="ru-ru" HREF="/problem.aspx?space=67&amp;num=3&amp;locale=ru"><LINK REL="stylesheet" TYPE="text/css" HREF="/style52.css"><LINK REL="shortcut icon" TYPE="image/x-icon" HREF="/favicon.ico"></HEAD><BODY><TABLE WIDTH="100%" CELLSPACING="0" CELLPADDING="0" CLASS="body"><TR><TD CLASS="caption"><TABLE WIDTH="100%" CELLSPACING="0" CELLPADDING="0"><TR><TD WIDTH="130" CLASS="locale"><A HREF="/problem.aspx?space=67&amp;num=3&amp;locale=en">ENG</A>&nbsp;&nbsp;<A HREF="/problem.aspx?space=67&amp;num=3&amp;locale=ru">RUS</A></TD><TD CLASS="title"><A HREF="/">Timus Online Judge</A></TD><TD WIDTH="130"></TD></TR></TABLE></TD></TR><TR><TD CLASS="panel"><TABLE WIDTH="100%" CELLSPACING="0" CELLPADDING="0"><TR><TD WIDTH="130" VALIGN="TOP" ALIGN="CENTER" STYLE="padding-bottom:5px;"><A HREF="/"><IMG BORDER="0" SRC="/images/usu-summer.jpg" HEIGHT="134" WIDTH="106" ALT=""></A></TD><TD VALIGN="TOP" ALIGN="LEFT"><TABLE WIDTH="100%" CELLSPACING="0" CELLPADDING="0" CLASS="panel"><TR><TH WIDTH="25%"><DIV>Online Judge</DIV></TH><TH WIDTH="25%"><DIV>Problems</DIV></TH><TH WIDTH="25%"><DIV>Authors</DIV></TH><TH WIDTH="25%"><DIV>Online contests</DIV></TH></TR><TR><TD VALIGN="TOP" ALIGN="LEFT"><A HREF="/">About Online Judge</A><BR><A HREF="/help.aspx?topic=faq">Frequently asked questions</A><BR><A HREF="/news.aspx">Site news</A><BR><A HREF="/forum/">Webboard</A><BR><A HREF="/help.aspx?topic=links">Links</A><BR></TD><TD VALIGN="TOP" ALIGN="LEFT"><A HREF="/problemset.aspx">Problem set</A><BR><A HREF="/submit.aspx">Submit solution</A><BR><A HREF="/status.aspx">Judge status</A><BR><A HREF="/help.aspx?topic=judge">Guide</A><BR></TD><TD VALIGN="TOP"><A HREF="/register.aspx">Register</A><BR><A HREF="/authedit.aspx">Update your info</A><BR><A HREF="/ranklist.aspx">Authors ranklist</A><BR><FORM ACTION="/search.aspx" METHOD="GET" STYLE="margin-top:0.6em;"><INPUT NAME="Str" SIZE="12" VALUE="" PLACEHOLDER="Author’s name"> <INPUT TYPE="SUBMIT" VALUE="Search"></FORM></TD><TD VALIGN="TOP"><A HREF="/contest.aspx">Current contest</A><BR><A HREF="/schedule.aspx">Scheduled contests</A><BR><A HREF="/archive.aspx">Past contests</A><BR><A HREF="/help.aspx?topic=contest">Rules</A><BR></TD></TR></TABLE></TD></TR></TABLE></TD></TR><TR><TD STYLE="padding-top: 32px; padding-bottom: 20px;"><H2 CLASS="title">Ural Championship 2008</H2><DIV STYLE="text-align:center; margin-bottom:1em;"><A HREF="/contest.aspx?id=67">About</A> &nbsp; &nbsp; <A HREF="/problemset.aspx?space=67" CLASS="selectedMenu">Problems</A> &nbsp; &nbsp; <A HREF="/submit.aspx?space=67">Submit solution</A> &nbsp; &nbsp; <A HREF="/status.aspx?space=67">Judge status</A> &nbsp; &nbsp; <A HREF="/monitor.aspx?id=67">Standings</A></DIV><DIV STYLE="margin-bottom:1em;"><DIV STYLE="text-align:center; font-weight:bold;">Contest is over</DIV></DIV><TABLE ALIGN="CENTER" CELLSPACING="0" CELLPADDING="0"><TR><TD WIDTH="800"><DIV CLASS="problem_content"><H2 class="problem_title">C. Cactuses</H2><DIV class="problem_limits">Time limit: 1.0 second<BR>Memory limit: 64 MB<BR></DIV><DIV ID="problem_text"><DIV CLASS="problem_par"><DIV CLASS="problem_par_normal">There is no doubt that Yekaterinburg trams are the best in the world.
Nevertheless, it is Saint-Petersburg that has the largest tram network in
Russia. Not long ago, the Saint-Petersburg tram network was included into the
Guinness Book of Records as the largest in the world.</DIV></DIV><DIV CLASS="problem_par"><DIV CLASS="problem_par_normal">Two fans of the tram forum from Yekaterinburg decided to make a trip to
Saint-Petersburg to visit the centenary celebration of the tram launch in that
city. From their Saint-Petersburg friends they learned that in the previous 15
years the amount of tram service had been constantly decreasing. In many
avenues, tram lines were dismantled. Tram service in the city center was
minimized, and the city tram network was divided into three fragments, so that
it was no longer possible to get by tram from any part of Saint-Petersburg to
any other part.</DIV></DIV><IMG SRC="/image/get.aspx/74c43d7e-65bb-47de-b1b8-4f565674811f" BORDER="0" ALT="Problem illustration" ALIGN="RIGHT" CLASS="problem_raimage"><DIV CLASS="problem_par"><DIV CLASS="problem_par_normal">Another thing the travelers learned was that cactuses were in fashion in
Saint-Petersburg. Upon their return to Yekaterinburg, they decided to plant a
cactus at their office. A cactus is a connected undirected graph such that each
of its edges belongs to at most one simple cycle. One vertex of a cactus
touches the ground and is called its root.</DIV></DIV><DIV CLASS="problem_par"><DIV CLASS="problem_par_normal">However, it soon turned out that cactuses became too popular, and all fans
of the tram forum already had them. Then the friends decided to get rid of
their cactus by a very unusual method: they by turns choose some edge of the
cactus and chop it up. This edge is removed, and if the cactus breaks into two
parts, then the part that is not connected to the root anymore is thrown out.</DIV></DIV><DIV CLASS="problem_par"><DIV CLASS="problem_par_normal">The friends have bet a monthly tram ticket on who will chop the last edge
growing from the root. Determine who will win if they both play optimally.</DIV></DIV><H3 CLASS="problem_subtitle">Input</H3><DIV CLASS="problem_par"><DIV CLASS="problem_par_normal">Along with the vogue of cactuses, the friends follow
the Saint-Petersburg vogue to describe the set of edges of a cactus by a family
of paths such that in each path all edges are different. The first line
contains the amount <i>n</i> of vertices of the cactus, the amount <i>m</i> of
paths, and the number <i>r</i> of the root vertex; 1 &le; <i>r</i> &le;
<i>n</i> &le; 50000</nobr>.</DIV></DIV><DIV CLASS="problem_par"><DIV CLASS="problem_par_normal">lines describes a path in the form of a
sequence of its vertices. Each description starts with the length of the
sequence <i>n<sub>i</sub></i> (2 &le; <i>n<sub>i</sub></i> &le; 100000). Then
there are <i>n<sub>i</sub></i> integers, which are the numbers of vertices of
the path, in the order in which they are on the path. Adjacent vertices of any
path are different. There can be at most one edge between any two vertices of
the cactus. Each edge of the cactus is given in the input only once.</DIV></DIV><H3 CLASS="problem_subtitle">Output</H3><DIV CLASS="problem_par"><DIV CLASS="problem_par_normal">Output &ldquo;First&rdquo; if the person who makes
the first move wins a monthly ticket assuming that both play optimally.
Otherwise, output &ldquo;Second&rdquo;.
</DIV></DIV><H3 CLASS="problem_subtitle">Samples</H3><TABLE CLASS="sample"><TR><TH WIDTH="350">input</TH><TH WIDTH="350">output</TH></TR><TR><TD><PRE>17 2 1
15 3 4 5 6 7 8 3 2 9 10 11 12 13 14 9
6 2 1 15 16 17 15
</PRE></TD><TD><PRE>First
</PRE></TD></TR><TR><TD><PRE>16 2 1
15 3 4 5 6 7 8 3 2 9 10 11 12 13 14 9
5 2 1 15 16 1
</PRE></TD><TD><PRE>Second
</PRE></TD></TR></TABLE><DIV CLASS="problem_source"><B>Problem Author: </B>Alexander Ipatov, Vladimir Yakovlev<BR><B>Problem Source: </B>The 12th Urals Collegiate Programing Championship, March 29, 2008<BR></DIV></DIV></DIV><DIV CLASS="problem_links"><A HREF="print.aspx?space=67&amp;num=3" TARGET="_blank">Printable version</A><BR></DIV>To submit the solution for this problem go to the Problem set: <A HREF="problem.aspx?space=1&amp;num=1610"><nobr>1610. Cactuses</nobr></A></TD></TR></TABLE></TD></TR><TR><TD CLASS="footer"><script type="text/javascript"> (function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter20918869 = new Ya.Metrika({ id:20918869, clickmap:true, trackLinks:true, accurateTrackBounce:true }); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = "https://mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="https://mc.yandex.ru/watch/20918869" style="position:absolute; left:-9999px;" alt=""></div></noscript>© 2000–2017 <A HREF="/team.aspx">Timus Online Judge Team</A>. All rights reserved.</TD></TR></TABLE></BODY></HTML>