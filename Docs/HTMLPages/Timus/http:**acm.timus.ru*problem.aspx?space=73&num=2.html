<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><HTML><HEAD><META http-equiv="Content-Type" content="text/html; charset=utf-8"><META NAME="viewport" CONTENT="width=768"><META HTTP-EQUIV="X-UA-Compatible" CONTENT="IE=edge"><TITLE>B. Ostap and Partners @ Ural Championship 2009 @ Timus Online Judge</TITLE><LINK REL="alternate" HREFLANG="x-default" HREF="/problem.aspx?space=73&amp;num=2"><LINK REL="alternate" HREFLANG="en-us" HREF="/problem.aspx?space=73&amp;num=2&amp;locale=en"><LINK REL="alternate" HREFLANG="ru-ru" HREF="/problem.aspx?space=73&amp;num=2&amp;locale=ru"><LINK REL="stylesheet" TYPE="text/css" HREF="/style52.css"><LINK REL="shortcut icon" TYPE="image/x-icon" HREF="/favicon.ico"></HEAD><BODY><TABLE WIDTH="100%" CELLSPACING="0" CELLPADDING="0" CLASS="body"><TR><TD CLASS="caption"><TABLE WIDTH="100%" CELLSPACING="0" CELLPADDING="0"><TR><TD WIDTH="130" CLASS="locale"><A HREF="/problem.aspx?space=73&amp;num=2&amp;locale=en">ENG</A>&nbsp;&nbsp;<A HREF="/problem.aspx?space=73&amp;num=2&amp;locale=ru">RUS</A></TD><TD CLASS="title"><A HREF="/">Timus Online Judge</A></TD><TD WIDTH="130"></TD></TR></TABLE></TD></TR><TR><TD CLASS="panel"><TABLE WIDTH="100%" CELLSPACING="0" CELLPADDING="0"><TR><TD WIDTH="130" VALIGN="TOP" ALIGN="CENTER" STYLE="padding-bottom:5px;"><A HREF="/"><IMG BORDER="0" SRC="/images/usu-summer.jpg" HEIGHT="134" WIDTH="106" ALT=""></A></TD><TD VALIGN="TOP" ALIGN="LEFT"><TABLE WIDTH="100%" CELLSPACING="0" CELLPADDING="0" CLASS="panel"><TR><TH WIDTH="25%"><DIV>Online Judge</DIV></TH><TH WIDTH="25%"><DIV>Problems</DIV></TH><TH WIDTH="25%"><DIV>Authors</DIV></TH><TH WIDTH="25%"><DIV>Online contests</DIV></TH></TR><TR><TD VALIGN="TOP" ALIGN="LEFT"><A HREF="/">About Online Judge</A><BR><A HREF="/help.aspx?topic=faq">Frequently asked questions</A><BR><A HREF="/news.aspx">Site news</A><BR><A HREF="/forum/">Webboard</A><BR><A HREF="/help.aspx?topic=links">Links</A><BR></TD><TD VALIGN="TOP" ALIGN="LEFT"><A HREF="/problemset.aspx">Problem set</A><BR><A HREF="/submit.aspx">Submit solution</A><BR><A HREF="/status.aspx">Judge status</A><BR><A HREF="/help.aspx?topic=judge">Guide</A><BR></TD><TD VALIGN="TOP"><A HREF="/register.aspx">Register</A><BR><A HREF="/authedit.aspx">Update your info</A><BR><A HREF="/ranklist.aspx">Authors ranklist</A><BR><FORM ACTION="/search.aspx" METHOD="GET" STYLE="margin-top:0.6em;"><INPUT NAME="Str" SIZE="12" VALUE="" PLACEHOLDER="Author’s name"> <INPUT TYPE="SUBMIT" VALUE="Search"></FORM></TD><TD VALIGN="TOP"><A HREF="/contest.aspx">Current contest</A><BR><A HREF="/schedule.aspx">Scheduled contests</A><BR><A HREF="/archive.aspx">Past contests</A><BR><A HREF="/help.aspx?topic=contest">Rules</A><BR></TD></TR></TABLE></TD></TR></TABLE></TD></TR><TR><TD STYLE="padding-top: 32px; padding-bottom: 20px;"><H2 CLASS="title">Ural Championship 2009</H2><DIV STYLE="text-align:center; margin-bottom:1em;"><A HREF="/contest.aspx?id=73">About</A> &nbsp; &nbsp; <A HREF="/problemset.aspx?space=73" CLASS="selectedMenu">Problems</A> &nbsp; &nbsp; <A HREF="/submit.aspx?space=73">Submit solution</A> &nbsp; &nbsp; <A HREF="/status.aspx?space=73">Judge status</A> &nbsp; &nbsp; <A HREF="/monitor.aspx?id=73">Standings</A></DIV><DIV STYLE="margin-bottom:1em;"><DIV STYLE="text-align:center; font-weight:bold;">Contest is over</DIV></DIV><TABLE ALIGN="CENTER" CELLSPACING="0" CELLPADDING="0"><TR><TD WIDTH="800"><DIV CLASS="problem_content"><H2 class="problem_title">B. Ostap and Partners</H2><DIV class="problem_limits">Time limit: 2.0 second<BR>Memory limit: 64 MB<BR></DIV><DIV ID="problem_text"><DIV CLASS="problem_par"><DIV CLASS="problem_par_normal">Workman Ivan lost his job. Not because of truancy or being late, and not because the
plant where he had been working was left without orders. The reason for
dismissal was the stale aspic he had presented to his boss for his birthday.
</DIV></DIV><DIV CLASS="problem_par"><DIV CLASS="problem_par_normal">After one more day of fruitless job search he dropped in a supermarket near his
home. He had a little money left, so he visited the liquor department. Waiting
in the line to the cashier's desk, he recognized the man buying a bottle of
expensive brandy. That was his old acquaintance Vassily. After loud greetings
and an argument about the best variety of brandy, they went out into the street at last.
</DIV></DIV><DIV CLASS="problem_par"><DIV CLASS="problem_par_normal">&ldquo;Well, how are you, my friend?&rdquo; Vassily asked.
<br>
&ldquo;Looking for a job,&rdquo; Ivan answered wearily.
<br>
&ldquo;You know, I was also looking for a job not so long ago, and I found an
excellent one!&rdquo; Vassily was excited. &ldquo;It's nearby and they
promised to pay well! And you can join us too!&rdquo;
<br>
&ldquo;What's that job like?&rdquo; no wonder, jobless Ivan became interested.
<br>
&ldquo;Have you heard about the company <i>Ostap and Partners</i>? They've
been producing horns and hoofs for a number of years already. And now I'm a
hoof picker of the third class with them!&rdquo; answered Vassily proudly.
<br>
&ldquo;How much do they pay you?&rdquo; Ivan wanted to know.
<br>
&ldquo;They don't pay me yet,&rdquo; answered his friend with disappointment.
&ldquo;It's the first month I work there and I'm a probationer. And the guys in the brigade
don't tell me their wages, it's the company's policy.&rdquo; He paused and lowered his voice to a whisper.
&ldquo;But I know that our foreman drives a Mercedes!&rdquo;
<br>
&ldquo;Ah, I would like to know how much money they get,&rdquo; Ivan said dreamily
imagining himself driving a Merc.
<br>
&ldquo;I can learn it after all!&rdquo; Vassily had a sudden inspiration. 
&ldquo;The guys like to brag at smoking breaks that their wages are greater than
someone else's. For example, Stepan said recently that he was getting 1200
rubles more than Fyodor. And Fyodor once complained that he was getting
5500 rubles less than the foreman.&rdquo;
<br>
&ldquo;Collect then as many such comparisons as you can, and we will know all
the wages!&rdquo; Ivan rejoiced.
<br>
&ldquo;OK, I'll do that!&rdquo;
</DIV></DIV><DIV CLASS="problem_par"><DIV CLASS="problem_par_normal">In a week, Vassily brought a notebook with a number of records about the
comparisons of the workmen's wages. So they started calculations&hellip;
</DIV></DIV><H3 CLASS="problem_subtitle">Input</H3><DIV CLASS="problem_par"><DIV CLASS="problem_par_normal">The first line contains the number <i>n</i> of the workmen in the brigade and
the number <i>m</i> of records in the notebook (1 &le; <i>n</i>, <i>m</i> &le; 50000).
Each of the following <i>m</i> lines contains three integers: <i>i</i>, <i>j</i>, and <i>d</i>,
which mean that the wage of the <i>i</i>-th workman is greater than the wage of the
<i>j</i>-th workman by <i>d</i> rubles
(0 &le; <i>i</i>, <i>j</i> &le; <i>n</i>&minus;1; |<i>d</i>| &le; 20000).
The workmen are enumerated from 0 to <i>n</i>&minus;1 starting from Vassily,
whose wage is zero. It is known that no workman gets more than 10<sup>9</sup> rubles.
</DIV></DIV><H3 CLASS="problem_subtitle">Output</H3><DIV CLASS="problem_par"><DIV CLASS="problem_par_normal">If it is possible to find amounts of wages that lie in the given range and
satisfy all the comparisons from the notebook, output
&ldquo;Possible&rdquo; in the first line and then output <i>n</i> integers 
each in the separate line which are 
the possible amounts in the ascending order of the workmen's numbers.
If several answers are possible, output any one of them.
</DIV></DIV><DIV CLASS="problem_par"><DIV CLASS="problem_par_normal">If there is no answer, output the only line with the words
&ldquo;Impossible after <i>i</i> statements&rdquo;, where the number <i>i</i>
is the number of the first record in the notebook such that considering only the
preceding records it is possible to find an answer and with the addition of
this record it becomes impossible. The records are enumerated starting from the
number one in the order in which they are given.
</DIV></DIV><H3 CLASS="problem_subtitle">Samples</H3><TABLE CLASS="sample"><TR><TH WIDTH="350">input</TH><TH WIDTH="350">output</TH></TR><TR><TD><PRE>5 6
3 4 1200
4 1 -5500
2 3 4300
3 0 8200
0 4 -7000
2 1 0
</PRE></TD><TD><PRE>Possible
0
12500
12500
8200
7000
</PRE></TD></TR><TR><TD><PRE>3 5
1 2 5
0 2 0
1 0 -5
1 2 5
2 2 0
</PRE></TD><TD><PRE>Impossible after 3 statements
</PRE></TD></TR><TR><TD><PRE>3 2
1 0 871
1 2 903
</PRE></TD><TD><PRE>Impossible after 2 statements
</PRE></TD></TR></TABLE><DIV CLASS="problem_source"><B>Problem Author: </B>Dmitry Ivankov<BR><B>Problem Source: </B>The 13th Urals Collegiate Programing Championship, April 04, 2009<BR></DIV></DIV></DIV><DIV CLASS="problem_links"><A HREF="print.aspx?space=73&amp;num=2" TARGET="_blank">Printable version</A><BR></DIV>To submit the solution for this problem go to the Problem set: <A HREF="problem.aspx?space=1&amp;num=1701"><nobr>1701. Ostap and Partners</nobr></A></TD></TR></TABLE></TD></TR><TR><TD CLASS="footer"><script type="text/javascript"> (function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter20918869 = new Ya.Metrika({ id:20918869, clickmap:true, trackLinks:true, accurateTrackBounce:true }); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = "https://mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="https://mc.yandex.ru/watch/20918869" style="position:absolute; left:-9999px;" alt=""></div></noscript>© 2000–2017 <A HREF="/team.aspx">Timus Online Judge Team</A>. All rights reserved.</TD></TR></TABLE></BODY></HTML>