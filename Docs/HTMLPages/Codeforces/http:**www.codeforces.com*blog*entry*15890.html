<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html><head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="X-Csrf-Token" content="cb69324bfcd030bad5d4bcf28f3df782">
    <meta id="viewport" name="viewport" content="width=device-width, initial-scale=0.01">
    <script type="text/javascript" async="" src="http://www.google-analytics.com/ga.js"></script><script id="facebook-jssdk" src="//connect.facebook.net/en_US/sdk.js"></script><script type="text/javascript" src="http://st.codeforces.com/s/21816/js/jquery-1.8.3.js"></script>
    <script type="application/javascript">
        window.standaloneContest = false;
        function adjustViewport() {
            var screenWidthPx = Math.min($(window).width(), window.screen.width);
            var siteWidthPx = 1100; // min width of site
            var ratio = Math.min(screenWidthPx / siteWidthPx, 1.0);
            var viewport = "width=device-width, initial-scale=" + ratio;
            $('#viewport').attr('content', viewport);
            var style = $('<style>html * { max-height: 1000000px; }</style>');
            $('html > head').append(style);
        }

        if ( /Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent) ) {
            adjustViewport();
        }
    </script>
    <meta http-equiv="pragma" content="no-cache">
    <meta http-equiv="expires" content="-1">
    <meta http-equiv="profileName" content="d3">
    <meta name="google-site-verification" content="OTd2dN5x4nS4OPknPI9JFg36fKxjqY0i1PSfFPv_J90">
    <meta property="fb:admins" content="100001352546622">
    <meta property="og:image" content="http://st.codeforces.com/s/21816/images/codeforces-telegram-square.png">
    <link rel="image_src" href="http://st.codeforces.com/s/21816/images/codeforces-telegram-square.png">
    <meta property="og:title" content="Algorithm Gym :: Everything About Segment Trees - Codeforces">
    <meta property="og:description" content="">
    
    <meta property="og:site_name" content="Codeforces">
    
    
    
    
    
    <meta name="utc_offset" content="+03:00">
    <meta name="verify-reformal" content="f56f99fd7e087fb6ccb48ef2">
    <title>Algorithm Gym :: Everything About Segment Trees - Codeforces</title>
        <meta name="description" content="Codeforces. Programming competitions and contests, programming community">
        <meta name="keywords" content="programming algorithm contest competition informatics olympiads c++ java graphs vkcup">
    <meta name="robots" content="index, follow">

    <link rel="stylesheet" href="http://st.codeforces.com/s/21816/css/font-awesome.min.css" type="text/css" charset="utf-8">

        <link href="//fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700&amp;subset=latin,cyrillic" rel="stylesheet" type="text/css">
        <link href="//fonts.googleapis.com/css?family=Cuprum&amp;subset=latin,cyrillic" rel="stylesheet" type="text/css">


    <link rel="shortcut icon" type="image/png" href="http://st.codeforces.com/s/21816/favicon.png">

    <!--CombineResourcesFilter-->
    <link rel="stylesheet" href="http://st.codeforces.com/s/21816/css/prettify.css" type="text/css" charset="utf-8">
    <link rel="stylesheet" href="http://st.codeforces.com/s/21816/css/clear.css" type="text/css" charset="utf-8">
    <link rel="stylesheet" href="http://st.codeforces.com/s/21816/css/style.css" type="text/css" charset="utf-8">
    <link rel="stylesheet" href="http://st.codeforces.com/s/21816/css/ttypography.css" type="text/css" charset="utf-8">
    <link rel="stylesheet" href="http://st.codeforces.com/s/21816/css/problem-statement.css" type="text/css" charset="utf-8">
    <link rel="stylesheet" href="http://st.codeforces.com/s/21816/css/second-level-menu.css" type="text/css" charset="utf-8">
    <link rel="stylesheet" href="http://st.codeforces.com/s/21816/css/roundbox.css" type="text/css" charset="utf-8">
    <link rel="stylesheet" href="http://st.codeforces.com/s/21816/css/datatable.css" type="text/css" charset="utf-8">
    <link rel="stylesheet" href="http://st.codeforces.com/s/21816/css/table-form.css" type="text/css" charset="utf-8">
    <link rel="stylesheet" href="http://st.codeforces.com/s/21816/css/topic.css" type="text/css" charset="utf-8">
    <link rel="stylesheet" href="http://st.codeforces.com/s/21816/css/jquery.jgrowl.css" type="text/css" charset="utf-8">
    <link rel="stylesheet" href="http://st.codeforces.com/s/21816/css/facebox.css" type="text/css" charset="utf-8">
    <link rel="stylesheet" href="http://st.codeforces.com/s/21816/css/jquery.wysiwyg.css" type="text/css" charset="utf-8">
    <link rel="stylesheet" href="http://st.codeforces.com/s/21816/css/jquery.autocomplete.css" type="text/css" charset="utf-8">
    <link rel="stylesheet" href="http://st.codeforces.com/s/21816/css/codeforces.datepick.css" type="text/css" charset="utf-8">
    <link rel="stylesheet" href="http://st.codeforces.com/s/21816/css/colorbox.css" type="text/css" charset="utf-8">
    <link rel="stylesheet" href="http://st.codeforces.com/s/21816/css/jquery.drafts.css" type="text/css" charset="utf-8">
        <link rel="stylesheet" href="http://st.codeforces.com/s/21816/css/community.css" type="text/css" charset="utf-8">

    <!-- MathJax -->
    <script type="text/x-mathjax-config;executed=true">
    MathJax.Hub.Config({
      tex2jax: {inlineMath: [['$$$','$$$']], displayMath: [['$$$$$$','$$$$$$']]}
    });
    </script>
    <script type="text/javascript" async="" src="http://mathjax.codeforces.com/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
    <!-- /MathJax -->

    <script type="text/javascript" src="http://st.codeforces.com/s/21816/js/prettify/prettify.js"></script>
    <script type="text/javascript" src="http://st.codeforces.com/s/21816/js/moment.js"></script><style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 5px 0px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 5px; -webkit-border-radius: 5px; -moz-border-radius: 5px; -khtml-border-radius: 5px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 1px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: .7em}
.MathJax_MenuRadioCheck.RTL {right: .7em; left: auto}
.MathJax_MenuLabel {padding: 1px 2em 3px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #DDDDDD; margin: 4px 3px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: #606872; color: white}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">.MathJax_Preview .MJXf-math {color: inherit!important}
</style><style type="text/css">.MJX_Assistive_MathML {position: absolute!important; top: 0; left: 0; clip: rect(1px, 1px, 1px, 1px); padding: 1px 0 0 0!important; border: 0!important; height: 1px!important; width: 1px!important; overflow: hidden!important; display: block!important; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none}
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block {width: 100%!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1px; bottom: 2px; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style>
    <script type="text/javascript" src="http://st.codeforces.com/s/21816/js/pushstream.js"></script>
    <script type="text/javascript" src="http://st.codeforces.com/s/21816/js/jquery.easing.min.js"></script>
    <script type="text/javascript" src="http://st.codeforces.com/s/21816/js/jquery.lavalamp.min.js"></script>
    <script type="text/javascript" src="http://st.codeforces.com/s/21816/js/jquery.jgrowl.js"></script>
    <script type="text/javascript" src="http://st.codeforces.com/s/21816/js/jquery.swipe.js"></script>
    <script type="text/javascript" src="http://st.codeforces.com/s/21816/js/facebox.js"></script>
    <script type="text/javascript" src="http://st.codeforces.com/s/21816/js/jquery.wysiwyg.js"></script>
    <script type="text/javascript" src="http://st.codeforces.com/s/21816/js/controls/wysiwyg.colorpicker.js"></script>
    <script type="text/javascript" src="http://st.codeforces.com/s/21816/js/controls/wysiwyg.table.js"></script>
    <script type="text/javascript" src="http://st.codeforces.com/s/21816/js/controls/wysiwyg.image.js"></script>
    <script type="text/javascript" src="http://st.codeforces.com/s/21816/js/controls/wysiwyg.link.js"></script>
    <script type="text/javascript" src="http://st.codeforces.com/s/21816/js/jquery.autocomplete.js"></script>
    <script type="text/javascript" src="http://st.codeforces.com/s/21816/js/jquery.datepick.js"></script>
    <script type="text/javascript" src="http://st.codeforces.com/s/21816/js/jquery.ie6blocker.js"></script>
    <script type="text/javascript" src="http://st.codeforces.com/s/21816/js/jquery.colorbox-min.js"></script>
    <script type="text/javascript" src="http://st.codeforces.com/s/21816/js/jquery.ba-bbq.js"></script>
    <script type="text/javascript" src="http://st.codeforces.com/s/21816/js/jquery.drafts.js"></script>
    <script type="text/javascript" src="http://st.codeforces.com/s/21816/js/sjcl.js"></script>
    <script type="text/javascript" src="/scripts/2e435d551600f66b422ebe84c297d7f8/en/codeforces-options.js"></script>
    <script type="text/javascript" src="http://st.codeforces.com/s/21816/js/codeforces.js?v=20160131"></script>
    <!--/CombineResourcesFilter-->

    <link rel="stylesheet" href="http://st.codeforces.com/s/21816/markitup/skins/markitup/style.css" type="text/css" charset="utf-8">
    <link rel="stylesheet" href="http://st.codeforces.com/s/21816/markitup/sets/markdown/style.css" type="text/css" charset="utf-8">

    <script type="text/javascript" src="//yandex.st/share/share.js" charset="utf-8"></script>

    <script type="text/javascript" src="http://st.codeforces.com/s/21816/markitup/jquery.markitup.js"></script>
    <script type="text/javascript" src="http://st.codeforces.com/s/21816/markitup/sets/markdown/set.js"></script>

    <!--[if IE]>
    <style>
        #sidebar {
            padding-left: 1em;
            margin: 1em 1em 1em 0;
        }
    </style>
    <![endif]-->


<style type="text/css" media="screen">#swfcontainer {visibility:hidden}</style><style type="text/css" id="ya_share_style">.b-share-popup-wrap{z-index:1073741823;position:absolute;width:500px}.b-share-popup{position:absolute;z-index:1073741823;border:1px solid #888;background:#FFF;color:#000}.b-share-popup-wrap .b-share-popup_down{top:0}.b-share-popup-wrap .b-share-popup_up{bottom:0}.b-share-popup-wrap_state_hidden{position:absolute!important;top:-9999px!important;right:auto!important;bottom:auto!important;left:-9999px!important;visibility:hidden!important}.b-share-popup,x:nth-child(1){border:0;padding:1px!important}@media all and (resolution=0){.b-share-popup,x:nth-child(1),x:-o-prefocus{padding:0!important;border:1px solid #888}}.b-share-popup__i{display:-moz-inline-box;display:inline-block;padding:5px 0!important;overflow:hidden;vertical-align:top;white-space:nowrap;visibility:visible;background:#FFF;-webkit-box-shadow:0 2px 9px rgba(0,0,0,.6);-moz-box-shadow:0 2px 9px rgba(0,0,0,.6);box-shadow:0 2px 9px rgba(0,0,0,.6)}.b-share-popup__item{font:1em/1.25em Arial,sans-serif;display:block;padding:5px 15px!important;white-space:nowrap;background:#FFF}.b-share-popup__item,a.b-share-popup__item:link,a.b-share-popup__item:visited{text-decoration:none!important;border:0!important}a.b-share-popup__item{cursor:pointer}a.b-share-popup__item .b-share-popup__item__text{display:inline;text-decoration:underline;color:#1A3DC1}a.b-share-popup__item:hover{word-spacing:0}a.b-share-popup__item:hover .b-share-popup__item__text{color:red;cursor:pointer}.b-share-popup__icon{display:-moz-inline-box;display:inline-block;margin:-3px 0 0;padding:0 5px 0 0!important;vertical-align:middle}.b-share-popup__icon_input{width:21px;height:16px;margin-top:-6px;padding:0!important}.b-share-popup__icon__input{margin-right:0;margin-left:2px;vertical-align:top}.b-share-popup__spacer{display:block;padding-top:10px!important}.b-share-popup__header{font:86%/1em Verdana,sans-serif;display:block;padding:10px 15px 5px!important;color:#999}.b-share-popup__header_first{padding-top:5px!important}.b-share-popup__input{font:86%/1em Verdana,sans-serif;display:block;padding:5px 15px!important;color:#999;text-align:left}.b-share-popup__input__input{font:1em/1em Verdana,sans-serif;display:block;width:10px;margin:5px 0 0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;resize:none;text-align:left;direction:ltr}.b-share-popup_down .b-share-popup_with-link .b-share-popup__input_link{position:absolute;top:5px;right:0;left:0}.b-share-popup_up .b-share-popup_with-link .b-share-popup__input_link{position:absolute;right:0;bottom:5px;left:0}.b-share-popup_down .b-share-popup_with-link{padding-top:55px!important}.b-share-popup_up .b-share-popup_with-link{padding-bottom:55px!important}.b-share-popup_down .b-share-popup_expandable .b-share-popup__main{padding-bottom:25px!important}.b-share-popup_up .b-share-popup_expandable .b-share-popup__main{padding-top:25px!important}.b-share-popup_down .b-share-popup_yandexed{padding-bottom:10px!important}.b-share-popup_up .b-share-popup_yandexed{padding-top:10px!important}.b-share-popup__yandex{position:absolute;right:4px;bottom:2px;font:78.125%/1em Verdana,sans-serif;padding:3px!important;background:0 0}a.b-share-popup__yandex:link,a.b-share-popup__yandex:visited{color:#C6C5C5;text-decoration:none}a.b-share-popup__yandex:link:hover,a.b-share-popup__yandex:visited:hover{color:red;text-decoration:underline}.b-share-popup_up .b-share-popup__yandex{top:2px;bottom:auto}.b-share-popup_expandable .b-share-popup__yandex{right:auto;left:4px}.b-share-popup_to-right .b-share-popup_expandable .b-share-popup__yandex{right:4px;left:auto}.b-share-popup__expander .b-share-popup__item{position:absolute;bottom:5px;font:86%/1em Verdana,sans-serif;margin:10px 0 0;padding:5px 10px!important;cursor:pointer;color:#999;background:0 0}.b-share-popup_to-right,.b-share-popup_to-right .b-share-popup__expander{direction:rtl}.b-share-popup_to-right .b-share-popup__expander .b-share-popup__icon{padding:0 0 0 5px!important}.b-share-popup_up .b-share-popup__expander .b-share-popup__item{top:-5px;bottom:auto}.b-share-popup__expander .b-share-popup__item:hover .b-share-popup__item__text{text-decoration:underline}.b-share-popup__expander .b-ico_action_rarr,.b-share-popup_to-right .b-share-popup__expander .b-ico_action_larr,.b-share-popup_full .b-share-popup__expander .b-ico_action_larr,.b-share-popup_to-right .b-share-popup_full .b-share-popup__expander .b-ico_action_rarr,.b-share-popup__expander .b-share-popup__item__text_collapse,.b-share-popup_full .b-share-popup__item__text_expand{display:none}.b-share-popup_to-right .b-share-popup__expander .b-ico_action_rarr,.b-share-popup_full .b-share-popup__item__text_collapse,.b-share-popup_full .b-share-popup__expander .b-ico_action_rarr,.b-share-popup_to-right .b-share-popup_full .b-share-popup__expander .b-ico_action_larr{display:inline}.b-ico_action_rarr,.b-ico_action_larr{width:8px;height:7px;border:0}.b-share-popup__main,.b-share-popup__extra{direction:ltr;vertical-align:bottom;text-align:left}.b-share-popup_down .b-share-popup__main,.b-share-popup_down .b-share-popup__extra{vertical-align:top}.b-share-popup__main{display:-moz-inline-stack;display:inline-block}.b-share-popup__extra{display:none;margin:0 -10px 0 0}.b-share-popup_full .b-share-popup__extra{display:-moz-inline-stack;display:inline-block}.b-share-popup_to-right .b-share-popup__extra{margin:0 0 0 -10px}.b-share-popup__tail{position:absolute;width:21px;height:10px;margin:0 0 0 -11px}.b-share-popup_down .b-share-popup__tail{top:-10px;background:url("//yastatic.net/share/static/b-share-popup_down__tail.gif") 0 0 no-repeat}.b-share-popup_up .b-share-popup__tail{bottom:-10px;background:url("//yastatic.net/share/static/b-share-popup_up__tail.gif") 0 0 no-repeat}.b-share-popup_down .b-share-popup__tail,x:nth-child(1){top:-9px;background-image:url("//yastatic.net/share/static/b-share-popup_down__tail.png")}.b-share-popup_up .b-share-popup__tail,x:nth-child(1){bottom:-9px;background-image:url("//yastatic.net/share/static/b-share-popup_up__tail.png")}@media all and (resolution=0){.b-share-popup_down .b-share-popup__tail,x:nth-child(1),x:-o-prefocus{top:-10px;background-image:url("//yastatic.net/share/static/b-share-popup_down__tail.gif")}.b-share-popup_up .b-share-popup__tail,x:nth-child(1),x:-o-prefocus{bottom:-10px;background-image:url("//yastatic.net/share/static/b-share-popup_up__tail.gif")}}.b-share-popup .b-share-popup_show_form_mail,.b-share-popup .b-share-popup_show_form_html{padding:0!important}.b-share-popup .b-share-popup_show_form_mail .b-share-popup__main,.b-share-popup .b-share-popup_show_form_html .b-share-popup__main,.b-share-popup .b-share-popup_show_form .b-share-popup__main,.b-share-popup .b-share-popup_show_form_mail .b-share-popup__extra,.b-share-popup .b-share-popup_show_form_html .b-share-popup__extra,.b-share-popup .b-share-popup_show_form .b-share-popup__extra{height:15px;padding:0!important;overflow:hidden;visibility:hidden}.b-share-popup_show_form_mail .b-share-popup__expander,.b-share-popup_show_form_html .b-share-popup__expander,.b-share-popup_show_form .b-share-popup__expander,.b-share-popup_show_form_mail .b-share-popup__input_link,.b-share-popup_show_form_html .b-share-popup__input_link,.b-share-popup_show_form .b-share-popup__input_link{display:none}.b-share-popup__form{position:relative;display:none;overflow:hidden;padding:5px 0 0!important;margin:0 0 -15px;white-space:normal}.b-share-popup_show_form_mail .b-share-popup__form_mail,.b-share-popup_show_form_html .b-share-popup__form_html,.b-share-popup_show_form .b-share-popup__form{display:block}.b-share-popup__form__link{padding:5px!important;margin:0 0 5px 10px;text-decoration:underline;cursor:pointer;color:#1A3DC1}.b-share-popup__form__link,.b-share-popup__form__button{font:86%/1.4545em Verdana,sans-serif;float:left;display:inline}.b-share-popup__form__button{margin:5px 0 0 15px}.b-share-popup__form__close{font:86%/1.4545em Verdana,sans-serif;float:right;display:inline;padding:5px!important;margin:0 10px 5px 0;cursor:pointer;color:#999}a.b-share-popup__form__link:hover,a.b-share-popup__form__close:hover{text-decoration:underline;color:red}.b-share-popup_font_fixed .b-share-popup__item{font-size:12.8px}.b-share-popup_font_fixed .b-share-popup__header,.b-share-popup_font_fixed .b-share-popup__input,.b-share-popup_font_fixed .b-share-popup__expander .b-share-popup__item,.b-share-popup_font_fixed .b-share-popup__form__link,.b-share-popup_font_fixed .b-share-popup__form__button,.b-share-popup_font_fixed .b-share-popup__form__close{font-size:11px}.b-share-popup_font_fixed .b-share-popup__yandex{font-size:10px}.b-share-form-button{font:86%/17px Verdana,Arial,sans-serif;display:-moz-inline-box;display:inline-block;position:relative;height:19px;margin:0 3px;padding:0 4px;cursor:default;white-space:nowrap;text-decoration:none!important;color:#000!important;border:none;outline:none;background:url("//yastatic.net/share/static/b-share-form-button.png") 0 -20px repeat-x}.b-share-form-button:link:hover,.b-share-form-button:visited:hover{color:#000!important}.b-share-form-button__before,.b-share-form-button__after{position:absolute;width:3px;height:19px;background:url("//yastatic.net/share/static/b-share-form-button.png")}.b-share-form-button__before{margin-left:-7px}.b-share-form-button__after{margin-left:4px;background-position:-3px 0}.b-share-form-button::-moz-focus-inner{border:none}button.b-share-form-button .b-share-form-button__before,button.b-share-form-button .b-share-form-button__after{margin-top:-1px}@-moz-document url-prefix(){button.b-share-form-button .b-share-form-button__after{margin-top:-2px;margin-left:6px}button.b-share-form-button .b-share-form-button__before{margin-top:-2px;margin-left:-9px}}SPAN.b-share-form-button:hover,.b-share-form-button_state_hover{background-position:0 -60px}SPAN.b-share-form-button:hover .b-share-form-button__before,.b-share-form-button_state_hover .b-share-form-button__before{background-position:0 -40px}SPAN.b-share-form-button:hover .b-share-form-button__after,.b-share-form-button_state_hover .b-share-form-button__after{background-position:-3px -40px}.b-share-form-button_state_pressed,.b-share-form-button_state_pressed .b-share-form-button_share{background-position:0 -100px!important}.b-share-form-button_state_pressed .b-share-form-button__before{background-position:0 -80px!important}.b-share-form-button_state_pressed .b-share-form-button__after{background-position:-3px -80px!important}button.b-share-form-button_state_pressed{overflow:visible}.b-share-form-button_icons{position:relative;padding:0;background-position:0 -20px!important}.b-share-form-button_icons .b-share-form-button__before{left:0;margin-left:-3px;background-position:0 0!important}.b-share-form-button_icons .b-share-form-button__after{z-index:-1;margin-left:0;background-position:-3px 0!important}.b-share-form-button_icons .b-share__handle{padding:2px!important}.b-share-form-button_icons .b-share__handle_more{position:relative;padding-right:6px!important;margin-right:-4px}.b-share-form-button_icons .b-share-icon{opacity:.5;background-image:url("//yastatic.net/share/static/b-share-icon_size_14.png")}.b-share-form-button_icons A.b-share__handle:hover .b-share-icon{opacity:1}.b-share{font:86%/1.4545em Arial,sans-serif;display:-moz-inline-box;display:inline-block;padding:1px 3px 1px 4px!important;vertical-align:middle}.b-share .b-share-form-button{font-size:1em}.b-share__text .b-share-icon{margin:0 5px 0 0;border:none}.b-share__text{margin-right:5px}.b-share__handle{float:left;height:16px;padding:5px 3px 5px 2px!important;cursor:pointer;text-align:left;text-decoration:none!important}.b-share__handle_cursor_default{cursor:default}.b-share__handle .b-share-form-button{margin-top:-2px}.b-share__hr{display:none;float:left;width:1px;height:26px;margin:0 3px 0 2px}a.b-share__handle:hover .b-share__text{text-decoration:underline;color:red}.b-share_bordered{padding:0 2px 0 3px!important;border:1px solid #E4E4E4;-moz-border-radius:5px;-webkit-border-radius:5px;border-radius:5px}.b-share_bordered .b-share__hr{display:inline;background:#E4E4E4}.b-share_link{margin:-8px 0}a.b-share_link{margin:0}.b-share_link .b-share__text{text-decoration:underline;color:#1A3DC1}.b-share-form-button_share{padding-left:26px!important;vertical-align:top}.b-share-form-button_share .b-share-form-button__before{margin-left:-29px}.b-share-form-button_share .b-share-form-button__icon{position:absolute;width:20px;height:17px;margin:1px 0 0 -23px;background:url("//yastatic.net/share/static/b-share-form-button_share__icon.png") 0 0 no-repeat}.b-share-pseudo-link{border-bottom:1px dotted;cursor:pointer;text-decoration:none!important}.b-share_font_fixed{font-size:11px}.b-share__handle_more{font-size:9px;margin-top:-1px;color:#7B7B7B}A.b-share__handle_more:hover{color:#000}.b-share__group{float:left}.b-share-icon{float:left;display:inline;overflow:hidden;width:16px;height:16px;padding:0!important;vertical-align:top;border:0;background:url("//yastatic.net/share/static/b-share-icon.png") 0 99px no-repeat}.b-share-icon_vkontakte,.b-share-icon_custom{background-position:0 0}.b-share-icon_yaru,.b-share-icon_yaru_photo,.b-share-icon_yaru_wishlist{background-position:0 -17px}.b-share-icon_lj{background-position:0 -34px}.b-share-icon_twitter{background-position:0 -51px}.b-share-icon_facebook{background-position:0 -68px}.b-share-icon_moimir{background-position:0 -85px}.b-share-icon_friendfeed{background-position:0 -102px}.b-share-icon_mail{background-position:0 -119px}.b-share-icon_html{background-position:0 -136px}.b-share-icon_postcard{background-position:0 -153px}.b-share-icon_odnoklassniki{background-position:0 -170px}.b-share-icon_blogger{background-position:0 -187px}.b-share-icon_delicious{background-position:0 -221px}.b-share-icon_gbuzz{background-position:0 -238px}.b-share-icon_linkedin{background-position:0 -255px}.b-share-icon_myspace{background-position:0 -272px}.b-share-icon_evernote{background-position:0 -289px}.b-share-icon_digg{background-position:0 -306px}.b-share-icon_juick{background-position:0 -324px}.b-share-icon_moikrug{background-position:0 -341px}.b-share-icon_yazakladki{background-position:0 -358px}.b-share-icon_liveinternet{background-position:0 -375px}.b-share-icon_tutby{background-position:0 -392px}.b-share-icon_diary{background-position:0 -409px}.b-share-icon_gplus{background-position:0 -426px}.b-share-icon_pocket{background-position:0 -443px}.b-share-icon_surfingbird{background-position:0 -460px}.b-share-icon_pinterest{background-position:0 -477px}.b-share-icon_renren{background-position:0 0}.b-share-icon_renren,.b-share-icon_sina_weibo{background:url("//yastatic.net/share/static/b-share-icon__china.png") no-repeat}.b-share-icon_sina_weibo{background-position:-18px 0}.b-share-icon_qzone{background-position:-36px 0}.b-share-icon_qzone,.b-share-icon_tencent_weibo{background:url("//yastatic.net/share/static/b-share-icon__china.png") no-repeat}.b-share-icon_tencent_weibo{background-position:-54px 0}.b-share_theme_dark .b-share-icon{background:url("//yastatic.net/share/static/b-share-icons__theme_dark.png") 99px 0 no-repeat}.b-share_theme_dark .b-share-icon_odnoklassniki{background-position:-4px -3px}.b-share_theme_dark .b-share-icon_vkontakte{background-position:-24px -3px}.b-share_theme_dark .b-share-icon_twitter{background-position:-44px -3px}.b-share_theme_dark .b-share-icon_facebook{background-position:-64px -3px}.b-share_theme_dark .b-share-icon_lj{background-position:-85px -3px}.b-share_theme_dark .b-share-icon_yaru{background-position:-105px -3px}.b-share_theme_dark .b-share-popup .b-share-icon_odnoklassniki,.b-share_theme_dark .b-share-icon_odnoklassniki:hover{background-position:-4px -28px}.b-share_theme_dark .b-share-popup .b-share-icon_vkontakte,.b-share_theme_dark .b-share-icon_vkontakte:hover{background-position:-24px -28px}.b-share_theme_dark .b-share-popup .b-share-icon_twitter,.b-share_theme_dark .b-share-icon_twitter:hover{background-position:-44px -28px}.b-share_theme_dark .b-share-popup .b-share-icon_facebook,.b-share_theme_dark .b-share-icon_facebook:hover{background-position:-64px -28px}.b-share_theme_dark .b-share-popup .b-share-icon_lj,.b-share_theme_dark .b-share-icon_lj:hover{background-position:-85px -28px}.b-share_theme_dark .b-share-popup .b-share-icon_yaru,.b-share_theme_dark .b-share-icon_yaru:hover{background-position:-105px -28px}.b-share_theme_dark .b-share-form-button_share .b-share-form-button__icon{background-image:url("//yastatic.net/share/static/b-share-form-button_share__icon_dark.png")}.b-share_theme_dark .b-share-form-button{color:#fff!important;opacity:.8}.b-share_theme_dark .b-share__handle:hover .b-share-form-button,.b-share_theme_dark .b-share-form-button:hover{opacity:1;cursor:pointer}.b-share_theme_dark .b-share-form-button,.b-share_theme_dark .b-share-form-button__before,.b-share_theme_dark .b-share-form-button__after{background:0 0}.b-share_theme_dark .b-share-popup__i{background-color:#333;border-radius:10px;-webkit-box-shadow:0 2px 9px rgba(255,255,255,.6);-moz-box-shadow:0 2px 9px rgba(255,255,255,.6);box-shadow:0 2px 9px rgba(255,255,255,.6)}.b-share_theme_dark .b-share__text{color:#AAA}.b-share_theme_dark .b-share-popup{color:#AAA;border-radius:10px;background-color:#333;background-color:rgba(50,50,50,.3)}.b-share_theme_dark .b-share-popup__item{background:0 0;color:#ccc}.b-share_theme_dark .b-share-popup .b-share-popup__item__text{color:#ccc}.b-share_theme_counter .b-share{display:inline-block;vertical-align:middle;white-space:nowrap}.b-share-counter{font:14px Arial,sans-serif;line-height:18px;display:none;float:left;margin:3px 6px 3px 3px;color:#fff}.b-share_theme_counter .b-share_type_small .b-share-counter{font-size:11px;line-height:14px;margin:2px 6px 2px 1px}.b-share_theme_counter .b-share-btn__counter .b-share-counter{display:block}.b-share-btn__counter{text-decoration:none}.b-share_theme_counter .b-share-btn__wrap{position:relative;float:left;margin-left:5px}.b-share_theme_counter .b-share_type_small .b-share-btn__wrap{margin-left:4px}.b-share_theme_counter .b-share-btn__wrap:first-child{margin-left:0}.b-share_theme_counter .b-share__link{display:inline-block;cursor:pointer;-webkit-border-radius:3px;border-radius:3px}.b-share_theme_counter .b-share_type_small .b-share__link{-webkit-border-radius:2px;border-radius:2px}.b-share_theme_counter .b-share-icon{display:block;float:left;width:24px;height:24px;background-image:url("//yastatic.net/share/static/b-share_counter_large.png");background-position:-20px 0}.b-share_theme_counter .b-share_type_small .b-share-icon{width:18px;height:18px;background-image:url("//yastatic.net/share/static/b-share_counter_small.png")}.b-share_theme_counter .b-share-icon_facebook{background-position:0 0}.b-share_theme_counter .b-share-btn__facebook{background-color:#3c5a98}.b-share_theme_counter .b-share-btn__facebook:hover{background-color:#30487a}.b-share_theme_counter .b-share-btn__facebook:active{border-top:2px solid #24365a;background-color:#334d81}.b-share_theme_counter .b-share-icon_moimir{background-position:0 -29px}.b-share_theme_counter .b-share-btn__moimir{background-color:#226eb7}.b-share_theme_counter .b-share-btn__moimir:hover{background-color:#1b5892}.b-share_theme_counter .b-share-btn__moimir:active{border-top:2px solid #14426d;background-color:#1d5e9c}.b-share_theme_counter .b-share-icon_vkontakte{background-position:0 -58px}.b-share_theme_counter .b-share-btn__vkontakte{background-color:#48729e}.b-share_theme_counter .b-share-btn__vkontakte:hover{background-color:#3a5b7e}.b-share_theme_counter .b-share-btn__vkontakte:active{border-top:2px solid #2b445e;background-color:#3d6186}.b-share_theme_counter .b-share-icon_twitter{background-position:0 -87px}.b-share_theme_counter .b-share-btn__twitter{background-color:#00aced}.b-share_theme_counter .b-share-btn__twitter:hover{background-color:#008abe}.b-share_theme_counter .b-share-btn__twitter:active{border-top:2px solid #00668d;background-color:#0092ca}.b-share_theme_counter .b-share-icon_odnoklassniki{background-position:0 -116px}.b-share_theme_counter .b-share-btn__odnoklassniki{background-color:#ff9f4d}.b-share_theme_counter .b-share-btn__odnoklassniki:hover{background-color:#cc7f3e}.b-share_theme_counter .b-share-btn__odnoklassniki:active{border-top:2px solid #975e2e;background-color:#d98742}.b-share_theme_counter .b-share-icon_gplus{background-position:0 -145px}.b-share_theme_counter .b-share-btn__gplus{background-color:#c25234}.b-share_theme_counter .b-share-btn__gplus:hover{background-color:#9b422a}.b-share_theme_counter .b-share-btn__gplus:active{border-top:2px solid #73311f;background-color:#a5462c}.b-share_theme_counter .b-share-icon_yaru{background-position:0 -174px}.b-share_theme_counter .b-share-btn__yaru{background-color:#d83933}.b-share_theme_counter .b-share-btn__yaru:hover{background-color:#ad2e29}.b-share_theme_counter .b-share-btn__yaru:active{border-top:2px solid #80221e;background-color:#b8312b}.b-share_theme_counter .b-share-icon_pinterest{background-position:0 -203px}.b-share_theme_counter .b-share-btn__pinterest{background-color:#cd1e27}.b-share_theme_counter .b-share-btn__pinterest:hover{background-color:#a4181f}.b-share_theme_counter .b-share-btn__pinterest:active{border-top:2px solid #7b1217;background-color:#ae1921}.b-share_theme_counter .b-share__link:active{height:22px}.b-share_theme_counter .b-share_type_small .b-share__link:active{height:16px}.b-share_theme_counter .b-share__link:active .b-share-icon,.b-share_theme_counter .b-share__link:active .b-share-counter{position:relative;top:-1px}.b-share_theme_counter .b-share__link::after{position:absolute;top:0;right:0;bottom:0;left:0;content:"";background-image:url(data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==)}.b-share_theme_counter .b-share__handle{height:auto;padding:0!important}</style><style type="text/css">.fb_hidden{position:absolute;top:-10000px;z-index:10001}.fb_reposition{overflow:hidden;position:relative}.fb_invisible{display:none}.fb_reset{background:none;border:0;border-spacing:0;color:#000;cursor:auto;direction:ltr;font-family:"lucida grande", tahoma, verdana, arial, sans-serif;font-size:11px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:1;margin:0;overflow:visible;padding:0;text-align:left;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;visibility:visible;white-space:normal;word-spacing:normal}.fb_reset>div{overflow:hidden}.fb_link img{border:none}@keyframes fb_transform{from{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.fb_animate{animation:fb_transform .3s forwards}
.fb_dialog{background:rgba(82, 82, 82, .7);position:absolute;top:-10000px;z-index:10001}.fb_reset .fb_dialog_legacy{overflow:visible}.fb_dialog_advanced{padding:10px;border-radius:8px}.fb_dialog_content{background:#fff;color:#333}.fb_dialog_close_icon{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 0 transparent;cursor:pointer;display:block;height:15px;position:absolute;right:18px;top:17px;width:15px}.fb_dialog_mobile .fb_dialog_close_icon{top:5px;left:5px;right:auto}.fb_dialog_padding{background-color:transparent;position:absolute;width:1px;z-index:-1}.fb_dialog_close_icon:hover{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -15px transparent}.fb_dialog_close_icon:active{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -30px transparent}.fb_dialog_loader{background-color:#f6f7f9;border:1px solid #606060;font-size:24px;padding:20px}.fb_dialog_top_left,.fb_dialog_top_right,.fb_dialog_bottom_left,.fb_dialog_bottom_right{height:10px;width:10px;overflow:hidden;position:absolute}.fb_dialog_top_left{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/ye/r/8YeTNIlTZjm.png) no-repeat 0 0;left:-10px;top:-10px}.fb_dialog_top_right{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/ye/r/8YeTNIlTZjm.png) no-repeat 0 -10px;right:-10px;top:-10px}.fb_dialog_bottom_left{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/ye/r/8YeTNIlTZjm.png) no-repeat 0 -20px;bottom:-10px;left:-10px}.fb_dialog_bottom_right{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/ye/r/8YeTNIlTZjm.png) no-repeat 0 -30px;right:-10px;bottom:-10px}.fb_dialog_vert_left,.fb_dialog_vert_right,.fb_dialog_horiz_top,.fb_dialog_horiz_bottom{position:absolute;background:#525252;filter:alpha(opacity=70);opacity:.7}.fb_dialog_vert_left,.fb_dialog_vert_right{width:10px;height:100%}.fb_dialog_vert_left{margin-left:-10px}.fb_dialog_vert_right{right:0;margin-right:-10px}.fb_dialog_horiz_top,.fb_dialog_horiz_bottom{width:100%;height:10px}.fb_dialog_horiz_top{margin-top:-10px}.fb_dialog_horiz_bottom{bottom:0;margin-bottom:-10px}.fb_dialog_iframe{line-height:0}.fb_dialog_content .dialog_title{background:#6d84b4;border:1px solid #365899;color:#fff;font-size:14px;font-weight:bold;margin:0}.fb_dialog_content .dialog_title>span{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/yd/r/Cou7n-nqK52.gif) no-repeat 5px 50%;float:left;padding:5px 0 7px 26px}body.fb_hidden{-webkit-transform:none;height:100%;margin:0;overflow:visible;position:absolute;top:-10000px;left:0;width:100%}.fb_dialog.fb_dialog_mobile.loading{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/ya/r/3rhSv5V8j3o.gif) white no-repeat 50% 50%;min-height:100%;min-width:100%;overflow:hidden;position:absolute;top:0;z-index:10001}.fb_dialog.fb_dialog_mobile.loading.centered{width:auto;height:auto;min-height:initial;min-width:initial;background:none}.fb_dialog.fb_dialog_mobile.loading.centered #fb_dialog_loader_spinner{width:100%}.fb_dialog.fb_dialog_mobile.loading.centered .fb_dialog_content{background:none}.loading.centered #fb_dialog_loader_close{color:#fff;display:block;padding-top:20px;clear:both;font-size:18px}#fb-root #fb_dialog_ipad_overlay{background:rgba(0, 0, 0, .45);position:absolute;bottom:0;left:0;right:0;top:0;width:100%;min-height:100%;z-index:10000}#fb-root #fb_dialog_ipad_overlay.hidden{display:none}.fb_dialog.fb_dialog_mobile.loading iframe{visibility:hidden}.fb_dialog_content .dialog_header{-webkit-box-shadow:white 0 1px 1px -1px inset;background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#738ABA), to(#2C4987));border-bottom:1px solid;border-color:#1d4088;color:#fff;font:14px Helvetica, sans-serif;font-weight:bold;text-overflow:ellipsis;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0;vertical-align:middle;white-space:nowrap}.fb_dialog_content .dialog_header table{-webkit-font-smoothing:subpixel-antialiased;height:43px;width:100%}.fb_dialog_content .dialog_header td.header_left{font-size:12px;padding-left:5px;vertical-align:middle;width:60px}.fb_dialog_content .dialog_header td.header_right{font-size:12px;padding-right:5px;vertical-align:middle;width:60px}.fb_dialog_content .touchable_button{background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#4966A6), color-stop(.5, #355492), to(#2A4887));border:1px solid #29487d;-webkit-background-clip:padding-box;-webkit-border-radius:3px;-webkit-box-shadow:rgba(0, 0, 0, .117188) 0 1px 1px inset, rgba(255, 255, 255, .167969) 0 1px 0;display:inline-block;margin-top:3px;max-width:85px;line-height:18px;padding:4px 12px;position:relative}.fb_dialog_content .dialog_header .touchable_button input{border:none;background:none;color:#fff;font:12px Helvetica, sans-serif;font-weight:bold;margin:2px -12px;padding:2px 6px 3px 6px;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}.fb_dialog_content .dialog_header .header_center{color:#fff;font-size:16px;font-weight:bold;line-height:18px;text-align:center;vertical-align:middle}.fb_dialog_content .dialog_content{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/y9/r/jKEcVPZFk-2.gif) no-repeat 50% 50%;border:1px solid #555;border-bottom:0;border-top:0;height:150px}.fb_dialog_content .dialog_footer{background:#f6f7f9;border:1px solid #555;border-top-color:#ccc;height:40px}#fb_dialog_loader_close{float:left}.fb_dialog.fb_dialog_mobile .fb_dialog_close_button{text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}.fb_dialog.fb_dialog_mobile .fb_dialog_close_icon{visibility:hidden}#fb_dialog_loader_spinner{animation:rotateSpinner 1.2s linear infinite;background-color:transparent;background-image:url(https://static.xx.fbcdn.net/rsrc.php/v3/yD/r/t-wz8gw1xG1.png);background-repeat:no-repeat;background-position:50% 50%;height:24px;width:24px}@keyframes rotateSpinner{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
.fb_iframe_widget{display:inline-block;position:relative}.fb_iframe_widget span{display:inline-block;position:relative;text-align:justify}.fb_iframe_widget iframe{position:absolute}.fb_iframe_widget_fluid_desktop,.fb_iframe_widget_fluid_desktop span,.fb_iframe_widget_fluid_desktop iframe{max-width:100%}.fb_iframe_widget_fluid_desktop iframe{min-width:220px;position:relative}.fb_iframe_widget_lift{z-index:1}.fb_hide_iframes iframe{position:relative;left:-10000px}.fb_iframe_widget_loader{position:relative;display:inline-block}.fb_iframe_widget_fluid{display:inline}.fb_iframe_widget_fluid span{width:100%}.fb_iframe_widget_loader iframe{min-height:32px;z-index:2;zoom:1}.fb_iframe_widget_loader .FB_Loader{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/y9/r/jKEcVPZFk-2.gif) no-repeat;height:32px;width:32px;margin-left:-16px;position:absolute;left:50%;z-index:4}
.fb_customer_chat_bounce_in{animation-duration:250ms;animation-name:fb_bounce_in}.fb_customer_chat_bounce_out{animation-duration:250ms;animation-name:fb_fade_out}.fb_invisible_flow{display:inherit;height:0;overflow-x:hidden;width:0}.fb_mobile_overlay_active{background-color:#fff;height:100%;overflow:hidden;position:fixed;visibility:hidden;width:100%}@keyframes fb_fade_out{from{opacity:1}to{opacity:0}}@keyframes fb_bounce_in{0%{opacity:0;transform:scale(.8, .8);transform-origin:100% 100%}10%{opacity:.1}20%{opacity:.2}30%{opacity:.3}40%{opacity:.4}50%{opacity:.5}60%{opacity:.6}70%{opacity:.7}80%{opacity:.8;transform:scale(1.03, 1.03)}90{opacity:.9}100%{opacity:1;transform:scale(1, 1)}}</style><style type="text/css">.MJXp-script {font-size: .8em}
.MJXp-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXp-bold {font-weight: bold}
.MJXp-italic {font-style: italic}
.MJXp-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-largeop {font-size: 150%}
.MJXp-largeop.MJXp-int {vertical-align: -.2em}
.MJXp-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXp-display {display: block; text-align: center; margin: 1em 0}
.MJXp-math span {display: inline-block}
.MJXp-box {display: block!important; text-align: center}
.MJXp-box:after {content: " "}
.MJXp-rule {display: block!important; margin-top: .1em}
.MJXp-char {display: block!important}
.MJXp-mo {margin: 0 .15em}
.MJXp-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXp-denom {display: inline-table!important; width: 100%}
.MJXp-denom > * {display: table-row!important}
.MJXp-surd {vertical-align: top}
.MJXp-surd > * {display: block!important}
.MJXp-script-box > *  {display: table!important; height: 50%}
.MJXp-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXp-script-box > *:last-child > * {vertical-align: bottom}
.MJXp-script-box > * > * > * {display: block!important}
.MJXp-mphantom {visibility: hidden}
.MJXp-munderover {display: inline-table!important}
.MJXp-over {display: inline-block!important; text-align: center}
.MJXp-over > * {display: block!important}
.MJXp-munderover > * {display: table-row!important}
.MJXp-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXp-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXp-mtr {display: table-row!important}
.MJXp-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXp-mtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-mlabeledtr {display: table-row!important}
.MJXp-mlabeledtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mlabeledtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXp-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXp-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXp-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXp-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXp-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXp-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXp-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXp-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXp-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXp-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
.MathJax_PHTML .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style></head>
<body><span style="display:none;" class="csrf-token" data-csrf="cb69324bfcd030bad5d4bcf28f3df782">&nbsp;</span>

<div class="button-up" style="display: none; opacity: 0.7; width: 30px; height: 100%; position: fixed; left: 0px; top: 0px; cursor: pointer; text-align: center; line-height: 30px; color: rgb(211, 219, 228); font-weight: bold; font-size: 20px;"><i class="icon-circle-arrow-up"></i></div>

<!-- Codeforces JavaScripts. -->
<script type="text/javascript">
    var queryMobile = Codeforces.queryString.mobile;
    if (queryMobile === "true" || queryMobile === "false") {
        Codeforces.putToStorage("useMobile", queryMobile == "true");
    } else {
        var useMobile = Codeforces.getFromStorage("useMobile");
        if (useMobile === true || useMobile === false) {
            if (useMobile != false) {
                Codeforces.redirect(Codeforces.updateUrlParameter(document.location.href, "mobile", useMobile));
            }
        }
    }
</script>
<script type="text/javascript">
    if (window.parent.frames.length > 0) {
        window.stop();
    }
</script>
<script type="text/javascript">
    window.fbAsyncInit = function() {
        FB.init({
            appId      : '554666954583323',
            xfbml      : true,
            version    : 'v2.8'
        });
        FB.AppEvents.logPageView();
    };

    (function(d, s, id){
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) {return;}
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_US/sdk.js";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
</script>

    <script type="text/javascript">
        $(document).ready(function () {
    (function () {
        jQuery.expr[':'].containsCI = function(elem, index, match) {
            return !match || !match.length || match.length < 4 || !match[3] || (
                    elem.textContent || elem.innerText || jQuery(elem).text() || ''
            ).toLowerCase().indexOf(match[3].toLowerCase()) >= 0;
        }
    }(jQuery));

    $.ajaxPrefilter(function(options, originalOptions, xhr) {
        var csrf = Codeforces.getCsrfToken();

        if (csrf) {
            var data = originalOptions.data;
            if (originalOptions.data !== undefined) {
                if (Object.prototype.toString.call(originalOptions.data) === '[object String]') {
                    data = $.deparam(originalOptions.data);
                }
            } else {
                data = {};
            }
            options.data = $.param($.extend(data, { csrf_token: csrf }));
        }
    });

    window.getCodeforcesServerTime = function(callback) {
        $.post("/data/time", {}, callback, "json");
    }

    window.updateTypography = function () {
        $("div.ttypography code").addClass("tt");
        $("div.ttypography pre>code").addClass("prettyprint").removeClass("tt");
        $("div.ttypography table").addClass("bordertable");
        prettyPrint();
    }

    $.ajaxSetup({ scriptCharset: "utf-8" ,contentType: "application/x-www-form-urlencoded; charset=UTF-8", headers: {
        'X-Csrf-Token': Codeforces.getCsrfToken()
    }});

    window.updateTypography();

    Codeforces.signForms();

    setTimeout(function() {
        $(".second-level-menu-list").lavaLamp({
            fx: "backout",
            speed: 1000
        });
    }, 0);


    Codeforces.countdown();
    $("a[rel='photobox']").colorbox();


    function showAnnouncements(json) {
        //info("j=" + JSON.stringify(json));

        if (json.t != "a") {
            return;
        }
        // console.log("Got announcement from channel");
        setTimeout(function() {
            Codeforces.showAnnouncements(json.d, "en");
        }, Math.random() * 500);
    }
    if (Codeforces.getParticipantChannel()) {
        Codeforces.subscribe(Codeforces.getParticipantChannel(), function(json) {
            showAnnouncements(json);
        });
    }

    if (Codeforces.getContestChannel()) {
        Codeforces.subscribe(Codeforces.getContestChannel(), function(json) {
            showAnnouncements(json);
        });
    }

    if (Codeforces.getGlobalChannel()) {
        Codeforces.subscribe(Codeforces.getGlobalChannel(), function(json) {
            showAnnouncements(json);
        });
    }

    if (Codeforces.getUserChannel()) {
        Codeforces.subscribe(Codeforces.getUserChannel(), function(json) {
            showAnnouncements(json);
        });
    }

    $(".clickable-title").click(function() {
        Codeforces.alert($(this).attr("title"));
    }).css("position", "relative").css("bottom", "3px");


    Codeforces.reformatTimes();
    Codeforces.initializePubSub();

    Codeforces.setupSpoilers();
    Codeforces.setupTutorials("/data/problemTutorial");
        });
    </script>

<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-743380-5']);
  _gaq.push(['_trackPageview']);

  (function () {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = (document.location.protocol == 'https:' ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>


<div id="body">
        

<div class="side-bell" style="visibility: hidden; display: none; opacity: 0.7; width: 40px; position: fixed; right: 0; top: 0; cursor: pointer; text-align: center; line-height: 35px; color: #d3dbe4; font-weight: bold; font-size: 1.5rem;">
    <span class="icon-stack" style="width: 100%;">
        <i class="icon-circle icon-stack-base"></i>
        <i class="icon-bell-alt icon-light"></i>
    </span>
    <br>
    <span class="side-bell__count" style="position: relative; top: -10px;"></span>
</div>


<div id="header" style="position: relative;">
    <div style="float:left;">
            <a href="/"><img src="http://st.codeforces.com/s/21816/images/codeforces-logo-with-telegram.png"></a>
    </div>
    <div class="lang-chooser">
        <div style="text-align: right;">
            <a href="?locale=en"><img src="http://st.codeforces.com/s/21816/images/flags/24/gb.png" title="In English" alt="In English"></a>
            <a href="?locale=ru"><img src="http://st.codeforces.com/s/21816/images/flags/24/ru.png" title="-" alt="-"></a>
        </div>

        <div>
                        <a href="/enter?back=%2Fblog%2Fentry%2F15890">Enter</a>
                     | 
                        <a href="/register">Register</a>
                    
        </div>



    </div>
    <br style="clear: both;">
</div>
        

    <div class="roundbox menu-box" style="">
            <div class="roundbox-lt">&nbsp;</div>
            <div class="roundbox-rt">&nbsp;</div>
            <div class="roundbox-lb">&nbsp;</div>
            <div class="roundbox-rb">&nbsp;</div>
    <div class="menu-list-container">
    <ul class="menu-list main-menu-list">
                <li class=""><a href="/">Home</a></li>
                <li class=""><a href="/contests">Contests</a></li>
                <li class=""><a href="/gyms">Gym</a></li>
                <li class=""><a href="/problemset">Problemset</a></li>
                <li class=""><a href="/groups">Groups</a></li>
                <li class=""><a href="/ratings">Rating</a></li>
                <li class=""><a href="/api/help">API</a></li>
                <li class=""><a href="/vkcup2018">VK Cup <img class="icon" src="http://st.codeforces.com/images/icons/cup.png"></a></li>
                <li class=""><a href="/calendar">Calendar</a></li>
                <li class=""><a href="/8years"><span style="color:#ce2a2a;position:relative;bottom:3px;font-weight:bold;">8 years!</span><img src="http://assets.codeforces.com/images/icons/gift-small.png"></a></li>
    </ul>
        <form method="post" action="/search"><input type="hidden" name="csrf_token" value="cb69324bfcd030bad5d4bcf28f3df782">
            <input class="search" name="query" data-isplaceholder="true" value="">
        <input type="hidden" name="_tta" value="227"></form>
    <br style="clear: both;">
</div>

    </div>

    <script type="text/javascript">
        $(document).ready(function () {
            $("input.search").focus(function () {
                if ($(this).attr("data-isPlaceholder") === "true") {
                    $(this).val("");
                    $(this).removeAttr("data-isPlaceholder");
                }
            });
        });
    </script>
            <br style="height: 3em; clear: both;">

        <div style="position: relative;">
                        <div id="sidebar">
    <div class="roundbox sidebox" style="">
            <div class="roundbox-lt">&nbsp;</div>
            <div class="roundbox-rt">&nbsp;</div>
        <div class="caption titled"> Pay attention
            <div class="top-links">
            </div>
        </div>
<div style="padding: 0.5em;">
        <div style="text-align:center;border-bottom: 1px solid rgb(185, 185, 185);margin:0 -0.5em 0.5em -0.5em;padding: 0 1em 0.5em 1em;">
            <span class="contest-state-phase">Before contest</span><br><a href="/contests/925">VK Cup 2018 - Round 3</a><br><span class="countdown" home="http://st.codeforces.com/s/21816" noredirection="true" textbeforeredirect="" cdid="i1"><span title="249:40:07">10 days</span></span>
        </div>
        <div style="text-align:center;">
            <div class="socials" style="text-align: left;">
                <div style="margin-top: 0.85em;position: relative;">

        <div id="fb-root" class=" fb_reset"><div style="position: absolute; top: -10000px; height: 0px; width: 0px;"><div><iframe name="fb_xdm_frame_http" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" allow="encrypted-media" id="fb_xdm_frame_http" aria-hidden="true" title="Facebook Cross Domain Communication Frame" tabindex="-1" src="http://staticxx.facebook.com/connect/xd_arbiter/r/FdM1l_dpErI.js?version=42#channel=f17cc6b808&amp;origin=http%3A%2F%2Fcodeforces.com" style="border: none;"></iframe><iframe name="fb_xdm_frame_https" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" allow="encrypted-media" id="fb_xdm_frame_https" aria-hidden="true" title="Facebook Cross Domain Communication Frame" tabindex="-1" src="https://staticxx.facebook.com/connect/xd_arbiter/r/FdM1l_dpErI.js?version=42#channel=f17cc6b808&amp;origin=http%3A%2F%2Fcodeforces.com" style="border: none;"></iframe></div></div><div style="position: absolute; top: -10000px; height: 0px; width: 0px;"><div></div></div></div>
        <script>
        (function(d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) return;
            js = d.createElement(s); js.id = id;
            js.src = "http://connect.facebook.net/en_EN/all.js#appId=554666954583323&xfbml=1";
            fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));
        </script>
        <div class="fb-like fb_iframe_widget" data-href="http://codeforces.com/contests/925" data-send="false" data-width="256" data-show-faces="false" data-font="arial" data-ref="56380" fb-xfbml-state="rendered" fb-iframe-plugin-query="app_id=554666954583323&amp;container_width=264&amp;font=arial&amp;href=http%3A%2F%2Fcodeforces.com%2Fcontests%2F925&amp;locale=en_US&amp;ref=56380&amp;sdk=joey&amp;send=false&amp;show_faces=false&amp;width=256"><span style="vertical-align: bottom; width: 256px; height: 28px;"><iframe name="f208a4a1b4" width="256px" height="1000px" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" allow="encrypted-media" title="fb:like Facebook Social Plugin" src="https://www.facebook.com/v2.8/plugins/like.php?app_id=554666954583323&amp;channel=http%3A%2F%2Fstaticxx.facebook.com%2Fconnect%2Fxd_arbiter%2Fr%2FFdM1l_dpErI.js%3Fversion%3D42%23cb%3Df3054ade34%26domain%3Dcodeforces.com%26origin%3Dhttp%253A%252F%252Fcodeforces.com%252Ff17cc6b808%26relation%3Dparent.parent&amp;container_width=264&amp;font=arial&amp;href=http%3A%2F%2Fcodeforces.com%2Fcontests%2F925&amp;locale=en_US&amp;ref=56380&amp;sdk=joey&amp;send=false&amp;show_faces=false&amp;width=256" style="border: none; visibility: visible; width: 256px; height: 28px;" class=""></iframe></span></div>

        </div>
</div>

        </div>
</div>
    </div>

<div class="roundbox sidebox top-contributed" style="">
<div class="roundbox-lt">&nbsp;</div>
<div class="roundbox-rt">&nbsp;</div>
<div class="caption titled"> Top rated
<div class="top-links">
</div>
</div>
<table class="rtable ">
<tbody>
<tr>
<th class="left" style="width:2.25em;">#</th>
<th class="">User</th>
<th class="" style="width:5em;">Rating</th>
</tr>
<tr>
<td class="left dark">1</td>
<td class=" dark"><a href="/profile/Petr" title="Legendary grandmaster Petr" class="rated-user user-legendary"><span class="legendary-user-first-letter">P</span>etr</a></td>
<td class=" dark">3325</td>
</tr>
<tr>
<td class="left ">2</td>
<td class=""><a href="/profile/OO0OOO00O0OOO0O00OOO0OO" title="Legendary grandmaster OO0OOO00O0OOO0O00OOO0OO" class="rated-user user-legendary smaller"><span class="legendary-user-first-letter">O</span>O0OOO00O0OOO0O0O</a></td>
<td class="">3289</td>
</tr>
<tr>
<td class="left dark">3</td>
<td class=" dark"><a href="/profile/Um_nik" title="Legendary grandmaster Um_nik" class="rated-user user-legendary"><span class="legendary-user-first-letter">U</span>m_nik</a></td>
<td class=" dark">3278</td>
</tr>
<tr>
<td class="left ">4</td>
<td class=""><a href="/profile/Syloviaely" title="Legendary grandmaster Syloviaely" class="rated-user user-legendary"><span class="legendary-user-first-letter">S</span>yloviaely</a></td>
<td class="">3274</td>
</tr>
<tr>
<td class="left dark">5</td>
<td class=" dark"><a href="/profile/tourist" title="Legendary grandmaster tourist" class="rated-user user-legendary"><span class="legendary-user-first-letter">t</span>ourist</a></td>
<td class=" dark">3206</td>
</tr>
<tr>
<td class="left ">6</td>
<td class=""><a href="/profile/Radewoosh" title="Legendary grandmaster Radewoosh" class="rated-user user-legendary"><span class="legendary-user-first-letter">R</span>adewoosh</a></td>
<td class="">3197</td>
</tr>
<tr>
<td class="left dark">7</td>
<td class=" dark"><a href="/profile/V--o_o--V" title="Legendary grandmaster V--o_o--V" class="rated-user user-legendary"><span class="legendary-user-first-letter">V</span>--o_o--V</a></td>
<td class=" dark">3167</td>
</tr>
<tr>
<td class="left ">8</td>
<td class=""><a href="/profile/mnbvmar" title="Legendary grandmaster mnbvmar" class="rated-user user-legendary"><span class="legendary-user-first-letter">m</span>nbvmar</a></td>
<td class="">3096</td>
</tr>
<tr>
<td class="left dark">9</td>
<td class=" dark"><a href="/profile/dotorya" title="Legendary grandmaster dotorya" class="rated-user user-legendary"><span class="legendary-user-first-letter">d</span>otorya</a></td>
<td class=" dark">3086</td>
</tr>
<tr>
<td class="left bottom">10</td>
<td class="bottom"><a href="/profile/FizzyDavid" title="Legendary grandmaster FizzyDavid" class="rated-user user-legendary"><span class="legendary-user-first-letter">F</span>izzyDavid</a></td>
<td class="bottom">3023</td>
</tr>
</tbody>
</table>
<div class="bottom-links">
<table style="width:100%;">
<tbody>
<tr>
<td style="text-align:left;">
<a href="/ratings/countries">Countries</a> |
<a href="/ratings/cities">Cities</a> |
<a href="/ratings/organizations">Organizations</a>
</td>
<td style="text-align:right;">
<a href="/ratings">View all </a>
</td>
</tr>
</tbody>
</table>
</div>
</div>

    <div class="roundbox sidebox top-contributed" style="">
            <div class="roundbox-lt">&nbsp;</div>
            <div class="roundbox-rt">&nbsp;</div>
        <div class="caption titled"> Top contributors
            <div class="top-links">
            </div>
        </div>
        <table class="rtable ">
            <tbody>
                <tr>
                            <th class="left" style="width:2.25em;">#</th>
                            <th class="">User</th>
                            <th class="" style="width:5em;">Contrib.</th>
                </tr>
                    <tr>
                                <td class="left  dark">1</td>
                                <td class=" dark"><a href="/profile/tourist" title="Legendary grandmaster tourist" class="rated-user user-legendary"><span class="legendary-user-first-letter">t</span>ourist</a></td>
                                <td class=" dark">183</td>
                    </tr>
                    <tr>
                                <td class="left ">2</td>
                                <td class=""><a href="/profile/rng_58" title="Legendary grandmaster rng_58" class="rated-user user-legendary"><span class="legendary-user-first-letter">r</span>ng_58</a></td>
                                <td class="">168</td>
                    </tr>
                    <tr>
                                <td class="left  dark">3</td>
                                <td class=" dark"><a href="/profile/csacademy" title="Unrated, csacademy" class="rated-user user-black">csacademy</a></td>
                                <td class=" dark">161</td>
                    </tr>
                    <tr>
                                <td class="left ">4</td>
                                <td class=""><a href="/profile/Petr" title="Legendary grandmaster Petr" class="rated-user user-legendary"><span class="legendary-user-first-letter">P</span>etr</a></td>
                                <td class="">160</td>
                    </tr>
                    <tr>
                                <td class="left  dark">5</td>
                                <td class=" dark"><a href="/profile/lewin" title="Grandmaster lewin" class="rated-user user-red">lewin</a></td>
                                <td class=" dark">151</td>
                    </tr>
                    <tr>
                                <td class="left ">6</td>
                                <td class=""><a href="/profile/Swistakk" title="Legendary grandmaster Swistakk" class="rated-user user-legendary"><span class="legendary-user-first-letter">S</span>wistakk</a></td>
                                <td class="">150</td>
                    </tr>
                    <tr>
                                <td class="left  dark">7</td>
                                <td class=" dark"><a href="/profile/matthew99" title="Grandmaster matthew99" class="rated-user user-red">matthew99</a></td>
                                <td class=" dark">142</td>
                    </tr>
                    <tr>
                                <td class="left ">8</td>
                                <td class=""><a href="/profile/BledDest" title="Grandmaster BledDest" class="rated-user user-red">BledDest</a></td>
                                <td class="">141</td>
                    </tr>
                    <tr>
                                <td class="left  dark">9</td>
                                <td class=" dark"><a href="/profile/Errichto" title="Grandmaster Errichto" class="rated-user user-red">Errichto</a></td>
                                <td class=" dark">140</td>
                    </tr>
                    <tr>
                                <td class="left bottom">10</td>
                                <td class="bottom"><a href="/profile/adamant" title="International master adamant" class="rated-user user-orange">adamant</a></td>
                                <td class="bottom">139</td>
                    </tr>
            </tbody>
        </table>
            <div class="bottom-links">
                <table style="width:100%;">
                    <tbody>
                        <tr>
                            <td style="text-align:left;">
                            </td>
                            <td style="text-align:right;">
                                    <a href="/top-contributed">View all </a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
    </div>

    <script type="text/javascript">
        $(document).ready(function () {
        });
    </script>



    <div class="roundbox sidebox" style="">
            <div class="roundbox-lt">&nbsp;</div>
            <div class="roundbox-rt">&nbsp;</div>
        <div class="caption titled"> Find user
            <div class="top-links">
            </div>
        </div>
        <form class="handleForm" method="post" autocomplete="off"><input type="hidden" name="csrf_token" value="cb69324bfcd030bad5d4bcf28f3df782">
            <div style="padding:1em;text-align:right;">
                <label style="padding-right:1em;">Handle:
                    <input style="width:12em;" type="text" class="handleBox ac_input" autocomplete="off">
                </label>
            </div>
            <div style="padding: 0 1em 1em 1em;text-align:right;">
                <input style="height:1.65em;padding:0 0.75em;" type="submit" value="Find">
            </div>
        <input type="hidden" name="_tta" value="227"></form>
    </div>
    <script type="text/javascript">
        $(document).ready(function () {
    $(".handleBox").autocomplete("/data/handles", {
        delay: 200,
        width: 200,
        selectFirst: false,
        matchContains: true,
        minChars: 3
    });
    $(".handleForm").attr("autocomplete", "off").submit(function () {
        var link = "/profile/userHandle".replace(
            "userHandle", $(this).find(".handleBox").val()
        );
        window.location = link;
        return false;
    });
        });
    </script>




    <div class="roundbox sidebox" style="">
            <div class="roundbox-lt">&nbsp;</div>
            <div class="roundbox-rt">&nbsp;</div>
        <div class="caption titled"> Recent actions
            <div class="top-links">
            </div>
        </div>
        <div class="recent-actions">
            <ul>
                        <li><div style="font-size:0.9em;padding:0.5em 0;">
<a href="/profile/ICPCNews1" title="Unrated, ICPCNews1" class="rated-user user-black">ICPCNews1</a>        
        <a href="/blog/entry/58998">My story to the ICPC and what I found amazing through it</a>
&nbsp;&nbsp;<img alt="Text created or updated" title="Text created or updated" src="http://st.codeforces.com/s/21816/images/icons/x-update-12x12.png" style="vertical-align:middle;">
</div>
</li>
                        <li><div style="font-size:0.9em;padding:0.5em 0;">
<a href="/profile/Nickolas" title="Expert Nickolas" class="rated-user user-blue">Nickolas</a>        
        <a href="/blog/entry/58535">Marathon Match 100</a>
&nbsp;&nbsp;<img alt="Text created or updated" title="Text created or updated" src="http://st.codeforces.com/s/21816/images/icons/x-update-12x12.png" style="vertical-align:middle;">
</div>
</li>
                        <li><div style="font-size:0.9em;padding:0.5em 0;">
<a href="/profile/aslf010990" title="Newbie aslf010990" class="rated-user user-gray">aslf010990</a>        
        <a href="/blog/entry/58751">world final prediction game acm icpc 2018</a>
&nbsp;&nbsp;<img alt="Text created or updated" title="Text created or updated" src="http://st.codeforces.com/s/21816/images/icons/x-update-12x12.png" style="vertical-align:middle;">
</div>
</li>
                        <li><div style="font-size:0.9em;padding:0.5em 0;">
<a href="/profile/marX" title="Grandmaster marX" class="rated-user user-red">marX</a>        
        <a href="/blog/entry/58997">World Finals 2018  Online Mirror</a>
&nbsp;&nbsp;<img alt="Text created or updated" title="Text created or updated" src="http://st.codeforces.com/s/21816/images/icons/x-update-12x12.png" style="vertical-align:middle;">
</div>
</li>
                        <li><div style="font-size:0.9em;padding:0.5em 0;">
<a href="/profile/rynnethia" title="Unrated, rynnethia" class="rated-user user-black">rynnethia</a>        
        <a href="/blog/entry/58996">Time Complexity Question</a>
&nbsp;&nbsp;<img alt="Text created or updated" title="Text created or updated" src="http://st.codeforces.com/s/21816/images/icons/x-update-12x12.png" style="vertical-align:middle;">
</div>
</li>
                        <li><div style="font-size:0.9em;padding:0.5em 0;">
<a href="/profile/gKseni" title="Pupil gKseni" class="rated-user user-green">gKseni</a>        
        <a href="/blog/entry/58990">ICPC World Finals 2018</a>
&nbsp;&nbsp;<img alt="Text created or updated" title="Text created or updated" src="http://st.codeforces.com/s/21816/images/icons/x-update-12x12.png" style="vertical-align:middle;">
</div>
</li>
                        <li><div style="font-size:0.9em;padding:0.5em 0;">
<a href="/profile/MikeMirzayanov" title="Headquarters, MikeMirzayanov" class="rated-user user-admin">MikeMirzayanov</a>        
        <a href="/blog/entry/58986">VK Cup 2018 - Wild-card Round 2</a>
&nbsp;&nbsp;<img alt="New comment(s)" title="New comment(s)" src="http://st.codeforces.com/s/21816/images/icons/comment-12x12.png" style="vertical-align:middle;">
</div>
</li>
                        <li><div style="font-size:0.9em;padding:0.5em 0;">
<a href="/profile/ICPCNews1" title="Unrated, ICPCNews1" class="rated-user user-black">ICPCNews1</a>        
        <a href="/blog/entry/58995">Hello from ACM ICPC World Finals!</a>
&nbsp;&nbsp;<img alt="Text created or updated" title="Text created or updated" src="http://st.codeforces.com/s/21816/images/icons/x-update-12x12.png" style="vertical-align:middle;">
</div>
</li>
                        <li><div style="font-size:0.9em;padding:0.5em 0;">
<a href="/profile/Petr" title="Legendary grandmaster Petr" class="rated-user user-legendary"><span class="legendary-user-first-letter">P</span>etr</a>        
        <a href="/blog/entry/58977">ACM ICPC 2018 World Finals stream</a>
&nbsp;&nbsp;<img alt="New comment(s)" title="New comment(s)" src="http://st.codeforces.com/s/21816/images/icons/comment-12x12.png" style="vertical-align:middle;">
</div>
</li>
                        <li><div style="font-size:0.9em;padding:0.5em 0;">
<a href="/profile/kadoban" title="Expert kadoban" class="rated-user user-blue">kadoban</a>        
        <a href="/blog/entry/52977">Codeforces's Haskell setup is bad (with respect to "Safe Haskell")</a>
&nbsp;&nbsp;<img alt="New comment(s)" title="New comment(s)" src="http://st.codeforces.com/s/21816/images/icons/comment-12x12.png" style="vertical-align:middle;">
</div>
</li>
                        <li><div style="font-size:0.9em;padding:0.5em 0;">
<a href="/profile/Helgui" title="Expert Helgui" class="rated-user user-blue">Helgui</a>        
        <a href="/blog/entry/58758">Top 30 ICPC 2018 teams (based on Codeforces rating)</a>
&nbsp;&nbsp;<img alt="New comment(s)" title="New comment(s)" src="http://st.codeforces.com/s/21816/images/icons/comment-12x12.png" style="vertical-align:middle;">
</div>
</li>
                        <li><div style="font-size:0.9em;padding:0.5em 0;">
<a href="/profile/VIKRAM91" title="Specialist VIKRAM91" class="rated-user user-cyan">VIKRAM91</a>        
        <a href="/blog/entry/58984">Need Google Code Jam 2018 Round 1(a) solutions</a>
&nbsp;&nbsp;<img alt="New comment(s)" title="New comment(s)" src="http://st.codeforces.com/s/21816/images/icons/comment-12x12.png" style="vertical-align:middle;">
</div>
</li>
                        <li><div style="font-size:0.9em;padding:0.5em 0;">
<a href="/profile/motatoes" title="Newbie motatoes" class="rated-user user-gray">motatoes</a>        
        <a href="/blog/entry/58994">How to solve this gym problem</a>
&nbsp;&nbsp;<img alt="New comment(s)" title="New comment(s)" src="http://st.codeforces.com/s/21816/images/icons/comment-12x12.png" style="vertical-align:middle;">
</div>
</li>
                        <li><div style="font-size:0.9em;padding:0.5em 0;">
<a href="/profile/voidmax" title="Grandmaster voidmax" class="rated-user user-red">voidmax</a>        
        <a href="/blog/entry/58991">Editorial Tinkoff Internship Warmup Round 2018 and Codeforces Round #475 (Div. 1) </a>
&nbsp;&nbsp;<img alt="New comment(s)" title="New comment(s)" src="http://st.codeforces.com/s/21816/images/icons/comment-12x12.png" style="vertical-align:middle;">
</div>
</li>
                        <li><div style="font-size:0.9em;padding:0.5em 0;">
<a href="/profile/voidmax" title="Grandmaster voidmax" class="rated-user user-red">voidmax</a>        
        <a href="/blog/entry/58959">Tinkoff Internship Warmup Round 2018 and Codeforces Round #475 </a>
&nbsp;&nbsp;<img alt="New comment(s)" title="New comment(s)" src="http://st.codeforces.com/s/21816/images/icons/comment-12x12.png" style="vertical-align:middle;">
</div>
</li>
                        <li><div style="font-size:0.9em;padding:0.5em 0;">
<a href="/profile/NeverSayNever" title="Expert NeverSayNever" class="rated-user user-blue">NeverSayNever</a>        
        <a href="/blog/entry/14073">LCMSUM</a>
&nbsp;&nbsp;<img alt="New comment(s)" title="New comment(s)" src="http://st.codeforces.com/s/21816/images/icons/comment-12x12.png" style="vertical-align:middle;">
</div>
</li>
                        <li><div style="font-size:0.9em;padding:0.5em 0;">
<a href="/profile/hmehta" title="Unrated, hmehta" class="rated-user user-black">hmehta</a>        
        <a href="/blog/entry/58874">Topcoder SRM 733</a>
&nbsp;&nbsp;<img alt="New comment(s)" title="New comment(s)" src="http://st.codeforces.com/s/21816/images/icons/comment-12x12.png" style="vertical-align:middle;">
</div>
</li>
                        <li><div style="font-size:0.9em;padding:0.5em 0;">
<a href="/profile/code_report" title="Specialist code_report" class="rated-user user-cyan">code_report</a>        
        <a href="/blog/entry/58938">topcoder SRM 733 Div 2 (Video Solutions)</a>
&nbsp;&nbsp;<img alt="Text created or updated" title="Text created or updated" src="http://st.codeforces.com/s/21816/images/icons/x-update-12x12.png" style="vertical-align:middle;">
</div>
</li>
                        <li><div style="font-size:0.9em;padding:0.5em 0;">
<a href="/profile/cyand1317" title="Grandmaster cyand1317" class="rated-user user-red">cyand1317</a>        
        <a href="/blog/entry/58544">VK Cup 2018 Round 2 and Codeforces Round #472 Editorial</a>
&nbsp;&nbsp;<img alt="New comment(s)" title="New comment(s)" src="http://st.codeforces.com/s/21816/images/icons/comment-12x12.png" style="vertical-align:middle;">
</div>
</li>
                        <li><div style="font-size:0.9em;padding:0.5em 0;">
<a href="/profile/want_2b_expert" title="Pupil want_2b_expert" class="rated-user user-green">want_2b_expert</a>        
        <a href="/blog/entry/58988">How to solve this problem in dp?</a>
&nbsp;&nbsp;<img alt="Text created or updated" title="Text created or updated" src="http://st.codeforces.com/s/21816/images/icons/x-update-12x12.png" style="vertical-align:middle;">
</div>
</li>
                        <li><div style="font-size:0.9em;padding:0.5em 0;">
<a href="/profile/rahulkhairwar" title="Specialist rahulkhairwar" class="rated-user user-cyan">rahulkhairwar</a>        
        <a href="/blog/entry/58981">BUG : Solved problems shown in Last Unsolved</a>
&nbsp;&nbsp;<img alt="New comment(s)" title="New comment(s)" src="http://st.codeforces.com/s/21816/images/icons/comment-12x12.png" style="vertical-align:middle;">
</div>
</li>
                        <li><div style="font-size:0.9em;padding:0.5em 0;">
<a href="/profile/DarthPrince" title="Master DarthPrince" class="rated-user user-orange">DarthPrince</a>        
        <a href="/blog/entry/15890">Algorithm Gym :: Everything About Segment Trees</a>
&nbsp;&nbsp;<img alt="New comment(s)" title="New comment(s)" src="http://st.codeforces.com/s/21816/images/icons/comment-12x12.png" style="vertical-align:middle;">
</div>
</li>
                        <li><div style="font-size:0.9em;padding:0.5em 0;">
<a href="/profile/OO0OOO00O0OOO0O00OOO0OO" title="Legendary grandmaster OO0OOO00O0OOO0O00OOO0OO" class="rated-user user-legendary"><span class="legendary-user-first-letter">O</span>O0OOO00O0OOO0O00OOO0OO</a>        
        <a href="/blog/entry/58983">Another ACM ICPC 2018 World Finals stream</a>
&nbsp;&nbsp;<img alt="New comment(s)" title="New comment(s)" src="http://st.codeforces.com/s/21816/images/icons/comment-12x12.png" style="vertical-align:middle;">
</div>
</li>
                        <li><div style="font-size:0.9em;padding:0.5em 0;">
<a href="/profile/Petr" title="Legendary grandmaster Petr" class="rated-user user-legendary"><span class="legendary-user-first-letter">P</span>etr</a>        
        <a href="/blog/entry/58985">A second extremal week</a>
&nbsp;&nbsp;<img alt="Text created or updated" title="Text created or updated" src="http://st.codeforces.com/s/21816/images/icons/x-update-12x12.png" style="vertical-align:middle;">
</div>
</li>
                        <li><div style="font-size:0.9em;padding:0.5em 0;">
<a href="/profile/mgch" title="Master mgch" class="rated-user user-orange">mgch</a>        
        <a href="/blog/entry/58744">Invitation to CodeChef April Long Challenge 2018!</a>
&nbsp;&nbsp;<img alt="New comment(s)" title="New comment(s)" src="http://st.codeforces.com/s/21816/images/icons/comment-12x12.png" style="vertical-align:middle;">
</div>
</li>
            </ul>
        </div>
            <div class="bottom-links">
                <table style="width:100%;">
                    <tbody>
                        <tr>
                            <td style="text-align:left;">
                            </td>
                            <td style="text-align:right;">
                                    <a href="/recent-actions">Detailed </a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
    </div>
</div>
                        <div id="pageContent" class="content-with-sidebar">
                    <div class="second-level-menu">
<ul class="second-level-menu-list"><li class="backLava" style="position: absolute; display: block; margin: 0px; padding: 0px; left: 78.203125px; top: 0px; width: 40px; height: 20px;"><div class="leftLava"></div><div class="bottomLava"></div><div class="cornerLava"></div></li>
        <li><a href="/profile/DarthPrince">DarthPrince</a></li>
        <li class="current selectedLava"><a href="/blog/DarthPrince">Blog</a></li>
        <li><a href="/teams/with/DarthPrince">Teams</a></li>
        <li><a href="/submissions/DarthPrince">Submissions</a></li>
        <li><a href="/groups/with/DarthPrince">Groups</a></li>
        <li><a href="/contests/with/DarthPrince">Contests</a></li>
        <li><a href="/contests/writer/DarthPrince">Problemsetting</a></li>
</ul>
</div>
    <div style="margin-top:0;">
    <div>
        <h3><a href="/blog/DarthPrince" style="text-decoration:none;color:black !important;">DarthPrince's blog</a></h3>
    </div>
        <div style="margin-top:2em;">


<div class="topic" topicid="15948">
    <div class="title">
            <a href="/blog/entry/15890">            <p>Algorithm Gym :: Everything About Segment Trees</p>
</a>
    </div>

    <div class="info" style="position:relative;">
            By&nbsp;<a href="/profile/DarthPrince" title="Master DarthPrince" class="rated-user user-orange">DarthPrince</a>,
                <span class="format-humantime" title="Jan/19/2015 14:15 UTC">3 years ago</span>,
            
            <img style="position: relative;top: 5px;" src="http://st.codeforces.com/s/21816/images/flags/24/gb.png" alt="In English" title="In English">,

<a class="attach-blogEntry-15890-to-contest-link" href="#"><img src="http://st.codeforces.com/s/21816/images/icons/paperclip-16x16.png" title="Attach this blog to some contest as a resource"></a>

<style type="text/css">
    .attach-blogEntry-15890-to-contest-form tr:not(:last-of-type) td {
        padding-bottom: 1em;
    }

    .blogEntry-15890-error {
        font-size: 1.1rem;
    }
</style>

<div class="attach-blogEntry-15890-to-contest-form-holder" style="display: none;padding: 1em;margin: 1em;">
    <form class="attach-blogEntry-15890-to-contest-form" method="post"><input type="hidden" name="csrf_token" value="cb69324bfcd030bad5d4bcf28f3df782">
        <table style="width: 100%;">
            <thead>
            </thead>
            <tbody>
        <tr class="subscription-row blogEntry-15890-blogId-error blogEntry-15890-error" style="display: none;">
            <td>&nbsp;</td>
        <td colspan="2"><div class="shiftUp">        <span class="error for__blogEntry-15890-blogId">-</span>
</div></td>
        </tr>
            <tr>
                <td style="width: 30%;"><label for="blogEntry-15890-contestId">Contest:</label></td>
                <td>
                    <select id="blogEntry-15890-contestId" name="contestId" style="width: 100%;float: left;" disabled="">
                        <option value=""></option>
                    </select>
                </td>
                <td>
                    <img id="blogEntry-15890-contestId-loading-indicator" src="http://st.codeforces.com/s/21816/images/indicator.gif">
                </td>
            </tr>
        <tr class="subscription-row blogEntry-15890-contestId-error blogEntry-15890-error" style="display: none;">
            <td>&nbsp;</td>
        <td colspan="2"><div class="shiftUp">        <span class="error for__blogEntry-15890-contestId">-</span>
</div></td>
        </tr>
            <tr>
                <td style="width: 30%;"><label for="blogEntry-15890-resourceType">Type:</label></td>
                <td>
                    <select id="blogEntry-15890-resourceType" name="resourceType" style="width: 100%;">
                        <option value="" selected=""></option>
                        <option value="STATEMENT">statements</option>
                        <option value="TUTORIAL">tutorial</option>
                        <option value="ANNOUNCEMENT">announcement</option>
                        <option value="DISCUSSION">discussion</option>
                    </select>
                </td>
                <td></td>
            </tr>
        <tr class="subscription-row blogEntry-15890-resourceType-error blogEntry-15890-error" style="display: none;">
            <td>&nbsp;</td>
        <td colspan="2"><div class="shiftUp">        <span class="error for__blogEntry-15890-resourceType">-</span>
</div></td>
        </tr>
            <tr>
                <td colspan="2" style="text-align: center;">
                    <input type="submit" id="blogEntry-15890-resource-submit" value="Attach" disabled="" style="padding: 0.25em 0.5em;margin: 1em;width: 8em;">
                </td>
                <td>
                    <img id="blogEntry-15890-resource-submitting-indicator" src="http://st.codeforces.com/s/21816/images/indicator.gif" style="display: none;">
                </td>
            </tr>
            </tbody>
        </table>
    <input type="hidden" name="_tta" value="227"></form>
</div>

<script type="text/javascript">
    $(document).ready(function () {
        $(".blogEntry-15890-error").hide();

        $(".attach-blogEntry-15890-to-contest-link").click(function () {
            Codeforces.facebox(".attach-blogEntry-15890-to-contest-form-holder", "http://st.codeforces.com/s/21816");

            $("#facebox .attach-blogEntry-15890-to-contest-form").submit(function () {
                if ($(this).find(":disabled").length === 0) {
                    $("#facebox .blogEntry-15890-error").hide();
                    $("#facebox #blogEntry-15890-resource-submitting-indicator").show();
                    $("#facebox #blogEntry-15890-resource-submit").attr("disabled", "disabled");

                    //noinspection JSUnusedGlobalSymbols
                    $.post("/data/blogAndContest?action=attachBlogToContest", {
                        blogId:"39093", contestId:$("#facebox #blogEntry-15890-contestId").val(),
                        blogEntryId:"15890",
                        resourceType:$("#facebox #blogEntry-15890-resourceType").val()
                    }, function (json) {
                        var validated = true;

                        for (var key in json) {
                            if (json.hasOwnProperty(key) && key.indexOf("error__") === 0) {
                                validated = false;
                                $("#facebox .blogEntry-15890-" + key.substring("error__".length) + "-error").show();
                                $("#facebox .for__blogEntry-15890-" + key.substring("error__".length)).text(json[key]);
                            }
                        }

                        $("#facebox #blogEntry-15890-resource-submitting-indicator").hide();
                        $("#facebox #blogEntry-15890-resource-submit").removeAttr("disabled");

                        if (validated) {
                            $.facebox.close();
                            if (json["success"] === "true") {
                                Codeforces.showMessage("Blog has been successfully attached to selected contest");
                            } else {
                                Codeforces.showMessage("There is unexpected error while attaching blog to the contest");
                            }
                        }
                    }, "json");
                }

                return false;
            });

            var contestSelect = $("#blogEntry-15890-contestId");
            var popupContestSelect = $("#facebox #blogEntry-15890-contestId");

            if (popupContestSelect.is(":disabled")) {
                $.post("/data/contests?action=getContestListWithEditableResources", function (data) {
                    if (data["result"] === "success") {
                        var contests = data["contests"];

                        for (var i = 0, contestCount = contests.length; i < contestCount; ++i) {
                            //noinspection StringLiteralBreaksHTMLJS
                            var contestOptionHtml = "<option value=\"" + contests[i]["id"] + "\">"
                                    + contests[i]["id"] + " - " + contests[i]["name"] + "</option>";
                            contestSelect.append(contestOptionHtml);
                            popupContestSelect.append(contestOptionHtml);
                        }

                        contestSelect.removeAttr("disabled");
                        $("#blogEntry-15890-contestId-loading-indicator").hide();
                        $("#blogEntry-15890-resource-submit").removeAttr("disabled");

                        popupContestSelect.removeAttr("disabled");
                        $("#facebox #blogEntry-15890-contestId-loading-indicator").hide();
                        $("#facebox #blogEntry-15890-resource-submit").removeAttr("disabled");
                    } else {
                        alert("Can't receive contest list");
                    }
                }, "json");
            }

            return false;
        });
    });
</script>



        <span style="position:absolute;right:0;top:0.05em;margin-right:1em;display:inline;font-size:0.75em;">
            <div style="margin-top:0.25em;">
            </div>
        </span>
    </div>

    <div class="content">
        <div class="ttypography"><p>In the last lecture of <strong>Algorithm Gym</strong> (<a href="/blog/entry/15729">Data Structures</a>), I introduced you Segment trees.</p><p>In this lecture, I want to tell you more about its usages and we will solve some serious problems together. Segment tree types : </p><h2>Classic Segment Tree</h2><p>Classic, is the way I call it. This type of segment tree, is the most simple and common type. In this kind of segment trees, for each node, we should keep some simple elements, like integers or boolians or etc.</p><p>This kind of problems don't have update queries on intervals.</p><p>Example 1 (Online):</p><p>Problem <a href="/contest/380/problem/C" title="Codeforces Round 223 (Div. 1)">380C - Sereja and Brackets</a> :</p><p>For each node (for example <span class="tex-span"><i>x</i></span>), we keep three integers : 1.<code class="tt">t[x]</code> = Answer for it's interval. 2. <code class="tt">o[x]</code> = The number of $($s after deleting the brackets who belong to the correct bracket sequence in this interval whit length <code class="tt">t[x]</code>. 3. <code class="tt">c[x]</code> = The number of $)$s after deleting the brackets who belong to the correct bracket sequence in this interval whit length <code class="tt">t[x]</code>.</p><p>Lemma : For merging to nodes <span class="tex-span">2<i>x</i></span> and <span class="tex-span">2<i>x</i>+1</span> (children of node <span class="tex-span">2<i>x</i>+1</span>) all we need to do is this :</p> <pre><code class="prettyprint"><span class="pln">tmp </span><span class="pun">=</span><span class="pln"> min</span><span class="pun">(</span><span class="pln">o</span><span class="pun">[</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> x</span><span class="pun">],</span><span class="pln"> c</span><span class="pun">[</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> x </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">])</span><span class="pln">
t</span><span class="pun">[</span><span class="pln">x</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> t</span><span class="pun">[</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> x</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> t</span><span class="pun">[</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> x </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> tmp
o</span><span class="pun">[</span><span class="pln">x</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> o</span><span class="pun">[</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> x</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> o</span><span class="pun">[</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> x </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> tmp
c</span><span class="pun">[</span><span class="pln">x</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> c</span><span class="pun">[</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> x</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> c</span><span class="pun">[</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> x </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> tmp</span></code></pre><p>So, as you know, first of all we need a <span class="tex-span"><i>build</i></span> function which would be this : (as above) (C++ and <span class="tex-span">[<i>l</i>,<i>r</i>)</span> is inclusive-outclusive )</p> <pre><code class="prettyprint"><span class="kwd">void</span><span class="pln"> build</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> id </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> l </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> r </span><span class="pun">=</span><span class="pln"> n</span><span class="pun">){</span><span class="pln">
    </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">r </span><span class="pun">-</span><span class="pln"> l </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">2</span><span class="pun">){</span><span class="pln">
        </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">s</span><span class="pun">[</span><span class="pln">l</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'('</span><span class="pun">)</span><span class="pln">
            o</span><span class="pun">[</span><span class="pln">id</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">else</span><span class="pln">
            c</span><span class="pun">[</span><span class="pln">id</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> mid </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">l</span><span class="pun">+</span><span class="pln">r</span><span class="pun">)/</span><span class="lit">2</span><span class="pun">;</span><span class="pln">
    build</span><span class="pun">(</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> id</span><span class="pun">,</span><span class="pln">l</span><span class="pun">,</span><span class="pln">mid</span><span class="pun">);</span><span class="pln">
    build</span><span class="pun">(</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> id </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln">mid</span><span class="pun">,</span><span class="pln">r</span><span class="pun">);</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> tmp </span><span class="pun">=</span><span class="pln"> min</span><span class="pun">(</span><span class="pln">o</span><span class="pun">[</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> id</span><span class="pun">],</span><span class="pln">c</span><span class="pun">[</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> id </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">]);</span><span class="pln">
    t</span><span class="pun">[</span><span class="pln">id</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> t</span><span class="pun">[</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> id</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> t</span><span class="pun">[</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> id </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> tmp</span><span class="pun">;</span><span class="pln">
    o</span><span class="pun">[</span><span class="pln">id</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> o</span><span class="pun">[</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> id</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> o</span><span class="pun">[</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> id </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> tmp</span><span class="pun">;</span><span class="pln">
    c</span><span class="pun">[</span><span class="pln">id</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> c</span><span class="pun">[</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> id</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> c</span><span class="pun">[</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> id </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> tmp</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></code></pre><p>For queries, return value of the function should be 3 values : <span class="tex-span"><i>t</i>,<i>o</i>,<i>c</i></span> which is the values I said above for the intersection of the node's interval and the query's interval (we consider query's interval is <span class="tex-span">[<i>x</i>,<i>y</i>)</span> ), so in C++ code, return value is a <code class="tt">pair&lt;int,pair&lt;int,int&gt; &gt;</code> (<code class="tt">pair&lt;t, pair&lt;o,c&gt; &gt;</code>) :</p> <pre><code class="prettyprint"><span class="kwd">typedef</span><span class="pln"> pair</span><span class="pun">&lt;</span><span class="kwd">int</span><span class="pun">,</span><span class="kwd">int</span><span class="pun">&gt;</span><span class="pln">pii</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">typedef</span><span class="pln"> pair</span><span class="pun">&lt;</span><span class="kwd">int</span><span class="pun">,</span><span class="pln">pii</span><span class="pun">&gt;</span><span class="pln">   node</span><span class="pun">;</span><span class="pln">
node segment</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> x</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> y</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> id </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> l </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> r </span><span class="pun">=</span><span class="pln"> n</span><span class="pun">){</span><span class="pln">
    </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">l </span><span class="pun">&gt;=</span><span class="pln"> y </span><span class="pun">||</span><span class="pln"> x </span><span class="pun">&gt;=</span><span class="pln"> r</span><span class="pun">)</span><span class="pln">   </span><span class="kwd">return</span><span class="pln"> node</span><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="pln">pii</span><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">));</span><span class="pln">
    </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">x </span><span class="pun">&lt;=</span><span class="pln"> l </span><span class="pun">&amp;&amp;</span><span class="pln"> r </span><span class="pun">&lt;=</span><span class="pln"> y</span><span class="pun">)</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> node</span><span class="pun">(</span><span class="pln">t</span><span class="pun">[</span><span class="pln">id</span><span class="pun">],</span><span class="pln">pii</span><span class="pun">(</span><span class="pln">o</span><span class="pun">[</span><span class="pln">id</span><span class="pun">],</span><span class="pln">c</span><span class="pun">[</span><span class="pln">id</span><span class="pun">]));</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> mid </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">l</span><span class="pun">+</span><span class="pln">r</span><span class="pun">)/</span><span class="lit">2</span><span class="pun">;</span><span class="pln">
    node a </span><span class="pun">=</span><span class="pln"> segment</span><span class="pun">(</span><span class="pln">x</span><span class="pun">,</span><span class="pln">y</span><span class="pun">,</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> id</span><span class="pun">,</span><span class="pln">l</span><span class="pun">,</span><span class="pln">mid</span><span class="pun">),</span><span class="pln"> b </span><span class="pun">=</span><span class="pln"> segment</span><span class="pun">(</span><span class="pln">x</span><span class="pun">,</span><span class="pln">y</span><span class="pun">,</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> id </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln">mid</span><span class="pun">,</span><span class="pln">r</span><span class="pun">);</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> T</span><span class="pun">,</span><span class="pln"> temp</span><span class="pun">,</span><span class="pln"> O</span><span class="pun">,</span><span class="pln"> C</span><span class="pun">;</span><span class="pln">
    temp </span><span class="pun">=</span><span class="pln"> min</span><span class="pun">(</span><span class="pln">a</span><span class="pun">.</span><span class="pln">y</span><span class="pun">.</span><span class="pln">x </span><span class="pun">,</span><span class="pln"> b</span><span class="pun">.</span><span class="pln">y</span><span class="pun">.</span><span class="pln">y</span><span class="pun">);</span><span class="pln">
    T </span><span class="pun">=</span><span class="pln"> a</span><span class="pun">.</span><span class="pln">x </span><span class="pun">+</span><span class="pln"> b</span><span class="pun">.</span><span class="pln">x </span><span class="pun">+</span><span class="pln"> temp</span><span class="pun">;</span><span class="pln">
    O </span><span class="pun">=</span><span class="pln"> a</span><span class="pun">.</span><span class="pln">y</span><span class="pun">.</span><span class="pln">x </span><span class="pun">+</span><span class="pln"> b</span><span class="pun">.</span><span class="pln">y</span><span class="pun">.</span><span class="pln">x </span><span class="pun">-</span><span class="pln"> temp</span><span class="pun">;</span><span class="pln">
        C </span><span class="pun">=</span><span class="pln"> a</span><span class="pun">.</span><span class="pln">y</span><span class="pun">.</span><span class="pln">y </span><span class="pun">+</span><span class="pln"> b</span><span class="pun">.</span><span class="pln">y</span><span class="pun">.</span><span class="pln">y </span><span class="pun">-</span><span class="pln"> temp</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> node</span><span class="pun">(</span><span class="pln">T</span><span class="pun">,</span><span class="pln">pii</span><span class="pun">(</span><span class="pln">O</span><span class="pun">,</span><span class="pln">C</span><span class="pun">));</span><span class="pln">    
</span><span class="pun">}</span></code></pre><p>Example 2 (Offline): Problem <a href="http://www.spoj.com/problems/KQUERY/">KQUERY</a></p><p>Imagine we have an array <span class="tex-span"><i>b</i><sub class="lower-index">1</sub>,<i>b</i><sub class="lower-index">2</sub>,...,<i>b</i><sub class="lower-index"><i>n</i></sub></span> which, <img align="middle" class="tex-formula" src="/predownloaded/48/6b/486b8aca7fba5ed3554387de064d113b860d9399.png" style="max-width: 100.0%;max-height: 100.0%;"> and <span class="tex-span"><i>b</i><sub class="lower-index"><i>i</i></sub>=1</span> if an only if <span class="tex-span"><i>a</i><sub class="lower-index"><i>i</i></sub>&gt;<i>k</i></span>, then we can easily answer the query <span class="tex-span">(<i>i</i>,<i>j</i>,<i>k</i>)</span> in <span class="tex-span"><i>O</i>(<i>log</i>(<i>n</i>))</span> using a simple segment tree (answer is <span class="tex-span"><i>b</i><sub class="lower-index"><i>i</i></sub>+<i>b</i><sub class="lower-index"><i>i</i>+1</sub>+...+<i>b</i><sub class="lower-index"><i>j</i></sub></span> ).</p><p>We can do this ! We can answer the queries offline.</p><p>First of all, read all the queries and save them somewhere, then sort them in increasing order of <span class="tex-span"><i>k</i></span> and also the array <span class="tex-span"><i>a</i></span> in increasing order (compute the permutation <span class="tex-span"><i>p</i><sub class="lower-index">1</sub>,<i>p</i><sub class="lower-index">2</sub>,...,<i>p</i><sub class="lower-index"><i>n</i></sub></span> where <span class="tex-span"><i>a</i><sub class="lower-index"><i>p</i><sub class="lower-index">1</sub></sub><i>a</i><sub class="lower-index"><i>p</i><sub class="lower-index">2</sub></sub>...<i>a</i><sub class="lower-index"><i>p</i><sub class="lower-index"><i>n</i></sub></sub></span>)</p><p>At first we'll set all array <span class="tex-span"><i>b</i></span> to <span class="tex-span">1</span> and we will set all of them to <span class="tex-span">0</span> one by one.</p><p>Consider after sorting the queries in increasing order of their <span class="tex-span"><i>k</i></span>, we have a permutation <span class="tex-span"><i>w</i><sub class="lower-index">1</sub>,<i>w</i><sub class="lower-index">2</sub>,...,<i>w</i><sub class="lower-index"><i>q</i></sub></span> (of <span class="tex-span">1,2,...,<i>q</i></span>) where <span class="tex-span"><i>k</i><sub class="lower-index"><i>w</i><sub class="lower-index">1</sub></sub><i>k</i><sub class="lower-index"><i>w</i><sub class="lower-index">2</sub></sub><i>k</i><sub class="lower-index"><i>w</i><sub class="lower-index">2</sub></sub>...<i>k</i><sub class="lower-index"><i>w</i><sub class="lower-index"><i>q</i></sub></sub></span> (we keep the answer to the <span class="tex-span"><i>i</i>-<i>th</i></span> query in <span class="tex-span"><i>ans</i><sub class="lower-index"><i>i</i></sub></span> .</p><p>Pseudo code : (all 0-based)</p> <pre><code class="prettyprint"><span class="pln">po </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln">
</span><span class="kwd">for</span><span class="pln"> j </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> to q</span><span class="pun">-</span><span class="lit">1</span><span class="pln">
	</span><span class="kwd">while</span><span class="pln"> po </span><span class="pun">&lt;</span><span class="pln"> n </span><span class="kwd">and</span><span class="pln"> a</span><span class="pun">[</span><span class="pln">p</span><span class="pun">[</span><span class="pln">po</span><span class="pun">]]</span><span class="pln"> </span><span class="pun">&lt;=</span><span class="pln"> k</span><span class="pun">[</span><span class="pln">w</span><span class="pun">[</span><span class="pln">j</span><span class="pun">]]</span><span class="pln">
		b</span><span class="pun">[</span><span class="pln">p</span><span class="pun">[</span><span class="pln">po</span><span class="pun">]]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> po </span><span class="pun">=</span><span class="pln"> po </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span></code></pre><p>So, build function would be like this (<span class="tex-span"><i>s</i>[<i>x</i>]</span> is the sum of <span class="tex-span"><i>b</i></span> in the interval of node <span class="tex-span"><i>x</i></span>) :</p> <pre><code class="prettyprint"><span class="kwd">void</span><span class="pln"> build</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> id </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> l </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> r </span><span class="pun">=</span><span class="pln"> n</span><span class="pun">){</span><span class="pln">
	</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">r </span><span class="pun">-</span><span class="pln"> l </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">2</span><span class="pun">){</span><span class="pln">
		s</span><span class="pun">[</span><span class="pln">id</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln">
		</span><span class="kwd">return</span><span class="pln"> </span><span class="pun">;</span><span class="pln">
	</span><span class="pun">}</span><span class="pln">
	</span><span class="kwd">int</span><span class="pln"> mid </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">l</span><span class="pun">+</span><span class="pln">r</span><span class="pun">)/</span><span class="lit">2</span><span class="pun">;</span><span class="pln">
	build</span><span class="pun">(</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> l</span><span class="pun">,</span><span class="pln"> mid</span><span class="pun">);</span><span class="pln">
	build</span><span class="pun">(</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> id </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> mid</span><span class="pun">,</span><span class="pln"> r</span><span class="pun">);</span><span class="pln">
	s</span><span class="pun">[</span><span class="pln">id</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> s</span><span class="pun">[</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> id</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> s</span><span class="pun">[</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> id </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">];</span><span class="pln">
</span><span class="pun">}</span></code></pre><p>et An update function for when we want to st <code class="tt">b[p[po]] = 0</code> to update the segment tree: </p> <pre><code class="prettyprint"><span class="kwd">void</span><span class="pln"> update</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> p</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> id </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> l </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> r </span><span class="pun">=</span><span class="pln"> n</span><span class="pun">){</span><span class="pln">
	</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">r </span><span class="pun">-</span><span class="pln"> l </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">2</span><span class="pun">){</span><span class="pln">
		s</span><span class="pun">[</span><span class="pln">id</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
		</span><span class="kwd">return</span><span class="pln"> </span><span class="pun">;</span><span class="pln">
	</span><span class="pun">}</span><span class="pln">
	</span><span class="kwd">int</span><span class="pln"> mid </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">l</span><span class="pun">+</span><span class="pln">r</span><span class="pun">)/</span><span class="lit">2</span><span class="pun">;</span><span class="pln">
	</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">p </span><span class="pun">&lt;</span><span class="pln"> mid</span><span class="pun">)</span><span class="pln">
		update</span><span class="pun">(</span><span class="pln">p</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> l</span><span class="pun">,</span><span class="pln"> mid</span><span class="pun">);</span><span class="pln">
	</span><span class="kwd">else</span><span class="pln">
		update</span><span class="pun">(</span><span class="pln">p</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> id </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> mid</span><span class="pun">,</span><span class="pln"> r</span><span class="pun">);</span><span class="pln">
	s</span><span class="pun">[</span><span class="pln">id</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> s</span><span class="pun">[</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> id</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> s</span><span class="pun">[</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> id </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">];</span><span class="pln">
</span><span class="pun">}</span></code></pre><p>Finally, a function for sum of an interval</p> <pre><code class="prettyprint"><span class="kwd">int</span><span class="pln"> sum</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> x</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> y</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> id </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> l </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> r </span><span class="pun">=</span><span class="pln"> n</span><span class="pun">){</span><span class="com">// [x, y)</span><span class="pln">
	</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">x </span><span class="pun">&gt;=</span><span class="pln"> r </span><span class="kwd">or</span><span class="pln"> l </span><span class="pun">&gt;=</span><span class="pln"> y</span><span class="pun">)</span><span class="pln">	</span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="com">// [x, y) intersection [l,r) = empty</span><span class="pln">
	</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">x </span><span class="pun">&lt;=</span><span class="pln"> l </span><span class="pun">&amp;&amp;</span><span class="pln"> r </span><span class="pun">&lt;=</span><span class="pln"> y</span><span class="pun">)</span><span class="pln">	</span><span class="com">// [l,r) is a subset of [x,y)</span><span class="pln">
		</span><span class="kwd">return</span><span class="pln"> s</span><span class="pun">[</span><span class="pln">id</span><span class="pun">];</span><span class="pln">
	</span><span class="kwd">int</span><span class="pln"> mid </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">l </span><span class="pun">+</span><span class="pln"> r</span><span class="pun">)/</span><span class="lit">2</span><span class="pun">;</span><span class="pln">
	</span><span class="kwd">return</span><span class="pln"> sum</span><span class="pun">(</span><span class="pln">x</span><span class="pun">,</span><span class="pln"> y</span><span class="pun">,</span><span class="pln"> id </span><span class="pun">*</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> l</span><span class="pun">,</span><span class="pln"> mid</span><span class="pun">)</span><span class="pln"> </span><span class="pun">+</span><span class="pln">
	       sum</span><span class="pun">(</span><span class="pln">x</span><span class="pun">,</span><span class="pln"> y</span><span class="pun">,</span><span class="pln"> id</span><span class="pun">*</span><span class="lit">2</span><span class="pun">+</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> mid</span><span class="pun">,</span><span class="pln"> r</span><span class="pun">)</span><span class="pln"> </span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span></code></pre><p>So, in main function instead of that pseudo code, we will use this :</p> <pre><code class="prettyprint"><span class="pln">build</span><span class="pun">();</span><span class="pln">
</span><span class="kwd">int</span><span class="pln"> po </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> y </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">y </span><span class="pun">&lt;</span><span class="pln"> q</span><span class="pun">;++</span><span class="pln"> y</span><span class="pun">){</span><span class="pln">
	</span><span class="kwd">int</span><span class="pln"> x </span><span class="pun">=</span><span class="pln"> w</span><span class="pun">[</span><span class="pln">y</span><span class="pun">];</span><span class="pln">
	</span><span class="kwd">while</span><span class="pun">(</span><span class="pln">po </span><span class="pun">&lt;</span><span class="pln"> n </span><span class="pun">&amp;&amp;</span><span class="pln"> a</span><span class="pun">[</span><span class="pln">p</span><span class="pun">[</span><span class="pln">po</span><span class="pun">]]</span><span class="pln"> </span><span class="pun">&lt;=</span><span class="pln"> k</span><span class="pun">[</span><span class="pln">x</span><span class="pun">])</span><span class="pln">
		update</span><span class="pun">(</span><span class="pln">p</span><span class="pun">[</span><span class="pln">po </span><span class="pun">++]);</span><span class="pln">
	ans</span><span class="pun">[</span><span class="pln">x</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> sum</span><span class="pun">(</span><span class="pln">i</span><span class="pun">[</span><span class="pln">x</span><span class="pun">],</span><span class="pln"> j</span><span class="pun">[</span><span class="pln">x</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">);</span><span class="pln"> </span><span class="com">// the interval [i[x], j[x] + 1)</span><span class="pln">
</span><span class="pun">}</span></code></pre><h2>Lazy Propagation</h2><p>I told you enough about lazy propagation in the last lecture. In this lecture, I want to solve ans example .</p><p>Example : Problem <a href="http://www.spoj.com/problems/POSTERS/">POSTERS</a>.</p><p>We don't need all elements in the interval <span class="tex-span">[1,10<sup class="upper-index">7</sup>]</span>. The only thing we need is the set <span class="tex-span"><i>s</i><sub class="lower-index">1</sub>,<i>s</i><sub class="lower-index">2</sub>,...,<i>s</i><sub class="lower-index"><i>k</i></sub></span> where for each <span class="tex-span"><i>i</i></span>, <span class="tex-span"><i>s</i><sub class="lower-index"><i>i</i></sub></span> is at least <span class="tex-span"><i>l</i></span> or <span class="tex-span"><i>r</i></span> in one of the queries.</p><p>We can use interval <span class="tex-span">1,2,...,<i>k</i></span> instead of that (each query is running in this interval, in code, we use 0-based, I mean <span class="tex-span">[0,<i>k</i>)</span> ). For the <span class="tex-span"><i>i</i>-<i>th</i></span> query, we will paint all the interval <span class="tex-span">[<i>l</i>,<i>r</i>]</span> whit color <span class="tex-span"><i>i</i></span> (1-based).</p><p>For each interval, if all it's interval is from the same color, I will keep that color for it and update the nodes using lazy propagation.</p><p>So,we will have a value <span class="tex-span"><i>lazy</i></span> for each node and there is no any build function (if <span class="tex-span"><i>lazy</i>[<i>i</i>]0</span> then all the interval of node <span class="tex-span"><i>i</i></span> is from the same color (color <span class="tex-span"><i>lazy</i>[<i>i</i>]</span>) and we haven't yet shifted the updates to its children. Every member of <span class="tex-span"><i>lazy</i></span> is <span class="tex-span">0</span> at first).</p><p>A function for shifting the updates to a node, to its children using lazy propagation :</p> <pre><code class="prettyprint"><span class="kwd">void</span><span class="pln"> shift</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> id</span><span class="pun">){</span><span class="pln">
	</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">lazy</span><span class="pun">[</span><span class="pln">id</span><span class="pun">])</span><span class="pln">
		lazy</span><span class="pun">[</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="kwd">is</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> lazy</span><span class="pun">[</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> id </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> lazy</span><span class="pun">[</span><span class="pln">id</span><span class="pun">];</span><span class="pln">
	lazy</span><span class="pun">[</span><span class="pln">id</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></code></pre><p>Update (paint) function (for queries) :</p> <pre><code class="prettyprint"><span class="kwd">void</span><span class="pln"> upd</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> x</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> y</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> color</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> id </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> l </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> r </span><span class="pun">=</span><span class="pln"> n</span><span class="pun">){</span><span class="com">//painting the interval [x,y) whith color "color"</span><span class="pln">
	</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">x </span><span class="pun">&gt;=</span><span class="pln"> r </span><span class="kwd">or</span><span class="pln"> l </span><span class="pun">&gt;=</span><span class="pln"> y</span><span class="pun">)</span><span class="pln">	</span><span class="kwd">return</span><span class="pln"> </span><span class="pun">;</span><span class="pln">
	</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">x </span><span class="pun">&lt;=</span><span class="pln"> l </span><span class="pun">&amp;&amp;</span><span class="pln"> r </span><span class="pun">&lt;=</span><span class="pln"> y</span><span class="pun">){</span><span class="pln">
		lazy</span><span class="pun">[</span><span class="pln">id</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> color</span><span class="pun">;</span><span class="pln">
		</span><span class="kwd">return</span><span class="pln"> </span><span class="pun">;</span><span class="pln">
	</span><span class="pun">}</span><span class="pln">
	</span><span class="kwd">int</span><span class="pln"> mid </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">l</span><span class="pun">+</span><span class="pln">r</span><span class="pun">)/</span><span class="lit">2</span><span class="pun">;</span><span class="pln">
	shift</span><span class="pun">(</span><span class="pln">id</span><span class="pun">);</span><span class="pln">
	upd</span><span class="pun">(</span><span class="pln">x</span><span class="pun">,</span><span class="pln"> y</span><span class="pun">,</span><span class="pln"> color</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> l</span><span class="pun">,</span><span class="pln"> mid</span><span class="pun">);</span><span class="pln">
	upd</span><span class="pun">(</span><span class="pln">x</span><span class="pun">,</span><span class="pln"> y</span><span class="pun">,</span><span class="pln"> color</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">*</span><span class="pln">id</span><span class="pun">+</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> mid</span><span class="pun">,</span><span class="pln"> r</span><span class="pun">);</span><span class="pln">
</span><span class="pun">}</span></code></pre><p>So, for each query you should call <span class="tex-span"><i>upd</i>(<i>x</i>,<i>y</i>+1,<i>i</i>)</span> (<span class="tex-span"><i>i</i></span> is the query's 1-base index) where <span class="tex-span"><i>s</i><sub class="lower-index"><i>x</i></sub>=<i>l</i></span> and <span class="tex-span"><i>s</i><sub class="lower-index"><i>y</i></sub>=<i>r</i></span> .</p><p>At last, for counting the number of different colors (posters), we run the code below (it's obvious that it's correct) :</p> <pre><code class="prettyprint"><span class="kwd">set</span><span class="pln"> </span><span class="str">&lt;int&gt;</span><span class="pln"> se</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">void</span><span class="pln"> cnt</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> id </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> l </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> r </span><span class="pun">=</span><span class="pln"> n</span><span class="pun">){</span><span class="pln">
	</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">lazy</span><span class="pun">[</span><span class="pln">id</span><span class="pun">]){</span><span class="pln">
		se</span><span class="pun">.</span><span class="pln">insert</span><span class="pun">(</span><span class="pln">lazy</span><span class="pun">[</span><span class="pln">id</span><span class="pun">]);</span><span class="pln">
		</span><span class="kwd">return</span><span class="pln"> </span><span class="pun">;</span><span class="pln"> </span><span class="com">// there is no need to see the children, because all the interval is from the same color</span><span class="pln">
	</span><span class="pun">}</span><span class="pln">
	</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">r </span><span class="pun">-</span><span class="pln"> l </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">2</span><span class="pun">)</span><span class="pln">	</span><span class="kwd">return</span><span class="pln"> </span><span class="pun">;</span><span class="pln">
	</span><span class="kwd">int</span><span class="pln"> mid </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">l</span><span class="pun">+</span><span class="pln">r</span><span class="pun">)/</span><span class="lit">2</span><span class="pun">;</span><span class="pln">
	cnt</span><span class="pun">(</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> l</span><span class="pun">,</span><span class="pln"> mid</span><span class="pun">);</span><span class="pln">
	cnt</span><span class="pun">(</span><span class="lit">2</span><span class="pun">*</span><span class="pln">id</span><span class="pun">+</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> mid</span><span class="pun">,</span><span class="pln"> r</span><span class="pun">);</span><span class="pln">
</span><span class="pun">}</span></code></pre><p>And answer will be <code class="tt">se.size()</code> .</p><h2>Segment tree with vectors</h2><p>In this type of segment tree, for each node we have a vector (we may also have some other variables beside this) .</p><p>Example : Online approach for problem <a href="http://www.spoj.com/problems/KQUERYO/">KQUERYO</a> (I added this problem as the online version of KQUERY):</p><p>It will be nice if for each node, with interval <span class="tex-span">[<i>l</i>,<i>r</i>)</span> such that <span class="tex-span"><i>i</i><i>l</i><i>r</i><i>j</i>+1</span> and this interval is maximal (it's parent's interval is not in the interval <span class="tex-span">[<i>i</i>,<i>j</i>+1)</span> ), we can count the answer.</p><p>For that propose, we can keep all elements of <span class="tex-span"><i>a</i><sub class="lower-index"><i>l</i></sub>,<i>a</i><sub class="lower-index"><i>l</i>+1</sub>,...,<i>a</i><sub class="lower-index"><i>r</i></sub></span> in increasing order and use binary search for counting. So, memory will be <span class="tex-span"><i>O</i>(<i>n</i>.<i>log</i>(<i>n</i>))</span> (each element is in <span class="tex-span"><i>O</i>(<i>log</i>(<i>n</i>))</span> nodes ). We keep this sorted elements in verctor <span class="tex-span"><i>v</i>[<i>i</i>]</span> for <span class="tex-span"><i>i</i>-<i>th</i></span> node. Also, we don't need to run sort on all node's vectors, for node <span class="tex-span"><i>i</i></span>, we can merge <span class="tex-span"><i>v</i>[2*<i>i</i>]</span> and <span class="tex-span"><i>v</i>[2*<i>id</i>+1]</span> (like merge sort) .</p><p>So, build function is like below :</p> <pre><code class="prettyprint"><span class="kwd">void</span><span class="pln"> build</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> id </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> l </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> r </span><span class="pun">=</span><span class="pln"> n</span><span class="pun">){</span><span class="pln">
	</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">r </span><span class="pun">-</span><span class="pln"> l </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">2</span><span class="pun">){</span><span class="pln">
		v</span><span class="pun">[</span><span class="pln">id</span><span class="pun">].</span><span class="pln">push_back</span><span class="pun">(</span><span class="pln">a</span><span class="pun">[</span><span class="pln">l</span><span class="pun">]);</span><span class="pln">
		</span><span class="kwd">return</span><span class="pln"> </span><span class="pun">;</span><span class="pln">
	</span><span class="pun">}</span><span class="pln">
	</span><span class="kwd">int</span><span class="pln"> mid </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">l</span><span class="pun">+</span><span class="pln">r</span><span class="pun">)/</span><span class="lit">2</span><span class="pun">;</span><span class="pln">
	build</span><span class="pun">(</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> l</span><span class="pun">,</span><span class="pln"> mid</span><span class="pun">);</span><span class="pln">
	build</span><span class="pun">(</span><span class="lit">2</span><span class="pun">*</span><span class="pln">id</span><span class="pun">+</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> mid</span><span class="pun">,</span><span class="pln"> r</span><span class="pun">);</span><span class="pln">
	merge</span><span class="pun">(</span><span class="pln">v</span><span class="pun">[</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> id</span><span class="pun">].</span><span class="kwd">begin</span><span class="pun">(),</span><span class="pln"> v</span><span class="pun">[</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> id</span><span class="pun">].</span><span class="kwd">end</span><span class="pun">(),</span><span class="pln"> v</span><span class="pun">[</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> id </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">].</span><span class="kwd">begin</span><span class="pun">(),</span><span class="pln"> v</span><span class="pun">[</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> id </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">].</span><span class="kwd">end</span><span class="pun">(),</span><span class="pln"> back_inserter</span><span class="pun">(</span><span class="pln">v</span><span class="pun">[</span><span class="pln">id</span><span class="pun">]));</span><span class="pln"> </span><span class="com">// read more about back_inserter in http://www.cplusplus.com/reference/iterator/back_inserter/</span><span class="pln">
</span><span class="pun">}</span></code></pre><p>And function for solving queries : </p> <pre><code class="prettyprint"><span class="kwd">int</span><span class="pln"> cnt</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> x</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> y</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> k</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> id </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> l </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> r  </span><span class="pun">=</span><span class="pln"> n</span><span class="pun">){</span><span class="com">// solve the query (x,y-1,k)</span><span class="pln">
	</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">x </span><span class="pun">&gt;=</span><span class="pln"> r </span><span class="kwd">or</span><span class="pln"> l </span><span class="pun">&gt;=</span><span class="pln"> y</span><span class="pun">)</span><span class="pln">	</span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
	</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">x </span><span class="pun">&lt;=</span><span class="pln"> l </span><span class="pun">&amp;&amp;</span><span class="pln"> r </span><span class="pun">&lt;=</span><span class="pln"> n</span><span class="pun">)</span><span class="pln">
		</span><span class="kwd">return</span><span class="pln"> v</span><span class="pun">[</span><span class="pln">id</span><span class="pun">].</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="pun">(</span><span class="pln">upper_bound</span><span class="pun">(</span><span class="pln">v</span><span class="pun">[</span><span class="pln">id</span><span class="pun">].</span><span class="kwd">begin</span><span class="pun">(),</span><span class="pln"> v</span><span class="pun">[</span><span class="pln">id</span><span class="pun">].</span><span class="kwd">end</span><span class="pun">(),</span><span class="pln"> k</span><span class="pun">)</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> v</span><span class="pun">[</span><span class="pln">id</span><span class="pun">].</span><span class="kwd">begin</span><span class="pun">());</span><span class="pln">
	</span><span class="kwd">int</span><span class="pln"> mid </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">l</span><span class="pun">+</span><span class="pln">r</span><span class="pun">)/</span><span class="lit">2</span><span class="pun">;</span><span class="pln">
	</span><span class="kwd">return</span><span class="pln"> cnt</span><span class="pun">(</span><span class="pln">x</span><span class="pun">,</span><span class="pln"> y</span><span class="pun">,</span><span class="pln"> k</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> l</span><span class="pun">,</span><span class="pln"> mid</span><span class="pun">)</span><span class="pln"> </span><span class="pun">+</span><span class="pln">
		   cnt</span><span class="pun">(</span><span class="pln">x</span><span class="pun">,</span><span class="pln"> y</span><span class="pun">,</span><span class="pln"> k</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">*</span><span class="pln">id</span><span class="pun">+</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> mid</span><span class="pun">,</span><span class="pln"> r</span><span class="pun">)</span><span class="pln"> </span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></code></pre><p>Another example : <a href="/gym/100513/problem/C">Component Tree</a></p><h2>Segment tree with sets</h2><p>In this type of segment tree, for each node we have a <code class="tt">set</code> or <code class="tt">multiset</code> or <code class="tt">hash_map</code> (<a href="/blog/entry/15869">here</a>) or <code class="tt">unorderd_map</code> or etc (we may also have some other variables beside this) .</p><p>Consider this problem : </p><p>We have <span class="tex-span"><i>n</i></span> vectors, <span class="tex-span"><i>a</i><sub class="lower-index">1</sub>,<i>a</i><sub class="lower-index">2</sub>,...,<i>a</i><sub class="lower-index"><i>n</i></sub></span> and all of them are initially empty. We should perform <span class="tex-span"><i>m</i></span> queries on this vectors of two types :</p> <ol>   <li><span class="tex-span"><i>A</i> <i>p</i> <i>k</i></span> Add number <span class="tex-span"><i>k</i></span>at the end of <span class="tex-span"><i>a</i><sub class="lower-index"><i>p</i></sub></span></li>   <li><span class="tex-span"><i>C</i> <i>l</i> <i>r</i> <i>k</i></span> print the number <img align="middle" class="tex-formula" src="/predownloaded/ce/79/ce796c3b12b8a053fb70916abd844cd008c226a1.png" style="max-width: 100.0%;max-height: 100.0%;"> where <span class="tex-span"><i>count</i>(<i>a</i><sub class="lower-index"><i>i</i></sub>,<i>k</i>)</span> is the number of occurrences of <span class="tex-span"><i>k</i></span> in <span class="tex-span"><i>a</i><sub class="lower-index"><i>i</i></sub></span> .</li> </ol><p>For this problem, we use a segment tree where each node has a <code class="tt">multiset</code>, node <span class="tex-span"><i>i</i></span> with interval <span class="tex-span">[<i>l</i>,<i>r</i>)</span> has a <code class="tt">multiset</code> <span class="tex-span"><i>s</i>[<i>i</i>]</span> that contains each number <span class="tex-span"><i>k</i></span> exactly <img align="middle" class="tex-formula" src="/predownloaded/ce/79/ce796c3b12b8a053fb70916abd844cd008c226a1.png" style="max-width: 100.0%;max-height: 100.0%;"> times (memory would be <span class="tex-span"><i>O</i>(<i>q</i>.<i>log</i>(<i>n</i>))</span> ) .</p><p>For answer query <span class="tex-span"><i>C</i> <i>x</i> <i>y</i> <i>k</i></span>, we will print the sum of all <span class="tex-span"><i>s</i><sub class="lower-index"><i>x</i></sub>.<i>count</i>(<i>k</i>)</span> where if the interval of node <span class="tex-span"><i>x</i></span> is <span class="tex-span">[<i>l</i>,<i>r</i>)</span>, <span class="tex-span"><i>x</i><i>l</i><i>r</i><i>y</i>+1</span> and its maximal (its parent doesn't fulfill this condition) .</p><p>We have no build function (because vectors are initially empty). But we need an add function :</p> <pre><code class="prettyprint"><span class="kwd">void</span><span class="pln"> add</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> p</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> k</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> id </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> l </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> r </span><span class="pun">=</span><span class="pln"> n</span><span class="pun">){</span><span class="com">//	perform query A p k</span><span class="pln">
	s</span><span class="pun">[</span><span class="pln">id</span><span class="pun">].</span><span class="pln">insert</span><span class="pun">(</span><span class="pln">k</span><span class="pun">);</span><span class="pln">
	</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">r </span><span class="pun">-</span><span class="pln"> l </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">2</span><span class="pun">)</span><span class="pln">	</span><span class="kwd">return</span><span class="pln"> </span><span class="pun">;</span><span class="pln">
	</span><span class="kwd">int</span><span class="pln"> mid </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">l</span><span class="pun">+</span><span class="pln">r</span><span class="pun">)/</span><span class="lit">2</span><span class="pun">;</span><span class="pln">
	</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">p </span><span class="pun">&lt;</span><span class="pln"> mid</span><span class="pun">)</span><span class="pln">
		add</span><span class="pun">(</span><span class="pln">p</span><span class="pun">,</span><span class="pln"> k</span><span class="pun">,</span><span class="pln"> id </span><span class="pun">*</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> l</span><span class="pun">,</span><span class="pln"> mid</span><span class="pun">);</span><span class="pln">
	</span><span class="kwd">else</span><span class="pln">
		add</span><span class="pun">(</span><span class="pln">p</span><span class="pun">,</span><span class="pln"> k</span><span class="pun">,</span><span class="pln"> id</span><span class="pun">*</span><span class="lit">2</span><span class="pun">+</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> mid</span><span class="pun">,</span><span class="pln"> r</span><span class="pun">);</span><span class="pln">
</span><span class="pun">}</span></code></pre><p>And the function for the second query is : </p> <pre><code class="prettyprint"><span class="kwd">int</span><span class="pln"> ask</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> x</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> y</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> k</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> id </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> l </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> r </span><span class="pun">=</span><span class="pln"> n</span><span class="pun">){</span><span class="com">// Answer query C x y-1 k</span><span class="pln">
	</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">x </span><span class="pun">&gt;=</span><span class="pln"> r </span><span class="kwd">or</span><span class="pln"> l </span><span class="pun">&gt;=</span><span class="pln"> y</span><span class="pun">)</span><span class="pln">	</span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
	</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">x </span><span class="pun">&lt;=</span><span class="pln"> l </span><span class="pun">&amp;&amp;</span><span class="pln"> r </span><span class="pun">&lt;=</span><span class="pln"> y</span><span class="pun">)</span><span class="pln">
		</span><span class="kwd">return</span><span class="pln"> s</span><span class="pun">[</span><span class="pln">id</span><span class="pun">].</span><span class="pln">count</span><span class="pun">(</span><span class="pln">k</span><span class="pun">);</span><span class="pln">
	</span><span class="kwd">int</span><span class="pln"> mid </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">l</span><span class="pun">+</span><span class="pln">r</span><span class="pun">)/</span><span class="lit">2</span><span class="pun">;</span><span class="pln">
	</span><span class="kwd">return</span><span class="pln"> ask</span><span class="pun">(</span><span class="pln">x</span><span class="pun">,</span><span class="pln"> y</span><span class="pun">,</span><span class="pln"> k</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> l</span><span class="pun">,</span><span class="pln"> mid</span><span class="pun">)</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> 
		   ask</span><span class="pun">(</span><span class="pln">x</span><span class="pun">,</span><span class="pln"> y</span><span class="pun">,</span><span class="pln"> k</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">*</span><span class="pln">id</span><span class="pun">+</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> mid</span><span class="pun">,</span><span class="pln"> r</span><span class="pun">)</span><span class="pln"> </span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></code></pre><h2>Segment tree with other data structures in each node</h2><p>From now, all the other types of segments, are like the types above.</p><h4><span class="tex-span">2<i>D</i></span> Segment trees</h4><p>In this type of segment tree, for each node we have another segment tree (we may also have some other variables beside this) .</p><h4>Segment trees with tries</h4><p>In this type of segment tree, for each node we have a trie (we may also have some other variables beside this) .</p><h4>Segment trees with DSU</h4><p>In this type of segment tree, for each node we have a disjoint set (we may also have some other variables beside this) .</p><p>Example : Problem <a href="/contest/76/problem/A" title="All-Ukrainian School Olympiad in Informatics">76A - Gift</a>, you can read my source code (<a href="/contest/76/submission/8613428" title="Submission 8613428 by DarthPrince">8613428</a>) with this type of segment trees .</p><h4>Segment trees with Fenwick</h4><p>In this type of segment tree, for each node we have a Fenwick (we may also have some other variables beside this) . Example :</p><p>Consider this problem : </p><p>We have <span class="tex-span"><i>n</i></span> vectors, <span class="tex-span"><i>a</i><sub class="lower-index">1</sub>,<i>a</i><sub class="lower-index">2</sub>,...,<i>a</i><sub class="lower-index"><i>n</i></sub></span> and all of them are initially empty. We should perform <span class="tex-span"><i>m</i></span> queries on this vectors of two types :</p> <ol>   <li><span class="tex-span"><i>A</i> <i>p</i> <i>k</i></span> Add number <span class="tex-span"><i>k</i></span>at the end of <span class="tex-span"><i>a</i><sub class="lower-index"><i>p</i></sub></span></li>   <li><span class="tex-span"><i>C</i> <i>l</i> <i>r</i> <i>k</i></span> print the number <img align="middle" class="tex-formula" src="/predownloaded/7c/31/7c31dc51d6a1308a6d837aef206b96714a3e650f.png" style="max-width: 100.0%;max-height: 100.0%;"> for each <span class="tex-span"><i>j</i><i>k</i></span> where <span class="tex-span"><i>count</i>(<i>a</i><sub class="lower-index"><i>i</i></sub>,<i>k</i>)</span> is the number of occurrences of <span class="tex-span"><i>k</i></span> in <span class="tex-span"><i>a</i><sub class="lower-index"><i>i</i></sub></span> .</li> </ol><p>For this problem, we use a segment tree where each node has a <code class="tt">vector</code>, node <span class="tex-span"><i>i</i></span> with interval <span class="tex-span">[<i>l</i>,<i>r</i>)</span> has a <code class="tt">set</code> <span class="tex-span"><i>v</i>[<i>i</i>]</span> that contains each number <span class="tex-span"><i>k</i></span> if and only if <img align="middle" class="tex-formula" src="/predownloaded/b9/08/b908d81f046cbc306d1ba6c576842fc9a0947ddb.png" style="max-width: 100.0%;max-height: 100.0%;"> (memory would be <span class="tex-span"><i>O</i>(<i>q</i>.<i>log</i>(<i>n</i>))</span> ) (in increasing order).</p><p>First of all, we will read all queries, store them and for each query of type <span class="tex-span"><i>A</i></span>, we will insert <span class="tex-span"><i>k</i></span> in <span class="tex-span"><i>v</i></span> for all nodes that contain <span class="tex-span"><i>p</i></span> (and after all of them, we sort these vectors using merge sort and run unique function to delete repeated elements) .</p><p>Then, for each node <span class="tex-span"><i>i</i></span>, we build a vector <span class="tex-span"><i>fen</i>[<i>i</i>]</span> with size <span class="tex-span">|<i>s</i>[<i>i</i>]|</span> (initially <span class="tex-span">0</span>).</p><p>Insert function :</p> <pre><code class="prettyprint"><span class="kwd">void</span><span class="pln"> insert</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> p</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> k</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> id </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> l </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> r </span><span class="pun">=</span><span class="pln"> n</span><span class="pun">){</span><span class="com">//	perform query A p k</span><span class="pln">
	</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">r </span><span class="pun">-</span><span class="pln"> l </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">2</span><span class="pun">){</span><span class="pln">
		v</span><span class="pun">[</span><span class="pln">id</span><span class="pun">].</span><span class="pln">push_back</span><span class="pun">(</span><span class="pln">k</span><span class="pun">);</span><span class="pln">
		</span><span class="kwd">return</span><span class="pln"> </span><span class="pun">;</span><span class="pln">
	</span><span class="pun">}</span><span class="pln">
	</span><span class="kwd">int</span><span class="pln"> mid </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">l</span><span class="pun">+</span><span class="pln">r</span><span class="pun">)/</span><span class="lit">2</span><span class="pun">;</span><span class="pln">
	</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">p </span><span class="pun">&lt;</span><span class="pln"> mid</span><span class="pun">)</span><span class="pln">
		insert</span><span class="pun">(</span><span class="pln">p</span><span class="pun">,</span><span class="pln"> k</span><span class="pun">,</span><span class="pln"> id </span><span class="pun">*</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> l</span><span class="pun">,</span><span class="pln"> mid</span><span class="pun">);</span><span class="pln">
	</span><span class="kwd">else</span><span class="pln">
		insert</span><span class="pun">(</span><span class="pln">p</span><span class="pun">,</span><span class="pln"> k</span><span class="pun">,</span><span class="pln"> id</span><span class="pun">*</span><span class="lit">2</span><span class="pun">+</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> mid</span><span class="pun">,</span><span class="pln"> r</span><span class="pun">);</span><span class="pln">
</span><span class="pun">}</span></code></pre><p>Sort function (after reading all queries) : </p> <pre><code class="prettyprint"><span class="kwd">void</span><span class="pln"> SORT</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> id </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> l </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> r </span><span class="pun">=</span><span class="pln"> n</span><span class="pun">){</span><span class="pln">
	</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">r </span><span class="pun">-</span><span class="pln"> l </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">2</span><span class="pun">)</span><span class="pln">
		</span><span class="kwd">return</span><span class="pln"> </span><span class="pun">;</span><span class="pln">
	</span><span class="kwd">int</span><span class="pln"> mid </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">l</span><span class="pun">+</span><span class="pln">r</span><span class="pun">)/</span><span class="lit">2</span><span class="pun">;</span><span class="pln">
	SORT</span><span class="pun">(</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> l</span><span class="pun">,</span><span class="pln"> mid</span><span class="pun">);</span><span class="pln">
	SORT</span><span class="pun">(</span><span class="lit">2</span><span class="pun">*</span><span class="pln">id</span><span class="pun">+</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> mid</span><span class="pun">,</span><span class="pln"> r</span><span class="pun">);</span><span class="pln">
	merge</span><span class="pun">(</span><span class="pln">v</span><span class="pun">[</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> id</span><span class="pun">].</span><span class="kwd">begin</span><span class="pun">(),</span><span class="pln"> v</span><span class="pun">[</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> id</span><span class="pun">].</span><span class="kwd">end</span><span class="pun">(),</span><span class="pln"> v</span><span class="pun">[</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> id </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">].</span><span class="kwd">begin</span><span class="pun">(),</span><span class="pln"> v</span><span class="pun">[</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> id </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">].</span><span class="kwd">end</span><span class="pun">(),</span><span class="pln"> back_inserter</span><span class="pun">(</span><span class="pln">v</span><span class="pun">[</span><span class="pln">id</span><span class="pun">]));</span><span class="pln"> </span><span class="com">// read more about back_inserter in http://www.cplusplus.com/reference/iterator/back_inserter/</span><span class="pln">
	v</span><span class="pun">[</span><span class="pln">id</span><span class="pun">].</span><span class="pln">resize</span><span class="pun">(</span><span class="pln">unique</span><span class="pun">(</span><span class="pln">v</span><span class="pun">[</span><span class="pln">id</span><span class="pun">].</span><span class="kwd">begin</span><span class="pun">(),</span><span class="pln"> v</span><span class="pun">[</span><span class="pln">id</span><span class="pun">].</span><span class="kwd">end</span><span class="pun">())</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> v</span><span class="pun">[</span><span class="pln">id</span><span class="pun">].</span><span class="kwd">begin</span><span class="pun">());</span><span class="pln">
	fen</span><span class="pun">[</span><span class="pln">id</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> vector</span><span class="str">&lt;int&gt;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">v</span><span class="pun">[</span><span class="pln">id</span><span class="pun">].</span><span class="pln">size</span><span class="pun">()</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span></code></pre><p>Then for all queries of type <span class="tex-span"><i>A</i></span>, for each node <span class="tex-span"><i>x</i></span> containing <span class="tex-span"><i>p</i></span> we will run :</p> <pre><code class="prettyprint"><span class="kwd">for</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> a </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln">i </span><span class="pun">&lt;</span><span class="pln"> fen</span><span class="pun">[</span><span class="pln">x</span><span class="pun">].</span><span class="pln">size</span><span class="pun">();</span><span class="pln"> i </span><span class="pun">+=</span><span class="pln"> i </span><span class="pun">&amp;</span><span class="pln"> </span><span class="pun">-</span><span class="pln">i</span><span class="pun">)</span><span class="pln">       fen</span><span class="pun">[</span><span class="pln">x</span><span class="pun">][</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">++;</span></code></pre><p>Where <span class="tex-span"><i>v</i>[<i>x</i>][<i>a</i>]=<i>k</i></span> . Code :</p> <pre><code class="prettyprint"><span class="kwd">void</span><span class="pln"> upd</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> p</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> k</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> id </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> l </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> r </span><span class="pun">=</span><span class="pln"> n</span><span class="pun">){</span><span class="pln">
	</span><span class="kwd">int</span><span class="pln"> a </span><span class="pun">=</span><span class="pln"> lower_bound</span><span class="pun">(</span><span class="pln">v</span><span class="pun">[</span><span class="pln">id</span><span class="pun">].</span><span class="kwd">begin</span><span class="pun">(),</span><span class="pln"> v</span><span class="pun">[</span><span class="pln">id</span><span class="pun">].</span><span class="kwd">end</span><span class="pun">(),</span><span class="pln"> k</span><span class="pun">)</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> v</span><span class="pun">[</span><span class="pln">id</span><span class="pun">].</span><span class="kwd">begin</span><span class="pun">();</span><span class="pln">
	</span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> a </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> fen</span><span class="pun">[</span><span class="pln">id</span><span class="pun">].</span><span class="pln">size</span><span class="pun">();</span><span class="pln"> i </span><span class="pun">+=</span><span class="pln"> i </span><span class="pun">&amp;</span><span class="pln"> </span><span class="pun">-</span><span class="pln">i </span><span class="pun">)</span><span class="pln">
		fen</span><span class="pun">[</span><span class="pln">id</span><span class="pun">][</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">++</span><span class="pln"> </span><span class="pun">;</span><span class="pln">
	</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">r </span><span class="pun">-</span><span class="pln"> l </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">2</span><span class="pun">)</span><span class="pln">	</span><span class="kwd">return</span><span class="pun">;</span><span class="pln">
	</span><span class="kwd">int</span><span class="pln"> mid </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">l</span><span class="pun">+</span><span class="pln">r</span><span class="pun">)/</span><span class="lit">2</span><span class="pun">;</span><span class="pln">
	</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">p </span><span class="pun">&lt;</span><span class="pln"> mid</span><span class="pun">)</span><span class="pln">
		upd</span><span class="pun">(</span><span class="pln">p</span><span class="pun">,</span><span class="pln"> k</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> l</span><span class="pun">,</span><span class="pln"> mid</span><span class="pun">);</span><span class="pln">
	</span><span class="kwd">else</span><span class="pln">
		upd</span><span class="pun">(</span><span class="pln">p</span><span class="pun">,</span><span class="pln"> k</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">*</span><span class="pln">id</span><span class="pun">+</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> mid</span><span class="pun">,</span><span class="pln"> r</span><span class="pun">);</span><span class="pln">
</span><span class="pun">}</span></code></pre><p>And now we can easily compute the answer for queries of type <span class="tex-span"><i>C</i></span> :</p> <pre><code class="prettyprint"><span class="kwd">int</span><span class="pln"> ask</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> x</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> y</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> k</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> id </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> l </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> r </span><span class="pun">=</span><span class="pln"> n</span><span class="pun">){</span><span class="com">// Answer query C x y-1 k</span><span class="pln">
	</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">x </span><span class="pun">&gt;=</span><span class="pln"> r </span><span class="kwd">or</span><span class="pln"> l </span><span class="pun">&gt;=</span><span class="pln"> y</span><span class="pun">)</span><span class="pln">	</span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
	</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">x </span><span class="pun">&lt;=</span><span class="pln"> l </span><span class="pun">&amp;&amp;</span><span class="pln"> r </span><span class="pun">&lt;=</span><span class="pln"> y</span><span class="pun">){</span><span class="pln">
		</span><span class="kwd">int</span><span class="pln"> a </span><span class="pun">=</span><span class="pln"> lower_bound</span><span class="pun">(</span><span class="pln">v</span><span class="pun">[</span><span class="pln">id</span><span class="pun">].</span><span class="kwd">begin</span><span class="pun">(),</span><span class="pln"> v</span><span class="pun">[</span><span class="pln">id</span><span class="pun">].</span><span class="kwd">end</span><span class="pun">(),</span><span class="pln"> k</span><span class="pun">)</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> v</span><span class="pun">[</span><span class="pln">id</span><span class="pun">].</span><span class="kwd">begin</span><span class="pun">();</span><span class="pln">
		</span><span class="kwd">int</span><span class="pln"> ans </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
		</span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> a </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">-=</span><span class="pln"> i </span><span class="pun">&amp;</span><span class="pln"> </span><span class="pun">-</span><span class="pln">i</span><span class="pun">)</span><span class="pln">
			ans </span><span class="pun">+=</span><span class="pln"> fen</span><span class="pun">[</span><span class="pln">id</span><span class="pun">][</span><span class="pln">i</span><span class="pun">];</span><span class="pln">
		</span><span class="kwd">return</span><span class="pln"> ans</span><span class="pun">;</span><span class="pln">
	</span><span class="pun">}</span><span class="pln">
	</span><span class="kwd">int</span><span class="pln"> mid </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">l</span><span class="pun">+</span><span class="pln">r</span><span class="pun">)/</span><span class="lit">2</span><span class="pun">;</span><span class="pln">
	</span><span class="kwd">return</span><span class="pln"> ask</span><span class="pun">(</span><span class="pln">x</span><span class="pun">,</span><span class="pln"> y</span><span class="pun">,</span><span class="pln"> k</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> l</span><span class="pun">,</span><span class="pln"> mid</span><span class="pun">)</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> 
		   ask</span><span class="pun">(</span><span class="pln">x</span><span class="pun">,</span><span class="pln"> y</span><span class="pun">,</span><span class="pln"> k</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">*</span><span class="pln">id</span><span class="pun">+</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> mid</span><span class="pun">,</span><span class="pln"> r</span><span class="pun">)</span><span class="pln"> </span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span></code></pre><h2>Segment tree on a rooted tree</h2><p>As you know, segment tree is for problems with array. So, obviously we should convert the rooted tree into an array. You know DFS algorithm and starting time (the time when we go into a vertex, starting from 1). So, if <span class="tex-span"><i>s</i><sub class="lower-index"><i>v</i></sub></span> is starting time of <span class="tex-span"><i>v</i></span>, element number <span class="tex-span"><i>s</i><sub class="lower-index"><i>v</i></sub></span> (in the segment tree) belongs to the vertex number <span class="tex-span"><i>v</i></span> and if <span class="tex-span"><i>f</i><sub class="lower-index"><i>v</i></sub>=<i>max</i>(<i>s</i><sub class="lower-index"><i>u</i></sub>)+1</span> where <span class="tex-span"><i>u</i></span> is in subtree of <span class="tex-span"><i>v</i></span>, the interval <span class="tex-span">[<i>s</i><sub class="lower-index"><i>v</i></sub>,<i>f</i><sub class="lower-index"><i>v</i></sub>)</span> shows the interval of subtree of <span class="tex-span"><i>v</i></span> (in the segment tree) .</p><p>Example : Problem <a href="/contest/396/problem/C" title="Codeforces Round 232 (Div. 1)">396C - On Changing Tree</a></p><p>Consider <span class="tex-span"><i>h</i><sub class="lower-index"><i>v</i></sub></span> height if vertex <span class="tex-span"><i>v</i></span> (distance from root).</p><p>For each query of first of type, if <span class="tex-span"><i>u</i></span> is in subtree of <span class="tex-span"><i>v</i></span>, its value increasing by <span class="tex-span"><i>x</i>+(<i>h</i><sub class="lower-index"><i>u</i></sub>-<i>h</i><sub class="lower-index"><i>v</i></sub>)-<i>k</i>=<i>x</i>+<i>k</i>(<i>h</i><sub class="lower-index"><i>v</i></sub>-<i>h</i><sub class="lower-index"><i>u</i></sub>)=<i>x</i>+<i>k</i><i>h</i><sub class="lower-index"><i>v</i></sub>-<i>k</i><i>h</i><sub class="lower-index"><i>u</i></sub></span>. So for each <span class="tex-span"><i>u</i></span>, if <span class="tex-span"><i>s</i></span> is the set of all queries of first type which <span class="tex-span"><i>u</i></span> is in the subtree of their <span class="tex-span"><i>v</i></span>, answer to query <span class="tex-span">2 <i>u</i></span> is <img align="middle" class="tex-formula" src="/predownloaded/a9/b6/a9b66a1f53bea1a5b0580cc650aad6f4a17da2db.png" style="max-width: 100.0%;max-height: 100.0%;">, so we should calculate two values <img align="middle" class="tex-formula" src="/predownloaded/24/f0/24f0026799b9813e4667608db30dce93c52837d4.png" style="max-width: 100.0%;max-height: 100.0%;"> and <img align="middle" class="tex-formula" src="/predownloaded/54/b5/54b5f919a00f8c6470dcbc65a065926f9aec1ec2.png" style="max-width: 100.0%;max-height: 100.0%;">, we can answer the queries. So, we for each query, we can store values in all members of its subtree ( <span class="tex-span">[<i>s</i><sub class="lower-index"><i>v</i></sub>,<i>f</i><sub class="lower-index"><i>v</i></sub>)</span> ).</p><p>So for each node of segment tree, we will have two variables <img align="middle" class="tex-formula" src="/predownloaded/bf/fc/bffcba0c81f78824d6a3f13840991602845950ef.png" style="max-width: 100.0%;max-height: 100.0%;"> and <img align="middle" class="tex-formula" src="/predownloaded/4b/ef/4bef0837c58ac0587f7a1654694a654a874968ec.png" style="max-width: 100.0%;max-height: 100.0%;"> (we don't need lazy propagation, because we only update maximal nodes).</p><p>Source code of update function :</p> <pre><code class="prettyprint"><span class="kwd">void</span><span class="pln"> update</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> x</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> k</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> v</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> id </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> l </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> r </span><span class="pun">=</span><span class="pln"> n</span><span class="pun">){</span><span class="pln">
	</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">s</span><span class="pun">[</span><span class="pln">v</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&gt;=</span><span class="pln"> r </span><span class="kwd">or</span><span class="pln"> l </span><span class="pun">&gt;=</span><span class="pln"> f</span><span class="pun">[</span><span class="pln">v</span><span class="pun">])</span><span class="pln">	</span><span class="kwd">return</span><span class="pln"> </span><span class="pun">;</span><span class="pln">
	</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">s</span><span class="pun">[</span><span class="pln">v</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&lt;=</span><span class="pln"> l </span><span class="pun">&amp;&amp;</span><span class="pln"> r </span><span class="pun">&lt;=</span><span class="pln"> f</span><span class="pun">[</span><span class="pln">v</span><span class="pun">]){</span><span class="pln">
		hkx</span><span class="pun">[</span><span class="pln">id</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">hkx</span><span class="pun">[</span><span class="pln">id</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> x</span><span class="pun">)</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> mod</span><span class="pun">;</span><span class="pln">
		</span><span class="kwd">int</span><span class="pln"> a </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="lit">1LL</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> h</span><span class="pun">[</span><span class="pln">v</span><span class="pun">]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> k</span><span class="pun">)</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> mod</span><span class="pun">;</span><span class="pln">
		hkx</span><span class="pun">[</span><span class="pln">id</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">hkx</span><span class="pun">[</span><span class="pln">id</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> a</span><span class="pun">)</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> mod</span><span class="pun">;</span><span class="pln">
		sk</span><span class="pun">[</span><span class="pln">id</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">sk</span><span class="pun">[</span><span class="pln">id</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> k</span><span class="pun">)</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> mod</span><span class="pun">;</span><span class="pln">
		</span><span class="kwd">return</span><span class="pln"> </span><span class="pun">;</span><span class="pln">
	</span><span class="pun">}</span><span class="pln">
	</span><span class="kwd">int</span><span class="pln"> mid </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">l</span><span class="pun">+</span><span class="pln">r</span><span class="pun">)/</span><span class="lit">2</span><span class="pun">;</span><span class="pln">
	update</span><span class="pun">(</span><span class="pln">x</span><span class="pun">,</span><span class="pln"> k</span><span class="pun">,</span><span class="pln"> v</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> l</span><span class="pun">,</span><span class="pln"> mid</span><span class="pun">);</span><span class="pln">
	update</span><span class="pun">(</span><span class="pln">x</span><span class="pun">,</span><span class="pln"> k</span><span class="pun">,</span><span class="pln"> v</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">*</span><span class="pln">id</span><span class="pun">+</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> mid</span><span class="pun">,</span><span class="pln"> r</span><span class="pun">);</span><span class="pln">
</span><span class="pun">}</span></code></pre><p>Function for 2nd type query :</p> <pre><code class="prettyprint"><span class="kwd">int</span><span class="pln"> ask</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> v</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> id </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> l </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> r </span><span class="pun">=</span><span class="pln"> n</span><span class="pun">){</span><span class="pln">
	</span><span class="kwd">int</span><span class="pln"> a </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="lit">1LL</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> h</span><span class="pun">[</span><span class="pln">v</span><span class="pun">]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> sk</span><span class="pun">[</span><span class="pln">id</span><span class="pun">])</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> mod</span><span class="pun">;</span><span class="pln">
	</span><span class="kwd">int</span><span class="pln"> ans </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">hkx</span><span class="pun">[</span><span class="pln">id</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> mod </span><span class="pun">-</span><span class="pln"> a</span><span class="pun">)</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> mod</span><span class="pun">;</span><span class="pln">
	</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">r </span><span class="pun">-</span><span class="pln"> l </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">2</span><span class="pun">)</span><span class="pln">	</span><span class="kwd">return</span><span class="pln"> ans</span><span class="pun">;</span><span class="pln">
	</span><span class="kwd">int</span><span class="pln"> mid </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">l</span><span class="pun">+</span><span class="pln">r</span><span class="pun">)/</span><span class="lit">2</span><span class="pun">;</span><span class="pln">
	</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">s</span><span class="pun">[</span><span class="pln">v</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln"> mid</span><span class="pun">)</span><span class="pln">
		</span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ans </span><span class="pun">+</span><span class="pln"> ask</span><span class="pun">(</span><span class="pln">v</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> l</span><span class="pun">,</span><span class="pln"> mid</span><span class="pun">))</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> mod</span><span class="pun">;</span><span class="pln">
		</span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ans </span><span class="pun">+</span><span class="pln"> ask</span><span class="pun">(</span><span class="pln">v</span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">*</span><span class="pln">id</span><span class="pun">+</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> mid</span><span class="pun">,</span><span class="pln"> r</span><span class="pun">))</span><span class="pln"> </span><span class="pun">%</span><span class="pln"> mod</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></code></pre><h2>Persistent Segment Trees</h2><p>In the last lecture, I talked about this type of segment trees, now I just want to solve an important example.</p><p>Example : Problem <a href="http://www.spoj.com/problems/MKTHNUM/">MKTHNUM</a></p><p>First approach : <span class="tex-span"><i>O</i>((<i>n</i>+<i>m</i>).<i>log</i><sup class="upper-index">2</sup>(<i>n</i>))</span></p><p>I won't discuss this approach, it's using binary search an will get TLE.</p><p>Second approach : <span class="tex-span"><i>O</i>((<i>n</i>+<i>m</i>).<i>log</i>(<i>n</i>))</span></p><p>This approach is really important and pretty and too useful :</p><p>Sort elements of <span class="tex-span"><i>a</i></span> to compute permutation <span class="tex-span"><i>p</i><sub class="lower-index">1</sub>,<i>p</i><sub class="lower-index">2</sub>,...,<i>p</i><sub class="lower-index"><i>n</i></sub></span> such that <span class="tex-span"><i>a</i><sub class="lower-index"><i>p</i><sub class="lower-index">1</sub></sub><i>a</i><sub class="lower-index"><i>p</i><sub class="lower-index">2</sub></sub>...<i>a</i><sub class="lower-index"><i>p</i><sub class="lower-index"><i>n</i></sub></sub></span> and <span class="tex-span"><i>q</i><sub class="lower-index">1</sub>,<i>q</i><sub class="lower-index">2</sub>,...,<i>q</i><sub class="lower-index"><i>n</i></sub></span> where, for each <span class="tex-span"><i>i</i></span>, <span class="tex-span"><i>p</i><sub class="lower-index"><i>q</i><sub class="lower-index"><i>i</i></sub></sub>=<i>i</i></span>.</p><p>We have an array <span class="tex-span"><i>b</i><sub class="lower-index">1</sub>,<i>b</i><sub class="lower-index">2</sub>,...,<i>b</i><sub class="lower-index"><i>n</i></sub></span> (initially 0) and a persistent segment tree on it.</p><p>Then <span class="tex-span"><i>n</i></span> step,for each <span class="tex-span"><i>i</i></span>, starting from <span class="tex-span">1</span>, we perform <span class="tex-span"><i>b</i><sub class="lower-index"><i>q</i><sub class="lower-index"><i>i</i></sub></sub>=1</span> .</p><p>Lest <span class="tex-span"><i>sum</i>(<i>l</i>,<i>r</i>,<i>k</i>)</span> be <span class="tex-span"><i>b</i><sub class="lower-index"><i>l</i></sub>+<i>b</i><sub class="lower-index"><i>l</i>+1</sub>+...+<i>b</i><sub class="lower-index"><i>r</i></sub></span> after <span class="tex-span"><i>k</i>-<i>th</i></span> update (if <span class="tex-span"><i>k</i>=0</span>, it equals to <span class="tex-span">0</span>)</p><p>As I said in the last lecture, we have an array <span class="tex-span"><i>root</i></span> and the root of the empty segment tree, <span class="tex-span"><i>ir</i></span> . So for each query <span class="tex-span"><i>Q</i>(<i>x</i>,<i>y</i>,<i>k</i>)</span>, we need to find the first <span class="tex-span"><i>i</i></span> such that <span class="tex-span"><i>sum</i>(1,<i>i</i>,<i>r</i>)-<i>sum</i>(1,<i>i</i>,<i>l</i>-1)&gt;<i>k</i>-1</span> and answer will be <span class="tex-span"><i>a</i><sub class="lower-index"><i>p</i><sub class="lower-index"><i>i</i></sub></sub></span>. (I'll explain how in the source code) : </p><p>Build function (<span class="tex-span"><i>s</i></span> is the sum of the node's interval):</p> <pre><code class="prettyprint"><span class="kwd">void</span><span class="pln"> build</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> id </span><span class="pun">=</span><span class="pln"> ir</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> l </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> r </span><span class="pun">=</span><span class="pln"> n</span><span class="pun">){</span><span class="pln">
	s</span><span class="pun">[</span><span class="pln">id</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
	</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">r </span><span class="pun">-</span><span class="pln"> l </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">2</span><span class="pun">)</span><span class="pln">
		</span><span class="kwd">return</span><span class="pln"> </span><span class="pun">;</span><span class="pln">
	</span><span class="kwd">int</span><span class="pln"> mid </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">l</span><span class="pun">+</span><span class="pln">r</span><span class="pun">)/</span><span class="lit">2</span><span class="pun">;</span><span class="pln">
	L</span><span class="pun">[</span><span class="pln">id</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> NEXT_FREE_INDEX </span><span class="pun">++;</span><span class="pln">
	R</span><span class="pun">[</span><span class="pln">id</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> NEXT_FREE_INDEX </span><span class="pun">++;</span><span class="pln">
	build</span><span class="pun">(</span><span class="pln">L</span><span class="pun">[</span><span class="pln">id</span><span class="pun">],</span><span class="pln"> l</span><span class="pun">,</span><span class="pln"> mid</span><span class="pun">);</span><span class="pln">
	build</span><span class="pun">(</span><span class="pln">R</span><span class="pun">[</span><span class="pln">id</span><span class="pun">],</span><span class="pln"> mid</span><span class="pun">,</span><span class="pln"> r</span><span class="pun">);</span><span class="pln">
	s</span><span class="pun">[</span><span class="pln">id</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> s</span><span class="pun">[</span><span class="pln">L</span><span class="pun">[</span><span class="pln">id</span><span class="pun">]]</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> s</span><span class="pun">[</span><span class="pln">R</span><span class="pun">[</span><span class="pln">id</span><span class="pun">]];</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span></code></pre><p>Update function :</p> <pre><code class="prettyprint"><span class="kwd">int</span><span class="pln"> upd</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> p</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> v</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> id</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> l </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> r </span><span class="pun">=</span><span class="pln"> n</span><span class="pun">){</span><span class="pln">
	</span><span class="kwd">int</span><span class="pln"> ID </span><span class="pun">=</span><span class="pln">  NEXT_FREE_INDEX </span><span class="pun">++;</span><span class="pln"> </span><span class="com">// index of the node in new version of segment tree</span><span class="pln">
	s</span><span class="pun">[</span><span class="pln">ID</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> s</span><span class="pun">[</span><span class="pln">id</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln">
	</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">r </span><span class="pun">-</span><span class="pln"> l </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">2</span><span class="pun">)</span><span class="pln">
		</span><span class="kwd">return</span><span class="pln"> ID</span><span class="pun">;</span><span class="pln">
	</span><span class="kwd">int</span><span class="pln"> mid </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">l</span><span class="pun">+</span><span class="pln">r</span><span class="pun">)/</span><span class="lit">2</span><span class="pun">;</span><span class="pln">
	L</span><span class="pun">[</span><span class="pln">ID</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> L</span><span class="pun">[</span><span class="pln">id</span><span class="pun">],</span><span class="pln"> R</span><span class="pun">[</span><span class="pln">ID</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> R</span><span class="pun">[</span><span class="pln">id</span><span class="pun">];</span><span class="pln"> </span><span class="com">// in case of not updating the interval of left child or right child</span><span class="pln">
	</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">p </span><span class="pun">&lt;</span><span class="pln"> mid</span><span class="pun">)</span><span class="pln">
		L</span><span class="pun">[</span><span class="pln">ID</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> upd</span><span class="pun">(</span><span class="pln">p</span><span class="pun">,</span><span class="pln"> v</span><span class="pun">,</span><span class="pln"> L</span><span class="pun">[</span><span class="pln">ID</span><span class="pun">],</span><span class="pln"> l</span><span class="pun">,</span><span class="pln"> mid</span><span class="pun">);</span><span class="pln">
	</span><span class="kwd">else</span><span class="pln">
		R</span><span class="pun">[</span><span class="pln">ID</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> upd</span><span class="pun">(</span><span class="pln">p</span><span class="pun">,</span><span class="pln"> v</span><span class="pun">,</span><span class="pln"> R</span><span class="pun">[</span><span class="pln">ID</span><span class="pun">],</span><span class="pln"> mid</span><span class="pun">,</span><span class="pln"> r</span><span class="pun">);</span><span class="pln">
	</span><span class="kwd">return</span><span class="pln"> ID</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></code></pre><p>Ask function (it returns <span class="tex-span"><i>i</i></span>, so you should print <span class="tex-span"><i>a</i><sub class="lower-index"><i>p</i><sub class="lower-index"><i>i</i></sub></sub></span> :</p> <pre><code class="prettyprint"><span class="kwd">int</span><span class="pln"> ask</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> id</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> ID</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> k</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> l </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> r </span><span class="pun">=</span><span class="pln"> n</span><span class="pun">){</span><span class="com">// id is the index of the node after l-1-th update (or ir) and ID will be its index after r-th update</span><span class="pln">
	</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">r </span><span class="pun">-</span><span class="pln"> l </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">2</span><span class="pun">)</span><span class="pln">	</span><span class="kwd">return</span><span class="pln"> l</span><span class="pun">;</span><span class="pln">
	</span><span class="kwd">int</span><span class="pln"> mid </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">l</span><span class="pun">+</span><span class="pln">r</span><span class="pun">)/</span><span class="lit">2</span><span class="pun">;</span><span class="pln">
	</span><span class="kwd">if</span><span class="pun">(</span><span class="pln">s</span><span class="pun">[</span><span class="pln">L</span><span class="pun">[</span><span class="pln">ID</span><span class="pun">]]</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> s</span><span class="pun">[</span><span class="pln">L</span><span class="pun">[</span><span class="pln">id</span><span class="pun">]]</span><span class="pln"> </span><span class="pun">&gt;=</span><span class="pln"> k</span><span class="pun">)</span><span class="com">// answer is in the left child's interval</span><span class="pln">
		</span><span class="kwd">return</span><span class="pln"> ask</span><span class="pun">(</span><span class="pln">L</span><span class="pun">[</span><span class="pln">id</span><span class="pun">],</span><span class="pln"> L</span><span class="pun">[</span><span class="pln">ID</span><span class="pun">],</span><span class="pln"> k</span><span class="pun">,</span><span class="pln"> l</span><span class="pun">,</span><span class="pln"> mid</span><span class="pun">);</span><span class="pln">
	</span><span class="kwd">else</span><span class="pln">
		</span><span class="kwd">return</span><span class="pln"> ask</span><span class="pun">(</span><span class="pln">R</span><span class="pun">[</span><span class="pln">id</span><span class="pun">],</span><span class="pln"> R</span><span class="pun">[</span><span class="pln">ID</span><span class="pun">],</span><span class="pln"> k </span><span class="pun">-</span><span class="pln"> </span><span class="pun">(</span><span class="pln">s</span><span class="pun">[</span><span class="pln">L</span><span class="pun">[</span><span class="pln">ID</span><span class="pun">]]</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> s</span><span class="pun">[</span><span class="pln">L</span><span class="pun">[</span><span class="pln">id</span><span class="pun">]]</span><span class="pln"> </span><span class="pun">),</span><span class="pln"> mid</span><span class="pun">,</span><span class="pln"> r</span><span class="pun">);</span><span class="com">// there are already s[L[ID]] - s[L[id]] 1s in the left child's interval</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span></code></pre><p>As you can see, this problem is too tricky.</p><p><strong>If there is any error or suggestion let me know.</strong></p></div>
    </div>


        <div style="font-size: 1.1rem;line-height: 11px;">
            <img style="vertical-align: middle;" src="http://st.codeforces.com/s/21816/images/blog/tags.png" title="Tags" alt="Tags">
                <span style="padding: 0 0.35em;">
    <a href="/search?query=segment%2520tree" class="tag notice" style="text-decoration: none;">segment tree</a>,
                </span>
                <span style="padding: 0 0.35em;">
    <a href="/search?query=algorithms" class="tag notice" style="text-decoration: none;">algorithms</a>,
                </span>
                <span style="padding: 0 0.35em;">
    <a href="/search?query=tutorial" class="tag notice" style="text-decoration: none;">tutorial</a>
                </span>
        </div>

    <div class="roundbox meta" style="">
            <div class="roundbox-lt">&nbsp;</div>
            <div class="roundbox-rt">&nbsp;</div>
            <div class="roundbox-lb">&nbsp;</div>
            <div class="roundbox-rb">&nbsp;</div>
        <div class="left-meta">
            <ul>
                    <li>        <a href="#" class="topic-vote-up-15948"><img style="vertical-align:middle;position:relative;top:-0.2em;" src="http://st.codeforces.com/s/21816/images/actions/voteup.png" alt="Vote: I like it" title="Vote: I like it"></a>
        &nbsp;


        <a href="#" class="topic-vote-up-15948">
        
        </a>
</li>
                    <li>

        
        <span title="Topic rating" style="font-size:larger;font-weight:bold;color:green">+322</span>
        
</li>
                    <li>        <a href="#" class="topic-vote-down-15948"><img style="vertical-align:middle;position:relative;top:-0.2em;" src="http://st.codeforces.com/s/21816/images/actions/votedown.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
        &nbsp;


        <a href="#" class="topic-vote-down-15948">
        
        </a>
</li>
            </ul>
        </div>

        <div class="yashare-auto-init" style="display: inline; position: relative; top: 5px; left: 0;" data-yasharel10n="en" data-yasharetype="none" data-yasharelink="http://codeforces.com/blog/entry/15890" data-yasharetitle="Codeforces: Algorithm Gym :: Everything About Segment Trees" data-yasharequickservices="vkontakte,facebook,twitter,lj"><span class="b-share"><a rel="nofollow" target="_blank" title="VKontakte" class="b-share__handle b-share__link b-share-btn__vkontakte" href="https://share.yandex.net/go.xml?service=vkontakte&amp;url=http%3A%2F%2Fcodeforces.com%2Fblog%2Fentry%2F15890&amp;title=Codeforces%3A%20Algorithm%20Gym%20%3A%3A%20Everything%20About%20Segment%20Trees" data-service="vkontakte"><span class="b-share-icon b-share-icon_vkontakte"></span></a><a rel="nofollow" target="_blank" title="Facebook" class="b-share__handle b-share__link b-share-btn__facebook" href="https://share.yandex.net/go.xml?service=facebook&amp;url=http%3A%2F%2Fcodeforces.com%2Fblog%2Fentry%2F15890&amp;title=Codeforces%3A%20Algorithm%20Gym%20%3A%3A%20Everything%20About%20Segment%20Trees" data-service="facebook"><span class="b-share-icon b-share-icon_facebook"></span></a><a rel="nofollow" target="_blank" title="Twitter" class="b-share__handle b-share__link b-share-btn__twitter" href="https://share.yandex.net/go.xml?service=twitter&amp;url=http%3A%2F%2Fcodeforces.com%2Fblog%2Fentry%2F15890&amp;title=Codeforces%3A%20Algorithm%20Gym%20%3A%3A%20Everything%20About%20Segment%20Trees" data-service="twitter"><span class="b-share-icon b-share-icon_twitter"></span></a><a rel="nofollow" target="_blank" title="LiveJournal" class="b-share__handle b-share__link b-share-btn__lj" href="https://share.yandex.net/go.xml?service=lj&amp;url=http%3A%2F%2Fcodeforces.com%2Fblog%2Fentry%2F15890&amp;title=Codeforces%3A%20Algorithm%20Gym%20%3A%3A%20Everything%20About%20Segment%20Trees" data-service="lj"><span class="b-share-icon b-share-icon_lj"></span></a></span></div>

        <span style="position: relative; top: 7px; left: 0.8em;">
        </span>

        <div class="right-meta">
            <ul>
                    <li>        <a href="/profile/DarthPrince"><img style="vertical-align:middle;position:relative;top:-0.2em;" src="http://st.codeforces.com/s/21816/images/blog/user_16x16.png" alt="Author" title="Author"></a>
        &nbsp;


        <a href="/profile/DarthPrince">
        DarthPrince
        </a>
</li>
                    <li>        <img style="vertical-align:middle;position:relative;top:-0.2em;" src="http://st.codeforces.com/s/21816/images/blog/date_16x16.png" alt="Publication date" title="Publication date">
        &nbsp;


        
        <span class="format-humantime" title="Jan/19/2015 14:15 UTC">3 years ago</span>
        
</li>
                    <li>        <a href="/blog/entry/15890#comments"><img style="vertical-align:middle;position:relative;top:-0.2em;" src="http://st.codeforces.com/s/21816/images/blog/comments_16x16.png" alt="Comments" title="Comments"></a>
        &nbsp;


        <a href="/blog/entry/15890#comments">
        68
        </a>
</li>
            </ul>
        </div>

        <br style="clear:both;">
    </div>


<div class="comments" commentableid="15964">
    <div class="title">
        <img src="http://st.codeforces.com/s/21816/images/icons/comments-48x48.png" alt="Comments" title="Comments" style="position:relative;top:0.6em;">
        <a name="comments">Comments (68)</a>
    </div>
    <div><a href="#" class="new-root-comment" style="float:right;position:relative;bottom:3.25em;">Write comment?</a></div>

<div class="comment">
    <table class="comment-table" commentid="208410" commentparentid="-1">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/1e9" style="position: relative;">
<img src="http://userpic.codeforces.com/no-avatar.jpg">        </a>
        <div><a href="/profile/1e9" title="Expert 1e9" class="rated-user user-blue">1e9</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Jan/21/2015 20:27 UTC">3 years ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-208410" href="?#comment-208410" style="font-size:1.2em;">#</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="208410" data-commentrating="18" data-commentuserid="91305">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:green;font-weight:bold;">+18</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-208410">
                    <div class="moveup">
                    <div class="ttypography"><p>Another nice blog. Thanks. And if possible write a blog on Graph + DP.</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-208410 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-208410 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-208410">
            <li>
<div class="comment">
    <table class="comment-table" commentid="227639" commentparentid="208410">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/sheri.mori" style="position: relative;">
<img src="http://userpic.codeforces.com/275569/avatar/64ba0fe07623bc31.jpg">        </a>
        <div><a href="/profile/sheri.mori" title="Specialist sheri.mori" class="rated-user user-cyan">sheri.mori</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="May/16/2015 05:21 UTC">3 years ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-227639" href="?#comment-227639" style="font-size:1.2em;">#</a></span>
                        <span class="item"><a title="Parent comment" href="#comment-208410" style="font-size:1.2em;">^</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="227639" data-commentrating="2" data-commentuserid="275569">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:green;font-weight:bold;">+2</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-227639">
                    <div class="moveup">
                    <div class="ttypography"><p>YES,I would love it to learn DP from <a class="rated-user user-orange" href="/profile/PrinceOfPersia" title="Master PrinceOfPersia">PrinceOfPersia</a>'s blog</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-227639 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-227639 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-227639">
    </ul>
</div>
</li>
    </ul>
</div>

<div class="comment">
    <table class="comment-table" commentid="208449" commentparentid="-1">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/Duxar" style="position: relative;">
<img src="http://userpic.codeforces.com/no-avatar.jpg">        </a>
        <div><a href="/profile/Duxar" title="Candidate Master Duxar" class="rated-user user-violet">Duxar</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Jan/22/2015 07:46 UTC">3 years ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-208449" href="?#comment-208449" style="font-size:1.2em;">#</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        <span style="" commentid="208449" revisioncount="3" revision="3">
                            <a href="#" style="text-decoration:none;font-size:1.4rem;color:#bebebe;" class="leftRevision"></a>
                            Rev. <span class="revision">3</span>
                            <a href="#" style="text-decoration:none;font-size:1.4rem;visibility:hidden;color:#bebebe;" class="rightRevision"></a>
                        </span>
                        &nbsp;

<span commentid="208449" data-commentrating="11" data-commentuserid="2794">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:green;font-weight:bold;">+11</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-208449">
                    <div class="moveup">
                    <div class="ttypography"><p>Why there is no section only for algorithms and data structures on CF? I keep 2-3 tabs open all the time to avoid losing posts like this one.</p><p>Keep up the good work!</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-208449 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-208449 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-208449">
            <li>
<div class="comment">
    <table class="comment-table" commentid="208452" commentparentid="208449">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/pranshul" style="position: relative;">
<img src="http://userpic.codeforces.com/79580/avatar/e17fad5c2189d7bc.jpg">        </a>
        <div><a href="/profile/pranshul" title="Expert pranshul" class="rated-user user-blue">pranshul</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Jan/22/2015 08:49 UTC">3 years ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-208452" href="?#comment-208452" style="font-size:1.2em;">#</a></span>
                        <span class="item"><a title="Parent comment" href="#comment-208449" style="font-size:1.2em;">^</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="208452" data-commentrating="9" data-commentuserid="79580">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:green;font-weight:bold;">+9</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-208452">
                    <div class="moveup">
                    <div class="ttypography"><p>Nice idea. Meanwhile until the idea is implemented, you can click on the star at the end of the post so that it is added to your favorite blogs and you can always get back to it in future. You can also mark you favorite users(concept of friends) , problems, and solutions.</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-208452 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-208452 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-208452">
            <li>
<div class="comment">
    <table class="comment-table" commentid="208456" commentparentid="208452">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/Duxar" style="position: relative;">
<img src="http://userpic.codeforces.com/no-avatar.jpg">        </a>
        <div><a href="/profile/Duxar" title="Candidate Master Duxar" class="rated-user user-violet">Duxar</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Jan/22/2015 09:30 UTC">3 years ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-208456" href="?#comment-208456" style="font-size:1.2em;">#</a></span>
                        <span class="item"><a title="Parent comment" href="#comment-208452" style="font-size:1.2em;">^</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        <span style="" commentid="208456" revisioncount="2" revision="2">
                            <a href="#" style="text-decoration:none;font-size:1.4rem;color:#bebebe;" class="leftRevision"></a>
                            Rev. <span class="revision">2</span>
                            <a href="#" style="text-decoration:none;font-size:1.4rem;visibility:hidden;color:#bebebe;" class="rightRevision"></a>
                        </span>
                        &nbsp;

<span commentid="208456" data-commentrating="0" data-commentuserid="2794">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:gray;font-weight:bold;">0</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-208456">
                    <div class="moveup">
                    <div class="ttypography"><p>Yes, favorite! Nice feature, thanks (Also it was a memento to read them if I want to close the tab, now I will keep only one tab open just for that). I forgot about it. Now, how do I solve the problem of finding older posts about algorithms and data structures?</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-208456 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-208456 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-208456">
            <li>
<div class="comment">
    <table class="comment-table" commentid="208461" commentparentid="208456">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/JoudZouzou" style="position: relative;">
<img src="http://userpic.codeforces.com/no-avatar.jpg">        </a>
        <div><a href="/profile/JoudZouzou" title="Candidate Master JoudZouzou" class="rated-user user-violet">JoudZouzou</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Jan/22/2015 10:40 UTC">3 years ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-208461" href="?#comment-208461" style="font-size:1.2em;">#</a></span>
                        <span class="item"><a title="Parent comment" href="#comment-208456" style="font-size:1.2em;">^</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="208461" data-commentrating="1" data-commentuserid="97713">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:green;font-weight:bold;">+1</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-208461">
                    <div class="moveup">
                    <div class="ttypography"><p><a href="http://codeforces.com/blog/entry/13529">here are some</a></p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-208461 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-208461 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-208461">
    </ul>
</div>
</li>
    </ul>
</div>
</li>
    </ul>
</div>
</li>
    </ul>
</div>

<div class="comment">
    <table class="comment-table" commentid="208454" commentparentid="-1">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/MatRush" style="position: relative;">
<img src="http://userpic.codeforces.com/910/avatar/db5412adbd9d092e.jpg">        </a>
        <div><a href="/profile/MatRush" title="Expert MatRush" class="rated-user user-blue">MatRush</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Jan/22/2015 09:04 UTC">3 years ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-208454" href="?#comment-208454" style="font-size:1.2em;">#</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="208454" data-commentrating="0" data-commentuserid="910">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:gray;font-weight:bold;">0</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-208454">
                    <div class="moveup">
                    <div class="ttypography"><p>Asnwer -&gt; Answer :-)</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-208454 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-208454 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-208454">
            <li>
<div class="comment">
    <table class="comment-table" commentid="208455" commentparentid="208454">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/DarthPrince" style="position: relative;">
<img src="http://userpic.codeforces.com/207254/avatar/ff6d1315e77d5eda.jpg">        </a>
        <div><a href="/profile/DarthPrince" title="Master DarthPrince" class="rated-user user-orange">DarthPrince</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Jan/22/2015 09:09 UTC">3 years ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-208455" href="?#comment-208455" style="font-size:1.2em;">#</a></span>
                        <span class="item"><a title="Parent comment" href="#comment-208454" style="font-size:1.2em;">^</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="208455" data-commentrating="0" data-commentuserid="207254">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:gray;font-weight:bold;">0</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-208455">
                    <div class="moveup">
                    <div class="ttypography"><p>Thanks, fixed.</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-208455 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-208455 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-208455">
            <li>
<div class="comment">
    <table class="comment-table" commentid="208961" commentparentid="208455">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/aangairbender" style="position: relative;">
<img src="http://userpic.codeforces.com/69595/avatar/3d0c52866e8d4ed5.jpg">        </a>
        <div><a href="/profile/aangairbender" title="Candidate Master aangairbender" class="rated-user user-violet">aangairbender</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Jan/24/2015 20:19 UTC">3 years ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-208961" href="?#comment-208961" style="font-size:1.2em;">#</a></span>
                        <span class="item"><a title="Parent comment" href="#comment-208455" style="font-size:1.2em;">^</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="208961" data-commentrating="0" data-commentuserid="69595">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:gray;font-weight:bold;">0</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-208961">
                    <div class="moveup">
                    <div class="ttypography"><p>why downvote? He's an author))</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-208961 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-208961 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-208961">
    </ul>
</div>
</li>
    </ul>
</div>
</li>
    </ul>
</div>

<div class="comment">
    <table class="comment-table" commentid="208460" commentparentid="-1">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/ddt" style="position: relative;">
<img src="http://userpic.codeforces.com/52106/avatar/7a8e2b2fe6e43a65.jpg">        </a>
        <div><a href="/profile/ddt" title="Candidate Master ddt" class="rated-user user-violet">ddt</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Jan/22/2015 10:37 UTC">3 years ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-208460" href="?#comment-208460" style="font-size:1.2em;">#</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="208460" data-commentrating="5" data-commentuserid="52106">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:green;font-weight:bold;">+5</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-208460">
                    <div class="moveup">
                    <div class="ttypography"><p>Thanks a lot for the wonderful article :)</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-208460 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-208460 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-208460">
    </ul>
</div>

<div class="comment">
    <table class="comment-table" commentid="208505" commentparentid="-1">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/hiukim" style="position: relative;">
<img src="http://userpic.codeforces.com/no-avatar.jpg">        </a>
        <div><a href="/profile/hiukim" title="Expert hiukim" class="rated-user user-blue">hiukim</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Jan/22/2015 17:04 UTC">3 years ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-208505" href="?#comment-208505" style="font-size:1.2em;">#</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="208505" data-commentrating="6" data-commentuserid="67377">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:green;font-weight:bold;">+6</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-208505">
                    <div class="moveup">
                    <div class="ttypography"><p>A very good summary on segment tree! Thanks.</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-208505 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-208505 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-208505">
    </ul>
</div>

<div class="comment">
    <table class="comment-table" commentid="208511" commentparentid="-1">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/Queen_sacrifice" style="position: relative;">
<img src="http://userpic.codeforces.com/no-avatar.jpg">        </a>
        <div><a href="/profile/Queen_sacrifice" title="Pupil Queen_sacrifice" class="rated-user user-green">Queen_sacrifice</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Jan/22/2015 18:05 UTC">3 years ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-208511" href="?#comment-208511" style="font-size:1.2em;">#</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        <span style="" commentid="208511" revisioncount="2" revision="2">
                            <a href="#" style="text-decoration:none;font-size:1.4rem;color:#bebebe;" class="leftRevision"></a>
                            Rev. <span class="revision">2</span>
                            <a href="#" style="text-decoration:none;font-size:1.4rem;visibility:hidden;color:#bebebe;" class="rightRevision"></a>
                        </span>
                        &nbsp;

<span commentid="208511" data-commentrating="0" data-commentuserid="230976">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:gray;font-weight:bold;">0</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-208511">
                    <div class="moveup">
                    <div class="ttypography"><p>prince of persia did your online for kquery get AC?</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-208511 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-208511 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-208511">
            <li>
<div class="comment">
    <table class="comment-table comment-bad" commentid="208514" commentparentid="208511">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/DarthPrince" style="position: relative;">
<img src="http://userpic.codeforces.com/207254/avatar/ff6d1315e77d5eda.jpg">        </a>
        <div><a href="/profile/DarthPrince" title="Master DarthPrince" class="rated-user user-orange">DarthPrince</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Jan/22/2015 18:14 UTC">3 years ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-208514" href="?#comment-208514" style="font-size:1.2em;">#</a></span>
                        <span class="item"><a title="Parent comment" href="#comment-208511" style="font-size:1.2em;">^</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        <span style="" commentid="208514" revisioncount="2" revision="2">
                            <a href="#" style="text-decoration:none;font-size:1.4rem;color:#bebebe;" class="leftRevision"></a>
                            Rev. <span class="revision">2</span>
                            <a href="#" style="text-decoration:none;font-size:1.4rem;visibility:hidden;color:#bebebe;" class="rightRevision"></a>
                        </span>
                        &nbsp;

<span commentid="208514" class="negative-comment-vote" data-commentrating="-16" data-commentuserid="207254">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:gray;font-weight:bold;">-16</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-208514">
                    <div class="moveup">
                    <div class="ttypography"><p>I didn't submit it. It was just an example of segment tree with vector .</p><p>And by the way, prince, not price.</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-208514 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-208514 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-208514">
            <li>
<div class="comment">
    <table class="comment-table" commentid="208524" commentparentid="208514">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/Queen_sacrifice" style="position: relative;">
<img src="http://userpic.codeforces.com/no-avatar.jpg">        </a>
        <div><a href="/profile/Queen_sacrifice" title="Pupil Queen_sacrifice" class="rated-user user-green">Queen_sacrifice</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Jan/22/2015 19:29 UTC">3 years ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-208524" href="?#comment-208524" style="font-size:1.2em;">#</a></span>
                        <span class="item"><a title="Parent comment" href="#comment-208514" style="font-size:1.2em;">^</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="208524" data-commentrating="8" data-commentuserid="230976">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:green;font-weight:bold;">+8</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-208524">
                    <div class="moveup">
                    <div class="ttypography"><p>typo fixed. :)</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-208524 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-208524 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-208524">
    </ul>
</div>
</li>
    </ul>
</div>
</li>
            <li>
<div class="comment">
    <table class="comment-table" commentid="208978" commentparentid="208511">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/P_Nyagolov" style="position: relative;">
<img src="http://userpic.codeforces.com/239110/avatar/9494c230dc159315.jpg">        </a>
        <div><a href="/profile/P_Nyagolov" title="Candidate Master P_Nyagolov" class="rated-user user-violet">P_Nyagolov</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Jan/24/2015 21:51 UTC">3 years ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-208978" href="?#comment-208978" style="font-size:1.2em;">#</a></span>
                        <span class="item"><a title="Parent comment" href="#comment-208511" style="font-size:1.2em;">^</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="208978" data-commentrating="0" data-commentuserid="239110">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:gray;font-weight:bold;">0</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-208978">
                    <div class="moveup">
                    <div class="ttypography"><p>This was my first idea when I was solving the problem and it didn't get AC(I don't remember it was because of TLE or MLE).</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-208978 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-208978 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-208978">
            <li>
<div class="comment">
    <table class="comment-table" commentid="209220" commentparentid="208978">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/Queen_sacrifice" style="position: relative;">
<img src="http://userpic.codeforces.com/no-avatar.jpg">        </a>
        <div><a href="/profile/Queen_sacrifice" title="Pupil Queen_sacrifice" class="rated-user user-green">Queen_sacrifice</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Jan/25/2015 16:56 UTC">3 years ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-209220" href="?#comment-209220" style="font-size:1.2em;">#</a></span>
                        <span class="item"><a title="Parent comment" href="#comment-208978" style="font-size:1.2em;">^</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="209220" data-commentrating="0" data-commentuserid="230976">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:gray;font-weight:bold;">0</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-209220">
                    <div class="moveup">
                    <div class="ttypography"><p>i couldn't get AC with online. i dont know if any online submission would pass.</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-209220 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-209220 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-209220">
            <li>
<div class="comment">
    <table class="comment-table comment-bad" commentid="209229" commentparentid="209220">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/DarthPrince" style="position: relative;">
<img src="http://userpic.codeforces.com/207254/avatar/ff6d1315e77d5eda.jpg">        </a>
        <div><a href="/profile/DarthPrince" title="Master DarthPrince" class="rated-user user-orange">DarthPrince</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Jan/25/2015 17:24 UTC">3 years ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-209229" href="?#comment-209229" style="font-size:1.2em;">#</a></span>
                        <span class="item"><a title="Parent comment" href="#comment-209220" style="font-size:1.2em;">^</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        <span style="" commentid="209229" revisioncount="2" revision="2">
                            <a href="#" style="text-decoration:none;font-size:1.4rem;color:#bebebe;" class="leftRevision"></a>
                            Rev. <span class="revision">2</span>
                            <a href="#" style="text-decoration:none;font-size:1.4rem;visibility:hidden;color:#bebebe;" class="rightRevision"></a>
                        </span>
                        &nbsp;

<span commentid="209229" class="negative-comment-vote" data-commentrating="-16" data-commentuserid="207254">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:gray;font-weight:bold;">-16</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-209229">
                    <div class="moveup">
                    <div class="ttypography"><p>Use <code class="tt">getchar_unlocked</code> or <code class="tt">buffer</code> for reading inputs and <code class="tt">printf</code> for printing the output.</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-209229 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-209229 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-209229">
            <li>
<div class="comment">
    <table class="comment-table" commentid="209253" commentparentid="209229">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/Queen_sacrifice" style="position: relative;">
<img src="http://userpic.codeforces.com/no-avatar.jpg">        </a>
        <div><a href="/profile/Queen_sacrifice" title="Pupil Queen_sacrifice" class="rated-user user-green">Queen_sacrifice</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Jan/25/2015 18:51 UTC">3 years ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-209253" href="?#comment-209253" style="font-size:1.2em;">#</a></span>
                        <span class="item"><a title="Parent comment" href="#comment-209229" style="font-size:1.2em;">^</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="209253" data-commentrating="0" data-commentuserid="230976">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:gray;font-weight:bold;">0</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-209253">
                    <div class="moveup">
                    <div class="ttypography"><p>tried fread(). also, instead of vector, used static arrays. still TLE</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-209253 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-209253 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-209253">
    </ul>
</div>
</li>
    </ul>
</div>
</li>
    </ul>
</div>
</li>
    </ul>
</div>
</li>
    </ul>
</div>

<div class="comment">
    <table class="comment-table" commentid="208579" commentparentid="-1">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/mruxim" style="position: relative;">
<img src="http://userpic.codeforces.com/1011/avatar/13db97a685057c92.jpg">        </a>
        <div><a href="/profile/mruxim" title="International master mruxim" class="rated-user user-orange">mruxim</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Jan/23/2015 07:56 UTC">3 years ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-208579" href="?#comment-208579" style="font-size:1.2em;">#</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="208579" data-commentrating="37" data-commentuserid="1011">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:green;font-weight:bold;">+37</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-208579">
                    <div class="moveup">
                    <div class="ttypography"><p>it looks like <span class="tex-span"><i>O</i>((<i>n</i>+<i>m</i>).<i>log</i><sup class="upper-index">3</sup>(<i>n</i>))</span> solution for problem <a href="http://www.spoj.com/problems/MKTHNUM/">MKTHNUM</a> can fit in time limit! <a href="http://paste.fedoraproject.org/173426/">code</a> <span class="tex-span">:)</span></p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-208579 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-208579 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-208579">
            <li>
<div class="comment">
    <table class="comment-table comment-too-bad" commentid="208582" commentparentid="208579">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/DarthPrince" style="position: relative;">
<img src="http://userpic.codeforces.com/207254/avatar/ff6d1315e77d5eda.jpg">        </a>
        <div><a href="/profile/DarthPrince" title="Master DarthPrince" class="rated-user user-orange">DarthPrince</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Jan/23/2015 08:36 UTC">3 years ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-208582" href="?#comment-208582" style="font-size:1.2em;">#</a></span>
                        <span class="item"><a title="Parent comment" href="#comment-208579" style="font-size:1.2em;">^</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="208582" class="too-negative-comment-vote" data-commentrating="-31" data-commentuserid="207254">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:gray;font-weight:bold;">-31</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-208582" style="display: none;">
                    <div class="moveup">
                    <div class="ttypography"><p>What's your purpose ? Learning algorithm or getting AC ?</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-208582 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-208582 en false" href="#">Reply</a>
                </div>
            <div class="bad-comment-replacement ttypography">The comment is hidden because of too negative feedback, click <a href="#" class="show-bad-comment-link">here</a> to view it</div></td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-208582">
            <li>
<div class="comment">
    <table class="comment-table" commentid="208584" commentparentid="208582">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/Junior94" style="position: relative;">
<img src="http://userpic.codeforces.com/93671/avatar/678a472cb5f08a01.jpg">        </a>
        <div><a href="/profile/Junior94" title="Specialist Junior94" class="rated-user user-cyan">Junior94</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Jan/23/2015 09:08 UTC">3 years ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-208584" href="?#comment-208584" style="font-size:1.2em;">#</a></span>
                        <span class="item"><a title="Parent comment" href="#comment-208582" style="font-size:1.2em;">^</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="208584" data-commentrating="29" data-commentuserid="93671">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:green;font-weight:bold;">+29</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-208584">
                    <div class="moveup">
                    <div class="ttypography"><p>Why not both?</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-208584 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-208584 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-208584">
            <li>
<div class="comment">
    <table class="comment-table comment-too-bad" commentid="208591" commentparentid="208584">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/DarthPrince" style="position: relative;">
<img src="http://userpic.codeforces.com/207254/avatar/ff6d1315e77d5eda.jpg">        </a>
        <div><a href="/profile/DarthPrince" title="Master DarthPrince" class="rated-user user-orange">DarthPrince</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Jan/23/2015 09:41 UTC">3 years ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-208591" href="?#comment-208591" style="font-size:1.2em;">#</a></span>
                        <span class="item"><a title="Parent comment" href="#comment-208584" style="font-size:1.2em;">^</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="208591" class="too-negative-comment-vote" data-commentrating="-39" data-commentuserid="207254">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:gray;font-weight:bold;">-39</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-208591" style="display: none;">
                    <div class="moveup">
                    <div class="ttypography"><p>If you want both, don't let it go when you got AC, go and learn the best way, instead of kicking my ass with your crap algorithm (we call it TOF in Persian).</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-208591 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-208591 en false" href="#">Reply</a>
                </div>
            <div class="bad-comment-replacement ttypography">The comment is hidden because of too negative feedback, click <a href="#" class="show-bad-comment-link">here</a> to view it</div></td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-208591">
            <li>
<div class="comment">
    <table class="comment-table" commentid="208857" commentparentid="208591">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/halfo" style="position: relative;">
<img src="http://userpic.codeforces.com/47795/avatar/ab897705640bf02f.jpg">        </a>
        <div><a href="/profile/halfo" title="Expert halfo" class="rated-user user-blue">halfo</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Jan/24/2015 13:41 UTC">3 years ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-208857" href="?#comment-208857" style="font-size:1.2em;">#</a></span>
                        <span class="item"><a title="Parent comment" href="#comment-208591" style="font-size:1.2em;">^</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="208857" data-commentrating="19" data-commentuserid="47795">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:green;font-weight:bold;">+19</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-208857">
                    <div class="moveup">
                    <div class="ttypography"><p>The best algorithm is the one that works (i.e. gets AC) and easier to think of and to write.</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-208857 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-208857 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-208857">
    </ul>
</div>
</li>
            <li>
<div class="comment">
    <table class="comment-table" commentid="238975" commentparentid="208591">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/nashir" style="position: relative;">
<img src="http://userpic.codeforces.com/214097/avatar/433ad7a887db4191.jpg">        </a>
        <div><a href="/profile/nashir" title="Expert nashir" class="rated-user user-blue">nashir</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Jun/29/2015 15:25 UTC">3 years ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-238975" href="?#comment-238975" style="font-size:1.2em;">#</a></span>
                        <span class="item"><a title="Parent comment" href="#comment-208591" style="font-size:1.2em;">^</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        <span style="" commentid="238975" revisioncount="2" revision="2">
                            <a href="#" style="text-decoration:none;font-size:1.4rem;color:#bebebe;" class="leftRevision"></a>
                            Rev. <span class="revision">2</span>
                            <a href="#" style="text-decoration:none;font-size:1.4rem;visibility:hidden;color:#bebebe;" class="rightRevision"></a>
                        </span>
                        &nbsp;

<span commentid="238975" data-commentrating="0" data-commentuserid="214097">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:gray;font-weight:bold;">0</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-238975">
                    <div class="moveup">
                    <div class="ttypography"><p><a class="rated-user user-orange" href="/profile/PrinceOfPersia" title="International master PrinceOfPersia">PrinceOfPersia</a> i'm so pissed watching your comment getting down voted -_-</p><p>people can be so ungrateful :/</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-238975 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-238975 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-238975">
    </ul>
</div>
</li>
    </ul>
</div>
</li>
    </ul>
</div>
</li>
    </ul>
</div>
</li>
    </ul>
</div>

<div class="comment">
    <table class="comment-table" commentid="208638" commentparentid="-1">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/300pound" style="position: relative;">
<img src="http://userpic.codeforces.com/259970/avatar/3a80913a5bae34fe.jpg">        </a>
        <div><a href="/profile/300pound" title="Pupil 300pound" class="rated-user user-green">300pound</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Jan/23/2015 15:48 UTC">3 years ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-208638" href="?#comment-208638" style="font-size:1.2em;">#</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        <span style="" commentid="208638" revisioncount="2" revision="2">
                            <a href="#" style="text-decoration:none;font-size:1.4rem;color:#bebebe;" class="leftRevision"></a>
                            Rev. <span class="revision">2</span>
                            <a href="#" style="text-decoration:none;font-size:1.4rem;visibility:hidden;color:#bebebe;" class="rightRevision"></a>
                        </span>
                        &nbsp;

<span commentid="208638" data-commentrating="0" data-commentuserid="259970">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:gray;font-weight:bold;">0</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-208638">
                    <div class="moveup">
                    <div class="ttypography"><p>Thanks again to PrinceOfPersia for this great tutorial</p><p>Just a tip,when I was solving 380 Problem C with guidance from the code above, I got snagged at the querying input format.</p><p>To get the value of a specific cell 0, the function to call is segment(0,1); Hence since the input adheres to 1-based indexing, segment(l-1,r) will do it.</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-208638 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-208638 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-208638">
    </ul>
</div>

<div class="comment">
    <table class="comment-table" commentid="208825" commentparentid="-1">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/burakcetin" style="position: relative;">
<img src="http://userpic.codeforces.com/83043/avatar/520826416909d8fa.jpg">        </a>
        <div><a href="/profile/burakcetin" title="Candidate Master burakcetin" class="rated-user user-violet">burakcetin</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Jan/24/2015 08:21 UTC">3 years ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-208825" href="?#comment-208825" style="font-size:1.2em;">#</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="208825" data-commentrating="3" data-commentuserid="83043">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:green;font-weight:bold;">+3</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-208825">
                    <div class="moveup">
                    <div class="ttypography"><p>Nice tutorial!! It will take some time reading all of it though B).</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-208825 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-208825 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-208825">
    </ul>
</div>

<div class="comment">
    <table class="comment-table" commentid="209960" commentparentid="-1">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/grayhathacker" style="position: relative;">
<img src="http://userpic.codeforces.com/217658/avatar/ee43ff44d3cdf799.jpg">        </a>
        <div><a href="/profile/grayhathacker" title="Expert grayhathacker" class="rated-user user-blue">grayhathacker</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Jan/29/2015 08:53 UTC">3 years ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-209960" href="?#comment-209960" style="font-size:1.2em;">#</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="209960" data-commentrating="-8" data-commentuserid="217658">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:gray;font-weight:bold;">-8</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-209960">
                    <div class="moveup">
                    <div class="ttypography"><p>this tutorial extracted the fear of segment tree out of me... thanx :)</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-209960 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-209960 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-209960">
    </ul>
</div>

<div class="comment">
    <table class="comment-table" commentid="210107" commentparentid="-1">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/shubham_466" style="position: relative;">
<img src="http://userpic.codeforces.com/136752/avatar/960422f0763ef545.jpg">        </a>
        <div><a href="/profile/shubham_466" title="Specialist shubham_466" class="rated-user user-cyan">shubham_466</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Jan/30/2015 06:35 UTC">3 years ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-210107" href="?#comment-210107" style="font-size:1.2em;">#</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="210107" data-commentrating="-8" data-commentuserid="136752">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:gray;font-weight:bold;">-8</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-210107">
                    <div class="moveup">
                    <div class="ttypography"><p>Great tutorial!! <a class="rated-user user-violet" href="/profile/PrinceOfPersia" title="Candidate Master PrinceOfPersia">PrinceOfPersia</a> can u write a blog on BIT? That would be a lot of help!!</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-210107 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-210107 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-210107">
    </ul>
</div>

<div class="comment">
    <table class="comment-table" commentid="214007" commentparentid="-1">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/surjection" style="position: relative;">
<img src="http://userpic.codeforces.com/no-avatar.jpg">        </a>
        <div><a href="/profile/surjection" title="Unrated, surjection" class="rated-user user-black">surjection</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Feb/20/2015 16:44 UTC">3 years ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-214007" href="?#comment-214007" style="font-size:1.2em;">#</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="214007" data-commentrating="0" data-commentuserid="62090">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:gray;font-weight:bold;">0</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-214007">
                    <div class="moveup">
                    <div class="ttypography"><p>Great tutorial! Thanks for your effort.</p><p>Did you submit the solution you described here for <a href="http://www.spoj.com/problems/POSTERS/">SPOJ POSTERS</a>? I ask because I am not convinced that a solution using segment trees and co-ordinate compression is possible. The only implementations I have found that try to do this fail on the following test case:</p> <pre><code class="prettyprint"><span class="lit">1</span><span class="pln">
</span><span class="lit">3</span><span class="pln">
</span><span class="lit">3</span><span class="pln"> </span><span class="lit">7</span><span class="pln">
</span><span class="lit">1</span><span class="pln"> </span><span class="lit">3</span><span class="pln">
</span><span class="lit">7</span><span class="pln"> </span><span class="lit">10</span></code></pre><p>The expected output is <code class="tt">3</code> but segment tree/coordinate compression solutions give <code class="tt">2</code>.</p><p>Can you point me to an implementation using segment trees and co-ordinate compression that can deal with this case? My own attempt is <a href="http://pastebin.com/a9fmSew0">here</a>.</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-214007 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-214007 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-214007">
            <li>
<div class="comment">
    <table class="comment-table" commentid="238979" commentparentid="214007">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/nashir" style="position: relative;">
<img src="http://userpic.codeforces.com/214097/avatar/433ad7a887db4191.jpg">        </a>
        <div><a href="/profile/nashir" title="Expert nashir" class="rated-user user-blue">nashir</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Jun/29/2015 15:39 UTC">3 years ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-238979" href="?#comment-238979" style="font-size:1.2em;">#</a></span>
                        <span class="item"><a title="Parent comment" href="#comment-214007" style="font-size:1.2em;">^</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        <span style="" commentid="238979" revisioncount="6" revision="6">
                            <a href="#" style="text-decoration:none;font-size:1.4rem;color:#bebebe;" class="leftRevision"></a>
                            Rev. <span class="revision">6</span>
                            <a href="#" style="text-decoration:none;font-size:1.4rem;visibility:hidden;color:#bebebe;" class="rightRevision"></a>
                        </span>
                        &nbsp;

<span commentid="238979" data-commentrating="0" data-commentuserid="214097">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:gray;font-weight:bold;">0</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-238979">
                    <div class="moveup">
                    <div class="ttypography"><p>compression can be done for this problem.but you have to be implement it a bit differently. author missed to point it out.</p><p>while compressing the highest relative difference has to be 2 or greater, not 1 like general compression.</p><p>otherwise failure will occur like you've stated above.</p><p>So while compressing you'll have to include the numbers before and after of every 'special' numbers (l or r for every queries)</p><p>Then it will work just fine.</p><p><a href="http://http://pastebin.com/mJF4RmdD">here</a> is my implementation. :)</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-238979 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-238979 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-238979">
    </ul>
</div>
</li>
            <li>
<div class="comment">
    <table class="comment-table" commentid="365880" commentparentid="214007">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/sleepify" style="position: relative;">
<img src="http://userpic.codeforces.com/272612/avatar/c7f320529aecb8da.jpg">        </a>
        <div><a href="/profile/sleepify" title="Expert sleepify" class="rated-user user-blue">sleepify</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Jun/10/2017 02:30 UTC">10 months ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-365880" href="?#comment-365880" style="font-size:1.2em;">#</a></span>
                        <span class="item"><a title="Parent comment" href="#comment-214007" style="font-size:1.2em;">^</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        <span style="" commentid="365880" revisioncount="2" revision="2">
                            <a href="#" style="text-decoration:none;font-size:1.4rem;color:#bebebe;" class="leftRevision"></a>
                            Rev. <span class="revision">2</span>
                            <a href="#" style="text-decoration:none;font-size:1.4rem;visibility:hidden;color:#bebebe;" class="rightRevision"></a>
                        </span>
                        &nbsp;

<span commentid="365880" data-commentrating="0" data-commentuserid="272612">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:gray;font-weight:bold;">0</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-365880">
                    <div class="moveup">
                    <div class="ttypography"><p>There is a bug in the author's code for POSTERS. Change id = 0 to id = 1 in the upd function. Here's my implementation. <a href="http://ideone.com/10PrW4">Code</a></p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-365880 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-365880 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-365880">
    </ul>
</div>
</li>
    </ul>
</div>

<div class="comment">
    <table class="comment-table" commentid="214018" commentparentid="-1">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/mowji" style="position: relative;">
<img src="http://userpic.codeforces.com/149873/avatar/12a71b22a8e8bb5.jpg">        </a>
        <div><a href="/profile/mowji" title="Candidate Master mowji" class="rated-user user-violet">mowji</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Feb/20/2015 18:22 UTC">3 years ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-214018" href="?#comment-214018" style="font-size:1.2em;">#</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="214018" data-commentrating="0" data-commentuserid="149873">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:gray;font-weight:bold;">0</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-214018">
                    <div class="moveup">
                    <div class="ttypography"><p>Very grateful keep on doing your job!</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-214018 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-214018 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-214018">
    </ul>
</div>

<div class="comment">
    <table class="comment-table" commentid="217515" commentparentid="-1">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/anajin" style="position: relative;">
<img src="http://userpic.codeforces.com/221428/avatar/b8f5979933e2ce3d.jpg">        </a>
        <div><a href="/profile/anajin" title="Expert anajin" class="rated-user user-blue">anajin</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Mar/14/2015 03:24 UTC">3 years ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-217515" href="?#comment-217515" style="font-size:1.2em;">#</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="217515" data-commentrating="0" data-commentuserid="221428">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:gray;font-weight:bold;">0</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-217515">
                    <div class="moveup">
                    <div class="ttypography"><p>great job! Can you give me more problems solved by offline SegmentTree/BIT ? Thanks in advance.</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-217515 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-217515 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-217515">
    </ul>
</div>

<div class="comment">
    <table class="comment-table" commentid="227574" commentparentid="-1">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/terribleimposter" style="position: relative;">
<img src="http://userpic.codeforces.com/no-avatar.jpg">        </a>
        <div><a href="/profile/terribleimposter" title="Candidate Master terribleimposter" class="rated-user user-violet">terribleimposter</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="May/15/2015 13:27 UTC">3 years ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-227574" href="?#comment-227574" style="font-size:1.2em;">#</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="227574" data-commentrating="8" data-commentuserid="135989">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:green;font-weight:bold;">+8</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-227574">
                    <div class="moveup">
                    <div class="ttypography"><p>According to C++ reference, <a href="http://www.cplusplus.com/reference/set/multiset/count/">multiset::count is linear in number of matches</a>. Hence in your subsection  Segment tree with sets  if say 1 is inserted into the first vector n times and the query is to count the number of occurences of 1 in all the vectors, then that query actually takes O(n) time. There can be n such queries resulting in O(n^2) overall running time. Is there a workaround to this?</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-227574 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-227574 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-227574">
    </ul>
</div>

<div class="comment">
    <table class="comment-table" commentid="227578" commentparentid="-1">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/kien_coi_1997" style="position: relative;">
<img src="http://userpic.codeforces.com/104437/avatar/158f7238c931ef1e.jpg">        </a>
        <div><a href="/profile/kien_coi_1997" title="International master kien_coi_1997" class="rated-user user-orange">kien_coi_1997</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="May/15/2015 14:12 UTC">3 years ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-227578" href="?#comment-227578" style="font-size:1.2em;">#</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="227578" data-commentrating="0" data-commentuserid="104437">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:gray;font-weight:bold;">0</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-227578">
                    <div class="moveup">
                    <div class="ttypography"><p>It is possible to combine AVL tree vs Segment tree to have a new structure called Segment tree with insert and delete operators.</p><p><a href="http://codeforces.com/blog/entry/12285">http://codeforces.com/blog/entry/12285</a></p><p>Just for fun! It is quite useless.</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-227578 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-227578 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-227578">
    </ul>
</div>

<div class="comment">
    <table class="comment-table" commentid="229324" commentparentid="-1">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/suraj021" style="position: relative;">
<img src="http://userpic.codeforces.com/266541/avatar/ea8db2c7dde20165.jpg">        </a>
        <div><a href="/profile/suraj021" title="Pupil suraj021" class="rated-user user-green">suraj021</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="May/23/2015 13:28 UTC">3 years ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-229324" href="?#comment-229324" style="font-size:1.2em;">#</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="229324" data-commentrating="0" data-commentuserid="266541">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:gray;font-weight:bold;">0</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-229324">
                    <div class="moveup">
                    <div class="ttypography"><p><a class="rated-user user-orange" href="/profile/PrinceOfPersia" title="Master PrinceOfPersia">PrinceOfPersia</a> this is a wonderful article on segment tree and thanks a lot for this . But seriously i am having hard time understanding the logic used in the solution of very first. :( Can you please EXPLAIN ? </p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-229324 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-229324 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-229324">
            <li>
<div class="comment">
    <table class="comment-table" commentid="229914" commentparentid="229324">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/suraj021" style="position: relative;">
<img src="http://userpic.codeforces.com/266541/avatar/ea8db2c7dde20165.jpg">        </a>
        <div><a href="/profile/suraj021" title="Pupil suraj021" class="rated-user user-green">suraj021</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="May/26/2015 12:46 UTC">3 years ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-229914" href="?#comment-229914" style="font-size:1.2em;">#</a></span>
                        <span class="item"><a title="Parent comment" href="#comment-229324" style="font-size:1.2em;">^</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="229914" data-commentrating="0" data-commentuserid="266541">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:gray;font-weight:bold;">0</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-229914">
                    <div class="moveup">
                    <div class="ttypography"><p>I got the logic . Thanks</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-229914 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-229914 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-229914">
    </ul>
</div>
</li>
    </ul>
</div>

<div class="comment">
    <table class="comment-table" commentid="240221" commentparentid="-1">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/sierra101" style="position: relative;">
<img src="http://userpic.codeforces.com/223651/avatar/f4a059661f327315.jpg">        </a>
        <div><a href="/profile/sierra101" title="Specialist sierra101" class="rated-user user-cyan">sierra101</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Jul/08/2015 03:44 UTC">3 years ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-240221" href="?#comment-240221" style="font-size:1.2em;">#</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="240221" data-commentrating="0" data-commentuserid="223651">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:gray;font-weight:bold;">0</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-240221">
                    <div class="moveup">
                    <div class="ttypography"><p>how to scale values in a given range say [L,R] with a constant say C,by segment tree or BIT.</p><p>Thanks in advance :D</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-240221 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-240221 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-240221">
            <li>
<div class="comment">
    <table class="comment-table" commentid="240222" commentparentid="240221">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/zxqfl" style="position: relative;">
<img src="http://userpic.codeforces.com/200970/avatar/b0890d52d946eeb8.jpg">        </a>
        <div><a href="/profile/zxqfl" title="International Grandmaster zxqfl" class="rated-user user-red">zxqfl</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Jul/08/2015 04:29 UTC">3 years ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-240222" href="?#comment-240222" style="font-size:1.2em;">#</a></span>
                        <span class="item"><a title="Parent comment" href="#comment-240221" style="font-size:1.2em;">^</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="240222" data-commentrating="5" data-commentuserid="200970">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:green;font-weight:bold;">+5</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-240222">
                    <div class="moveup">
                    <div class="ttypography"><p>Values are integers <span class="tex-span"></span> brute force, scaling more than 64 times would cause overflow anyway</p><p>Values are floating-point <span class="tex-span"></span> <img align="middle" class="tex-formula" src="/predownloaded/0d/d3/0dd3d7f5259b4135d94691ad3c45df735c193b91.png" style="max-width: 100.0%;max-height: 100.0%;"></p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-240222 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-240222 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-240222">
            <li>
<div class="comment">
    <table class="comment-table" commentid="240234" commentparentid="240222">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/sierra101" style="position: relative;">
<img src="http://userpic.codeforces.com/223651/avatar/f4a059661f327315.jpg">        </a>
        <div><a href="/profile/sierra101" title="Specialist sierra101" class="rated-user user-cyan">sierra101</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Jul/08/2015 08:58 UTC">3 years ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-240234" href="?#comment-240234" style="font-size:1.2em;">#</a></span>
                        <span class="item"><a title="Parent comment" href="#comment-240222" style="font-size:1.2em;">^</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="240234" data-commentrating="0" data-commentuserid="223651">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:gray;font-weight:bold;">0</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-240234">
                    <div class="moveup">
                    <div class="ttypography"><p>could u provide a link to implementation of code and problems on same :D</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-240234 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-240234 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-240234">
            <li>
<div class="comment">
    <table class="comment-table" commentid="240253" commentparentid="240234">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/zxqfl" style="position: relative;">
<img src="http://userpic.codeforces.com/200970/avatar/b0890d52d946eeb8.jpg">        </a>
        <div><a href="/profile/zxqfl" title="International Grandmaster zxqfl" class="rated-user user-red">zxqfl</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Jul/08/2015 14:00 UTC">3 years ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-240253" href="?#comment-240253" style="font-size:1.2em;">#</a></span>
                        <span class="item"><a title="Parent comment" href="#comment-240234" style="font-size:1.2em;">^</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="240253" data-commentrating="0" data-commentuserid="200970">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:gray;font-weight:bold;">0</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-240253">
                    <div class="moveup">
                    <div class="ttypography"><p>I don't have those things; since I assume you're talking about the floating-point case, I'll go into a little more detail:</p><p>When you have an array <span class="tex-span"><i>A</i></span>, instead of adding <span class="tex-span"><i>A</i>[<i>i</i>]</span> to your BIT, add <img align="middle" class="tex-formula" src="/predownloaded/28/65/28651d2d7fbd0964170bceabb317d3265a23c7c7.png" style="max-width: 100.0%;max-height: 100.0%;">. When you want to scale by <span class="tex-span"><i>C</i></span> in the range <span class="tex-span">[<i>l</i>,<i>r</i>]</span>, instead add <img align="middle" class="tex-formula" src="/predownloaded/d3/34/d3348c227f67c5af1c9347f1ae87f9a2089d188a.png" style="max-width: 100.0%;max-height: 100.0%;"> in the range <span class="tex-span">[<i>l</i>,<i>r</i>]</span>. When you want to find the value of <span class="tex-span"><i>A</i>[<i>i</i>]</span>, the value is given by <span class="tex-span"><i>e</i><sup class="upper-index"><i>A</i>[<i>i</i>]</sup></span>.</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-240253 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-240253 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-240253">
    </ul>
</div>
</li>
    </ul>
</div>
</li>
    </ul>
</div>
</li>
    </ul>
</div>

<div class="comment">
    <table class="comment-table" commentid="240255" commentparentid="-1">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/rumman_sust" style="position: relative;">
<img src="http://userpic.codeforces.com/56602/avatar/4ba0551c143ec97a.jpg">        </a>
        <div><a href="/profile/rumman_sust" title="Expert rumman_sust" class="rated-user user-blue">rumman_sust</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Jul/08/2015 15:12 UTC">3 years ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-240255" href="?#comment-240255" style="font-size:1.2em;">#</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="240255" data-commentrating="0" data-commentuserid="56602">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:gray;font-weight:bold;">0</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-240255">
                    <div class="moveup">
                    <div class="ttypography"><p>Such an helpful post. Thank you very much. If you have enough time please write about line sweeping with segment tree :)</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-240255 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-240255 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-240255">
    </ul>
</div>

<div class="comment">
    <table class="comment-table" commentid="265838" commentparentid="-1">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/1theweblover007" style="position: relative;">
<img src="http://userpic.codeforces.com/no-avatar.jpg">        </a>
        <div><a href="/profile/1theweblover007" title="Pupil 1theweblover007" class="rated-user user-green">1theweblover007</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Dec/02/2015 16:22 UTC">2 years ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-265838" href="?#comment-265838" style="font-size:1.2em;">#</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="265838" data-commentrating="4" data-commentuserid="299666">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:green;font-weight:bold;">+4</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-265838">
                    <div class="moveup">
                    <div class="ttypography"><pre><code class="prettyprint"><span class="kwd">void</span><span class="pln"> build</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> id </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> l </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> r </span><span class="pun">=</span><span class="pln"> n</span><span class="pun">){</span><span class="pln">
    </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">r </span><span class="pun">-</span><span class="pln"> l </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">2</span><span class="pun">){</span><span class="pln">
        </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">s</span><span class="pun">[</span><span class="pln">l</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">'('</span><span class="pun">)</span><span class="pln">
            o</span><span class="pun">[</span><span class="pln">id</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">else</span><span class="pln">
            c</span><span class="pun">[</span><span class="pln">id</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> mid </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">l</span><span class="pun">+</span><span class="pln">r</span><span class="pun">)/</span><span class="lit">2</span><span class="pun">;</span><span class="pln">
    build</span><span class="pun">(</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> id</span><span class="pun">,</span><span class="pln">l</span><span class="pun">,</span><span class="pln">mid</span><span class="pun">);</span><span class="pln">
    build</span><span class="pun">(</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> id </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln">mid</span><span class="pun">,</span><span class="pln">r</span><span class="pun">);</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> tmp </span><span class="pun">=</span><span class="pln"> min</span><span class="pun">(</span><span class="pln">o</span><span class="pun">[</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> id</span><span class="pun">],</span><span class="pln">c</span><span class="pun">[</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> id </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">]);</span><span class="pln">
    t</span><span class="pun">[</span><span class="pln">id</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> t</span><span class="pun">[</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> id</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> t</span><span class="pun">[</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> id </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> tmp</span><span class="pun">;</span><span class="pln">
    o</span><span class="pun">[</span><span class="pln">id</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> o</span><span class="pun">[</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> id</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> o</span><span class="pun">[</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> id </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> tmp</span><span class="pun">;</span><span class="pln">
    c</span><span class="pun">[</span><span class="pln">id</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> c</span><span class="pun">[</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> id</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> c</span><span class="pun">[</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> id </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> tmp</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></code></pre><p><a class="rated-user user-orange" href="/profile/PrinceOfPersia" title="International master PrinceOfPersia">PrinceOfPersia</a> Should'nt it be- build(2 * id + 1,mid+1,r); I think probably you have missed "mid+1" part.</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-265838 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-265838 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-265838">
            <li>
<div class="comment">
    <table class="comment-table" commentid="265841" commentparentid="265838">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/numbertheorist17" style="position: relative;">
<img src="http://userpic.codeforces.com/151749/avatar/f9010c74be8726c5.jpg">        </a>
        <div><a href="/profile/numbertheorist17" title="Candidate Master numbertheorist17" class="rated-user user-violet">numbertheorist17</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Dec/02/2015 17:06 UTC">2 years ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-265841" href="?#comment-265841" style="font-size:1.2em;">#</a></span>
                        <span class="item"><a title="Parent comment" href="#comment-265838" style="font-size:1.2em;">^</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="265841" data-commentrating="23" data-commentuserid="151749">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:green;font-weight:bold;">+23</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-265841">
                    <div class="moveup">
                    <div class="ttypography"><p>Actually, it is correct as written (it should not be mid+1). The reason is the way the code is written is for the interval <span class="tex-span">[<i>l</i>,<i>r</i>)</span>, and he splits the interval into <span class="tex-span">[<i>l</i>,<i>mid</i>)</span> and <span class="tex-span">[<i>mid</i>,<i>r</i>)</span>.</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-265841 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-265841 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-265841">
    </ul>
</div>
</li>
    </ul>
</div>

<div class="comment">
    <table class="comment-table" commentid="270440" commentparentid="-1">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/no0neHearsUsButTheSky" style="position: relative;">
<img src="http://userpic.codeforces.com/358754/avatar/c67edf4086c050bf.jpg">        </a>
        <div><a href="/profile/no0neHearsUsButTheSky" title="Specialist no0neHearsUsButTheSky" class="rated-user user-cyan">no0neHearsUsButTheSky</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Jan/01/2016 17:55 UTC">2 years ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-270440" href="?#comment-270440" style="font-size:1.2em;">#</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="270440" data-commentrating="0" data-commentuserid="358754">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:gray;font-weight:bold;">0</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-270440">
                    <div class="moveup">
                    <div class="ttypography"><p>Great editorial <strong>AmirMohammad Dehghan</strong> . Thanks a lot :)</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-270440 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-270440 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-270440">
    </ul>
</div>

<div class="comment">
    <table class="comment-table comment-bad" commentid="274994" commentparentid="-1">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/rajanparmar94" style="position: relative;">
<img src="http://userpic.codeforces.com/371837/avatar/b0cdf29896d5616a.jpg">        </a>
        <div><a href="/profile/rajanparmar94" title="Pupil rajanparmar94" class="rated-user user-green">rajanparmar94</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Jan/27/2016 12:45 UTC">2 years ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-274994" href="?#comment-274994" style="font-size:1.2em;">#</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        <span style="" commentid="274994" revisioncount="2" revision="2">
                            <a href="#" style="text-decoration:none;font-size:1.4rem;color:#bebebe;" class="leftRevision"></a>
                            Rev. <span class="revision">2</span>
                            <a href="#" style="text-decoration:none;font-size:1.4rem;visibility:hidden;color:#bebebe;" class="rightRevision"></a>
                        </span>
                        &nbsp;

<span commentid="274994" class="negative-comment-vote" data-commentrating="-13" data-commentuserid="371837">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:gray;font-weight:bold;">-13</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-274994">
                    <div class="moveup">
                    <div class="ttypography"><p>nice editorial</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-274994 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-274994 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-274994">
    </ul>
</div>

<div class="comment">
    <table class="comment-table" commentid="278531" commentparentid="-1">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/sanket407" style="position: relative;">
<img src="http://userpic.codeforces.com/no-avatar.jpg">        </a>
        <div><a href="/profile/sanket407" title="Expert sanket407" class="rated-user user-blue">sanket407</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Feb/14/2016 04:30 UTC">2 years ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-278531" href="?#comment-278531" style="font-size:1.2em;">#</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="278531" data-commentrating="0" data-commentuserid="355841">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:gray;font-weight:bold;">0</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-278531">
                    <div class="moveup">
                    <div class="ttypography"><p>getting WA for posterS ![user:amd] Used seg trees to store all posters from position 1 to max of queries.</p><p>Then Lazy propogation is used and after all poster queries did a last passing of lazy values till bottom.</p><p>Then after all poster queries counted values at bottom nodes (stored in wall[])</p><p>Can anyone come up with test cases where my code getting WA?</p><p>sol: <a href="http://pastebin.com/KYcUvpku">http://pastebin.com/KYcUvpku</a></p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-278531 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-278531 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-278531">
    </ul>
</div>

<div class="comment">
    <table class="comment-table" commentid="288181" commentparentid="-1">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/_wts_" style="position: relative;">
<img src="http://userpic.codeforces.com/9206/avatar/16559e6271b9eaef.jpg"><img title="Badge of honor for supporting Codeforces on its 8th anniversary" src="http://st.codeforces.com/s/21816/images/if_medal-bronze-red_46108.png" style="position:absolute;bottom:-4px;right:-6px">        </a>
        <div><a href="/profile/_wts_" title="Candidate Master _wts_" class="rated-user user-violet">_wts_</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Apr/06/2016 19:08 UTC">2 years ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-288181" href="?#comment-288181" style="font-size:1.2em;">#</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="288181" data-commentrating="0" data-commentuserid="9206">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:gray;font-weight:bold;">0</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-288181">
                    <div class="moveup">
                    <div class="ttypography"><p>Thanks for the lecture. I was wondering what is the good approach if the input values are too large to fit in an array (e.g.the order 10^18). The updates are in ranges e.g. add x -&gt; a,b The queries are also in ranges e.g. find sum -&gt; c,d</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-288181 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-288181 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-288181">
            <li>
<div class="comment">
    <table class="comment-table" commentid="288347" commentparentid="288181">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/samier_aldroubi" style="position: relative;">
<img src="http://userpic.codeforces.com/no-avatar.jpg">        </a>
        <div><a href="/profile/samier_aldroubi" title="Expert samier_aldroubi" class="rated-user user-blue">samier_aldroubi</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Apr/08/2016 09:29 UTC">2 years ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-288347" href="?#comment-288347" style="font-size:1.2em;">#</a></span>
                        <span class="item"><a title="Parent comment" href="#comment-288181" style="font-size:1.2em;">^</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="288347" data-commentrating="0" data-commentuserid="233866">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:gray;font-weight:bold;">0</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-288347">
                    <div class="moveup">
                    <div class="ttypography"><p>Compress the numbers :) .</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-288347 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-288347 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-288347">
    </ul>
</div>
</li>
            <li>
<div class="comment">
    <table class="comment-table" commentid="288442" commentparentid="288181">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/adamant" style="position: relative;">
<img src="http://userpic.codeforces.com/50468/avatar/a5993e1044d99690.jpg">        </a>
        <div><a href="/profile/adamant" title="International master adamant" class="rated-user user-orange">adamant</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Apr/08/2016 19:12 UTC">2 years ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-288442" href="?#comment-288442" style="font-size:1.2em;">#</a></span>
                        <span class="item"><a title="Parent comment" href="#comment-288181" style="font-size:1.2em;">^</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        <span style="" commentid="288442" revisioncount="4" revision="4">
                            <a href="#" style="text-decoration:none;font-size:1.4rem;color:#bebebe;" class="leftRevision"></a>
                            Rev. <span class="revision">4</span>
                            <a href="#" style="text-decoration:none;font-size:1.4rem;visibility:hidden;color:#bebebe;" class="rightRevision"></a>
                        </span>
                        &nbsp;

<span commentid="288442" data-commentrating="0" data-commentuserid="50468">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:gray;font-weight:bold;">0</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-288442">
                    <div class="moveup">
                    <div class="ttypography"><pre><code class="prettyprint"><span class="kwd">const</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> maxn </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1e5</span><span class="pun">,</span><span class="pln"> logn </span><span class="pun">=</span><span class="pln"> </span><span class="lit">30</span><span class="pun">,</span><span class="pln"> inf </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1e9</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">int</span><span class="pln"> add</span><span class="pun">[</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> maxn </span><span class="pun">*</span><span class="pln"> logn</span><span class="pun">],</span><span class="pln"> sum</span><span class="pun">[</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> maxn </span><span class="pun">*</span><span class="pln"> logn</span><span class="pun">];</span><span class="pln">
</span><span class="kwd">int</span><span class="pln"> L</span><span class="pun">[</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> maxn </span><span class="pun">*</span><span class="pln"> logn</span><span class="pun">],</span><span class="pln"> R</span><span class="pun">[</span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> maxn </span><span class="pun">*</span><span class="pln"> logn</span><span class="pun">];</span><span class="pln">
</span><span class="kwd">int</span><span class="pln"> sz </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">int</span><span class="pln"> create</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">v</span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">if</span><span class="pun">(!</span><span class="pln">v</span><span class="pun">)</span><span class="pln">
        v </span><span class="pun">=</span><span class="pln"> sz</span><span class="pun">++;</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> v</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">void</span><span class="pln"> upd</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> a</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> b</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> c</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> v </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> l </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> r </span><span class="pun">=</span><span class="pln"> inf</span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="pln"> </span><span class="com">// arr[a..b) += c</span><span class="pln">
    </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">a </span><span class="pun">&lt;=</span><span class="pln"> l </span><span class="pun">&amp;&amp;</span><span class="pln"> r </span><span class="pun">&lt;=</span><span class="pln"> b</span><span class="pun">)</span><span class="pln">
    </span><span class="pun">{</span><span class="pln">
        add</span><span class="pun">[</span><span class="pln">v</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+=</span><span class="pln"> c</span><span class="pun">;</span><span class="pln">
        sum</span><span class="pun">[</span><span class="pln">v</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">r </span><span class="pun">-</span><span class="pln"> l</span><span class="pun">)</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> c</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">return</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">r </span><span class="pun">&lt;=</span><span class="pln"> a </span><span class="pun">||</span><span class="pln"> b </span><span class="pun">&lt;=</span><span class="pln"> l</span><span class="pun">)</span><span class="pln">
        </span><span class="kwd">return</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> m </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">l </span><span class="pun">+</span><span class="pln"> r</span><span class="pun">)</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> </span><span class="lit">2</span><span class="pun">;</span><span class="pln">
    upd</span><span class="pun">(</span><span class="pln">a</span><span class="pun">,</span><span class="pln"> b</span><span class="pun">,</span><span class="pln"> c</span><span class="pun">,</span><span class="pln"> create</span><span class="pun">(</span><span class="pln">L</span><span class="pun">[</span><span class="pln">v</span><span class="pun">]),</span><span class="pln"> l</span><span class="pun">,</span><span class="pln"> m</span><span class="pun">);</span><span class="pln">
    upd</span><span class="pun">(</span><span class="pln">a</span><span class="pun">,</span><span class="pln"> b</span><span class="pun">,</span><span class="pln"> c</span><span class="pun">,</span><span class="pln"> create</span><span class="pun">(</span><span class="pln">R</span><span class="pun">[</span><span class="pln">v</span><span class="pun">]),</span><span class="pln"> m</span><span class="pun">,</span><span class="pln"> r</span><span class="pun">);</span><span class="pln">
    sum</span><span class="pun">[</span><span class="pln">v</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">r </span><span class="pun">-</span><span class="pln"> l</span><span class="pun">)</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> add</span><span class="pun">[</span><span class="pln">v</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> sum</span><span class="pun">[</span><span class="pln">L</span><span class="pun">[</span><span class="pln">v</span><span class="pun">]]</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> sum</span><span class="pun">[</span><span class="pln">R</span><span class="pun">[</span><span class="pln">v</span><span class="pun">]];</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">int</span><span class="pln"> </span><span class="kwd">get</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> a</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> b</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> v </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> l </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> r </span><span class="pun">=</span><span class="pln"> inf</span><span class="pun">)</span><span class="pln">
</span><span class="pun">{</span><span class="pln"> </span><span class="com">// sum[a..b)</span><span class="pln">
    </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">a </span><span class="pun">&lt;=</span><span class="pln"> l </span><span class="pun">&amp;&amp;</span><span class="pln"> r </span><span class="pun">&lt;=</span><span class="pln"> b</span><span class="pun">)</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> sum</span><span class="pun">[</span><span class="pln">v</span><span class="pun">];</span><span class="pln">
    </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">r </span><span class="pun">&lt;=</span><span class="pln"> a </span><span class="pun">||</span><span class="pln"> b </span><span class="pun">&lt;=</span><span class="pln"> l</span><span class="pun">)</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> m </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">l </span><span class="pun">+</span><span class="pln"> r</span><span class="pun">)</span><span class="pln"> </span><span class="pun">/</span><span class="pln"> </span><span class="lit">2</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">get</span><span class="pun">(</span><span class="pln">a</span><span class="pun">,</span><span class="pln"> b</span><span class="pun">,</span><span class="pln"> L</span><span class="pun">[</span><span class="pln">v</span><span class="pun">],</span><span class="pln"> l</span><span class="pun">,</span><span class="pln"> m</span><span class="pun">)</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="kwd">get</span><span class="pun">(</span><span class="pln">a</span><span class="pun">,</span><span class="pln"> b</span><span class="pun">,</span><span class="pln"> R</span><span class="pun">[</span><span class="pln">v</span><span class="pun">],</span><span class="pln"> m</span><span class="pun">,</span><span class="pln"> r</span><span class="pun">)</span><span class="pln"> </span><span class="pun">+</span><span class="pln">
           max</span><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> min</span><span class="pun">(</span><span class="pln">r</span><span class="pun">,</span><span class="pln"> b</span><span class="pun">)</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> max</span><span class="pun">(</span><span class="pln">l</span><span class="pun">,</span><span class="pln"> a</span><span class="pun">))</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> add</span><span class="pun">[</span><span class="pln">v</span><span class="pun">];</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span></code></pre></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-288442 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-288442 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-288442">
    </ul>
</div>
</li>
    </ul>
</div>

<div class="comment">
    <table class="comment-table" commentid="293934" commentparentid="-1">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/Vendetta." style="position: relative;">
<img src="http://userpic.codeforces.com/281164/avatar/c4b973fd679fc6cb.jpg">        </a>
        <div><a href="/profile/Vendetta." title="Candidate Master Vendetta." class="rated-user user-violet">Vendetta.</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="May/13/2016 07:17 UTC">23 months ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-293934" href="?#comment-293934" style="font-size:1.2em;">#</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="293934" data-commentrating="0" data-commentuserid="281164">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:gray;font-weight:bold;">0</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-293934">
                    <div class="moveup">
                    <div class="ttypography"><p>Thanks a lot. That was really helpful.</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-293934 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-293934 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-293934">
    </ul>
</div>

<div class="comment">
    <table class="comment-table" commentid="295016" commentparentid="-1">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/Gamerrishad" style="position: relative;">
<img src="http://userpic.codeforces.com/204130/avatar/60873b2bbb4f7f1d.jpg">        </a>
        <div><a href="/profile/Gamerrishad" title="Pupil Gamerrishad" class="rated-user user-green">Gamerrishad</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="May/19/2016 17:14 UTC">23 months ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-295016" href="?#comment-295016" style="font-size:1.2em;">#</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="295016" data-commentrating="0" data-commentuserid="204130">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:gray;font-weight:bold;">0</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-295016">
                    <div class="moveup">
                    <div class="ttypography"><p>Shouldn't it be "y"?? Under the section "Segment tree with vectors"?? <img alt=" " src="/predownloaded/39/ed/39edfafed3175882423f328a7d534fbaa4124c0b.jpg" style="max-width: 100.0%;max-height: 100.0%;"></p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-295016 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-295016 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-295016">
    </ul>
</div>

<div class="comment">
    <table class="comment-table" commentid="310186" commentparentid="-1">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/marcospqlixo" style="position: relative;">
<img src="http://userpic.codeforces.com/315325/avatar/700b0152a457c589.jpg"><img title="Badge of honor for supporting Codeforces on its 8th anniversary" src="http://st.codeforces.com/s/21816/images/if_medal-bronze-red_46108.png" style="position:absolute;bottom:-4px;right:-6px">        </a>
        <div><a href="/profile/marcospqlixo" title="Candidate Master marcospqlixo" class="rated-user user-violet">marcospqlixo</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Aug/14/2016 05:57 UTC">20 months ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-310186" href="?#comment-310186" style="font-size:1.2em;">#</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="310186" data-commentrating="1" data-commentuserid="315325">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:green;font-weight:bold;">+1</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-310186">
                    <div class="moveup">
                    <div class="ttypography"><p>awesome tutorial, thanks amd!</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-310186 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-310186 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-310186">
    </ul>
</div>

<div class="comment">
    <table class="comment-table" commentid="330194" commentparentid="-1">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/rakib_ruet_13" style="position: relative;">
<img src="http://userpic.codeforces.com/308261/avatar/4247f79bdae64004.jpg">        </a>
        <div><a href="/profile/rakib_ruet_13" title="Pupil rakib_ruet_13" class="rated-user user-green">rakib_ruet_13</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Dec/12/2016 21:34 UTC">16 months ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-330194" href="?#comment-330194" style="font-size:1.2em;">#</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="330194" data-commentrating="0" data-commentuserid="308261">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:gray;font-weight:bold;">0</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-330194">
                    <div class="moveup">
                    <div class="ttypography"><p>A great blog on segment tree. But could not figure out Persistent Segment Tree very well :( .it seems for me, i Need more details.</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-330194 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-330194 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-330194">
            <li>
<div class="comment">
    <table class="comment-table" commentid="348800" commentparentid="330194">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/Dpman" style="position: relative;">
<img src="http://userpic.codeforces.com/no-avatar.jpg">        </a>
        <div><a href="/profile/Dpman" title="Pupil Dpman" class="rated-user user-green">Dpman</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Mar/15/2017 05:16 UTC">13 months ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-348800" href="?#comment-348800" style="font-size:1.2em;">#</a></span>
                        <span class="item"><a title="Parent comment" href="#comment-330194" style="font-size:1.2em;">^</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="348800" data-commentrating="0" data-commentuserid="227844">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:gray;font-weight:bold;">0</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-348800">
                    <div class="moveup">
                    <div class="ttypography"><p>You can read it from here : <a href="https://blog.anudeep2011.com/persistent-segment-trees-explained-with-spoj-problems/">https://blog.anudeep2011.com/persistent-segment-trees-explained-with-spoj-problems/</a></p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-348800 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-348800 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-348800">
    </ul>
</div>
</li>
    </ul>
</div>

<div class="comment">
    <table class="comment-table" commentid="353634" commentparentid="-1">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/paulabhik47" style="position: relative;">
<img src="http://userpic.codeforces.com/468112/avatar/fa0da869146032e0.jpg">        </a>
        <div><a href="/profile/paulabhik47" title="Unrated, paulabhik47" class="rated-user user-black">paulabhik47</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Apr/10/2017 15:46 UTC">12 months ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-353634" href="?#comment-353634" style="font-size:1.2em;">#</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="353634" data-commentrating="0" data-commentuserid="468112">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:gray;font-weight:bold;">0</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-353634">
                    <div class="moveup">
                    <div class="ttypography"><p>shouldn't in sereja and brackets 380 c it should be t[x] = t[2 * x] + t[2 * x + 1] + 2*tmp ?</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-353634 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-353634 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-353634">
            <li>
<div class="comment">
    <table class="comment-table" commentid="362183" commentparentid="353634">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/jcbbigcrane" style="position: relative;">
<img src="http://userpic.codeforces.com/no-avatar.jpg">        </a>
        <div><a href="/profile/jcbbigcrane" title="Specialist jcbbigcrane" class="rated-user user-cyan">jcbbigcrane</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="May/26/2017 08:06 UTC">11 months ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-362183" href="?#comment-362183" style="font-size:1.2em;">#</a></span>
                        <span class="item"><a title="Parent comment" href="#comment-353634" style="font-size:1.2em;">^</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="362183" data-commentrating="0" data-commentuserid="314481">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:gray;font-weight:bold;">0</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-362183">
                    <div class="moveup">
                    <div class="ttypography"><p>It depends on the merging step. If you do t[x] = t[2 * x] + t[2 * x + 1] + 2*tmp, then you don't need to print 2*answer. Otherwise you have to print 2*answer because of the merging of both the opening and closing brackets.</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-362183 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-362183 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-362183">
    </ul>
</div>
</li>
    </ul>
</div>

<div class="comment">
    <table class="comment-table" commentid="365501" commentparentid="-1">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/lsiddiqsunny" style="position: relative;">
<img src="http://userpic.codeforces.com/377664/avatar/c6730d4f1397acd7.jpg">        </a>
        <div><a href="/profile/lsiddiqsunny" title="Specialist lsiddiqsunny" class="rated-user user-cyan">lsiddiqsunny</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Jun/08/2017 06:52 UTC">10 months ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-365501" href="?#comment-365501" style="font-size:1.2em;">#</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="365501" data-commentrating="0" data-commentuserid="377664">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:gray;font-weight:bold;">0</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-365501">
                    <div class="moveup">
                    <div class="ttypography"><p>How to get number of elements in a range [l,r] which are <strong>greater than x</strong> and <strong>less then y</strong> by <strong>segment tree</strong>?</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-365501 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-365501 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-365501">
            <li>
<div class="comment">
    <table class="comment-table" commentid="365634" commentparentid="365501">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/KyleWalker" style="position: relative;">
<img src="http://userpic.codeforces.com/559880/avatar/fd0565aa541e0d1.jpg">        </a>
        <div><a href="/profile/KyleWalker" title="Candidate Master KyleWalker" class="rated-user user-violet">KyleWalker</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Jun/08/2017 18:09 UTC">10 months ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-365634" href="?#comment-365634" style="font-size:1.2em;">#</a></span>
                        <span class="item"><a title="Parent comment" href="#comment-365501" style="font-size:1.2em;">^</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        <span style="" commentid="365634" revisioncount="2" revision="2">
                            <a href="#" style="text-decoration:none;font-size:1.4rem;color:#bebebe;" class="leftRevision"></a>
                            Rev. <span class="revision">2</span>
                            <a href="#" style="text-decoration:none;font-size:1.4rem;visibility:hidden;color:#bebebe;" class="rightRevision"></a>
                        </span>
                        &nbsp;

<span commentid="365634" data-commentrating="0" data-commentuserid="559880">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:gray;font-weight:bold;">0</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-365634">
                    <div class="moveup">
                    <div class="ttypography"><p>you can save numbers [l,r] sorted in each node this can be done O(n.lgn) with merge sort and use binary search to find how many numbers are greater than x and less then y in nodes . each query can be done in O(lg^2 (n) ).</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-365634 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-365634 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-365634">
    </ul>
</div>
</li>
    </ul>
</div>

<div class="comment">
    <table class="comment-table" commentid="368696" commentparentid="-1">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/vertika2011" style="position: relative;">
<img src="http://userpic.codeforces.com/471635/avatar/8c7c543d120716cc.jpg">        </a>
        <div><a href="/profile/vertika2011" title="Unrated, vertika2011" class="rated-user user-black">vertika2011</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Jun/24/2017 13:51 UTC">10 months ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-368696" href="?#comment-368696" style="font-size:1.2em;">#</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="368696" data-commentrating="0" data-commentuserid="471635">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:gray;font-weight:bold;">0</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-368696">
                    <div class="moveup">
                    <div class="ttypography"><p>Really nice tutorial.</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-368696 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-368696 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-368696">
    </ul>
</div>

<div class="comment">
    <table class="comment-table" commentid="398929" commentparentid="-1">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/ravikiran0606" style="position: relative;">
<img src="http://userpic.codeforces.com/321671/avatar/f46a6cb9298319ed.jpg">        </a>
        <div><a href="/profile/ravikiran0606" title="Specialist ravikiran0606" class="rated-user user-cyan">ravikiran0606</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Dec/03/2017 19:43 UTC">4 months ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-398929" href="?#comment-398929" style="font-size:1.2em;">#</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="398929" data-commentrating="1" data-commentuserid="321671">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:green;font-weight:bold;">+1</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-398929">
                    <div class="moveup">
                    <div class="ttypography"><p>In "Segment tree with sets" section of the blog, if we use segment tree with each node as multiset, can we handle range updates along with range queries?</p><p>For example, In this problem,</p><p>We have n vectors, a1,a2,...,an and all of them are initially empty. We should perform m queries on this vectors of two types :</p><p>1) A l r k Add number k to the elements of each a[i], l&lt;=i&lt;=r.</p><p>2) C l r k print the sum of the number of occurrences of k in each a[i], l&lt;=i&lt;=r.</p><p>How to solve this kind of problem?</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-398929 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-398929 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-398929">
    </ul>
</div>

<div class="comment">
    <table class="comment-table" commentid="401197" commentparentid="-1">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/SinByCos" style="position: relative;">
<img src="http://userpic.codeforces.com/no-avatar.jpg">        </a>
        <div><a href="/profile/SinByCos" title="Specialist SinByCos" class="rated-user user-cyan">SinByCos</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Dec/17/2017 19:10 UTC">4 months ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-401197" href="?#comment-401197" style="font-size:1.2em;">#</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="401197" data-commentrating="0" data-commentuserid="468490">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:gray;font-weight:bold;">0</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-401197">
                    <div class="moveup">
                    <div class="ttypography"><p>Great blog! In case someone had problems for the persistent segment tree (implementation or MKTHNUM problem) they can check this out: <a href="https://blog.anudeep2011.com/persistent-segment-trees-explained-with-spoj-problems/">https://blog.anudeep2011.com/persistent-segment-trees-explained-with-spoj-problems/</a></p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-401197 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-401197 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-401197">
    </ul>
</div>

<div class="comment">
    <table class="comment-table" commentid="407175" commentparentid="-1">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/gupta_rishabh" style="position: relative;">
<img src="http://userpic.codeforces.com/no-avatar.jpg">        </a>
        <div><a href="/profile/gupta_rishabh" title="Newbie gupta_rishabh" class="rated-user user-gray">gupta_rishabh</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Jan/13/2018 09:49 UTC">3 months ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-407175" href="?#comment-407175" style="font-size:1.2em;">#</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        <span style="" commentid="407175" revisioncount="2" revision="2">
                            <a href="#" style="text-decoration:none;font-size:1.4rem;color:#bebebe;" class="leftRevision"></a>
                            Rev. <span class="revision">2</span>
                            <a href="#" style="text-decoration:none;font-size:1.4rem;visibility:hidden;color:#bebebe;" class="rightRevision"></a>
                        </span>
                        &nbsp;

<span commentid="407175" data-commentrating="0" data-commentuserid="607365">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:gray;font-weight:bold;">0</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-407175">
                    <div class="moveup">
                    <div class="ttypography"><p>In the problem Sereja and Brackets , the segment tree approach is giving TLE on test case 13</p><p><a href="http://codeforces.com/contest/380/problem/C">http://codeforces.com/contest/380/problem/C</a></p><p>typedef pair&lt;int,int&gt; pii; typedef pair&lt;int,pii&gt; node;</p><p>void buildTree(int * ansArr , int *OArr , int *CArr , string arr , int index , int s , int e){  if(s&gt;e){  return;  }</p> <pre><code class="prettyprint"><span class="kwd">if</span><span class="pun">(</span><span class="pln">s</span><span class="pun">==</span><span class="pln">e</span><span class="pun">){</span><span class="pln">
    </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">arr</span><span class="pun">[</span><span class="pln">s</span><span class="pun">]==</span><span class="str">'('</span><span class="pun">){</span><span class="pln">
       </span><span class="typ">OArr</span><span class="pun">[</span><span class="pln">index</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln">
       </span><span class="typ">CArr</span><span class="pun">[</span><span class="pln">index</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">arr</span><span class="pun">[</span><span class="pln">s</span><span class="pun">]==</span><span class="str">')'</span><span class="pun">){</span><span class="pln">
       </span><span class="typ">OArr</span><span class="pun">[</span><span class="pln">index</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
       </span><span class="typ">CArr</span><span class="pun">[</span><span class="pln">index</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    ansArr</span><span class="pun">[</span><span class="pln">index</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">return</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">int</span><span class="pln"> mid </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">s</span><span class="pun">+</span><span class="pln">e</span><span class="pun">)/</span><span class="lit">2</span><span class="pun">;</span><span class="pln">
buildTree</span><span class="pun">(</span><span class="pln">ansArr</span><span class="pun">,</span><span class="typ">OArr</span><span class="pun">,</span><span class="typ">CArr</span><span class="pun">,</span><span class="pln">arr</span><span class="pun">,</span><span class="lit">2</span><span class="pun">*</span><span class="pln">index</span><span class="pun">,</span><span class="pln">s</span><span class="pun">,</span><span class="pln">mid</span><span class="pun">);</span><span class="pln">
buildTree</span><span class="pun">(</span><span class="pln">ansArr</span><span class="pun">,</span><span class="typ">OArr</span><span class="pun">,</span><span class="typ">CArr</span><span class="pun">,</span><span class="pln">arr</span><span class="pun">,</span><span class="lit">2</span><span class="pun">*</span><span class="pln">index</span><span class="pun">+</span><span class="lit">1</span><span class="pun">,</span><span class="pln">mid</span><span class="pun">+</span><span class="lit">1</span><span class="pun">,</span><span class="pln">e</span><span class="pun">);</span><span class="pln">
</span><span class="kwd">int</span><span class="pln"> tmp </span><span class="pun">=</span><span class="pln"> min</span><span class="pun">(</span><span class="typ">OArr</span><span class="pun">[</span><span class="lit">2</span><span class="pun">*</span><span class="pln">index</span><span class="pun">]</span><span class="pln"> </span><span class="pun">,</span><span class="pln"> </span><span class="typ">CArr</span><span class="pun">[</span><span class="lit">2</span><span class="pun">*</span><span class="pln">index</span><span class="pun">+</span><span class="lit">1</span><span class="pun">]);</span><span class="pln">
ansArr</span><span class="pun">[</span><span class="pln">index</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ansArr</span><span class="pun">[</span><span class="lit">2</span><span class="pun">*</span><span class="pln">index</span><span class="pun">])</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="pun">(</span><span class="pln">ansArr</span><span class="pun">[</span><span class="lit">2</span><span class="pun">*</span><span class="pln">index</span><span class="pun">+</span><span class="lit">1</span><span class="pun">])</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> tmp</span><span class="pun">;</span><span class="pln">
</span><span class="typ">OArr</span><span class="pun">[</span><span class="pln">index</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="typ">OArr</span><span class="pun">[</span><span class="lit">2</span><span class="pun">*</span><span class="pln">index</span><span class="pun">]</span><span class="pln">  </span><span class="pun">+</span><span class="pln">  </span><span class="typ">OArr</span><span class="pun">[</span><span class="lit">2</span><span class="pun">*</span><span class="pln">index</span><span class="pun">+</span><span class="lit">1</span><span class="pun">]-</span><span class="pln"> tmp</span><span class="pun">;</span><span class="pln">
</span><span class="typ">CArr</span><span class="pun">[</span><span class="pln">index</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="typ">CArr</span><span class="pun">[</span><span class="lit">2</span><span class="pun">*</span><span class="pln">index</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="typ">CArr</span><span class="pun">[</span><span class="lit">2</span><span class="pun">*</span><span class="pln">index</span><span class="pun">+</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> tmp</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">return</span><span class="pun">;</span></code></pre><p>}</p><p>node query(int * ansArr , int *OArr , int * CArr , int index , int s , int e , int qs , int qe){  No Overlap  if(qs&gt;e || qe&lt;s){  return node(0,pii(0,0));  }  Complete Overlap  if(s&gt;=qs &amp;&amp; e&lt;=qe){  return node(ansArr[index] , pii(OArr[index] , CArr[index]));  }</p> <pre><code class="prettyprint"><span class="kwd">int</span><span class="pln"> mid </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">s </span><span class="pun">+</span><span class="pln"> e</span><span class="pun">)/</span><span class="lit">2</span><span class="pun">;</span><span class="pln">
node  nodeLeft </span><span class="pun">=</span><span class="pln"> query</span><span class="pun">(</span><span class="pln">ansArr</span><span class="pun">,</span><span class="typ">OArr</span><span class="pun">,</span><span class="typ">CArr</span><span class="pln"> </span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">*</span><span class="pln">index </span><span class="pun">,</span><span class="pln"> s </span><span class="pun">,</span><span class="pln"> mid </span><span class="pun">,</span><span class="pln"> qs </span><span class="pun">,</span><span class="pln"> qe</span><span class="pun">);</span><span class="pln">
node  nodeRight </span><span class="pun">=</span><span class="pln"> query</span><span class="pun">(</span><span class="pln">ansArr</span><span class="pun">,</span><span class="typ">OArr</span><span class="pun">,</span><span class="typ">CArr</span><span class="pln"> </span><span class="pun">,</span><span class="pln"> </span><span class="lit">2</span><span class="pun">*</span><span class="pln">index</span><span class="pun">+</span><span class="lit">1</span><span class="pun">,</span><span class="pln">mid</span><span class="pun">+</span><span class="lit">1</span><span class="pun">,</span><span class="pln">e</span><span class="pun">,</span><span class="pln">qs</span><span class="pun">,</span><span class="pln">qe</span><span class="pun">);</span><span class="pln">

</span><span class="kwd">int</span><span class="pln"> tmp </span><span class="pun">=</span><span class="pln"> min</span><span class="pun">(</span><span class="pln">nodeLeft</span><span class="pun">.</span><span class="pln">second</span><span class="pun">.</span><span class="pln">first </span><span class="pun">,</span><span class="pln"> nodeRight</span><span class="pun">.</span><span class="pln">second</span><span class="pun">.</span><span class="pln">second</span><span class="pun">);</span><span class="pln">
</span><span class="kwd">int</span><span class="pln"> ans </span><span class="pun">=</span><span class="pln"> nodeLeft</span><span class="pun">.</span><span class="pln">first </span><span class="pun">+</span><span class="pln"> nodeRight</span><span class="pun">.</span><span class="pln">first </span><span class="pun">+</span><span class="pln"> tmp</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">int</span><span class="pln"> o </span><span class="pun">=</span><span class="pln"> nodeLeft</span><span class="pun">.</span><span class="pln">second</span><span class="pun">.</span><span class="pln">first </span><span class="pun">+</span><span class="pln"> nodeRight</span><span class="pun">.</span><span class="pln">second</span><span class="pun">.</span><span class="pln">first </span><span class="pun">-</span><span class="pln"> tmp</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">int</span><span class="pln"> c </span><span class="pun">=</span><span class="pln"> nodeLeft</span><span class="pun">.</span><span class="pln">second</span><span class="pun">.</span><span class="pln">second </span><span class="pun">+</span><span class="pln"> nodeRight</span><span class="pun">.</span><span class="pln">second</span><span class="pun">.</span><span class="pln">second </span><span class="pun">-</span><span class="pln"> tmp</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">return</span><span class="pln"> node</span><span class="pun">(</span><span class="pln">ans </span><span class="pun">,</span><span class="pln"> pii</span><span class="pun">(</span><span class="pln">o</span><span class="pun">,</span><span class="pln">c</span><span class="pun">));</span></code></pre><p>}</p><p>int main(){  std::ios::sync_with_stdio(false);  string str;  cin&gt;&gt;str;  int * ansArr = new int[4*str.size()+1];  int * OArr = new int[4*str.size()+1];  int * CArr = new int[4*str.size()+1];  int q;  cin&gt;&gt;q;  buildTree(ansArr,OArr,CArr ,str ,1 ,0,str.size()-1);</p> <pre><code class="prettyprint"><span class="kwd">while</span><span class="pun">(</span><span class="pln">q</span><span class="pun">--){</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> l</span><span class="pun">,</span><span class="pln">r</span><span class="pun">;</span><span class="pln">
    cin</span><span class="pun">&gt;&gt;</span><span class="pln">l</span><span class="pun">&gt;&gt;</span><span class="pln">r</span><span class="pun">;</span><span class="pln">
    node ansNode </span><span class="pun">=</span><span class="pln"> query</span><span class="pun">(</span><span class="pln">ansArr </span><span class="pun">,</span><span class="pln"> </span><span class="typ">OArr</span><span class="pun">,</span><span class="typ">CArr</span><span class="pln"> </span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">,</span><span class="pln"> str</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()-</span><span class="lit">1</span><span class="pln"> </span><span class="pun">,</span><span class="pln"> l</span><span class="pun">-</span><span class="lit">1</span><span class="pln"> </span><span class="pun">,</span><span class="pln"> r</span><span class="pun">-</span><span class="lit">1</span><span class="pun">);</span><span class="pln">
    cout</span><span class="pun">&lt;&lt;(</span><span class="lit">2</span><span class="pun">*</span><span class="pln">ansNode</span><span class="pun">.</span><span class="pln">first</span><span class="pun">)&lt;&lt;</span><span class="pln">endl</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></code></pre><p>}`</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-407175 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-407175 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-407175">
    </ul>
</div>

<div class="comment">
    <table class="comment-table" commentid="420951" commentparentid="-1">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/deepakaggarwal" style="position: relative;">
<img src="http://userpic.codeforces.com/no-avatar.jpg">        </a>
        <div><a href="/profile/deepakaggarwal" title="Unrated, deepakaggarwal" class="rated-user user-black">deepakaggarwal</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Mar/19/2018 07:40 UTC">4 weeks ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-420951" href="?#comment-420951" style="font-size:1.2em;">#</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="420951" data-commentrating="0" data-commentuserid="402678">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:gray;font-weight:bold;">0</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-420951">
                    <div class="moveup">
                    <div class="ttypography"><p>I am trying to solve the <a href="http://codeforces.com/gym/100513/problem/C">problem</a> Component Tree mentioned above but can't find a solution. The brute force approach i.e simulating the problem will take O(NQ) time. The another approach I can think of is to create a vector where each node stores the properties of its ancestor and keeps the latest one in case of a duplicate. But that will take O(N^2).</p><p>I can't think of a segment tree kind of solution. I can't find it through web. Any help? Thanks.</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-420951 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-420951 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-420951">
    </ul>
</div>

<div class="comment">
    <table class="comment-table" commentid="422138" commentparentid="-1">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/orlon." style="position: relative;">
<img src="http://userpic.codeforces.com/547248/avatar/ed2f32cdb165ea55.jpg">        </a>
        <div><a href="/profile/orlon." title="Specialist orlon." class="rated-user user-cyan">orlon.</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Mar/26/2018 22:06 UTC">3 weeks ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-422138" href="?#comment-422138" style="font-size:1.2em;">#</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="422138" data-commentrating="0" data-commentuserid="547248">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:gray;font-weight:bold;">0</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-422138">
                    <div class="moveup">
                    <div class="ttypography"><p>For problem <a href="http://www.spoj.com/problems/KQUERYO/">KQUERYO</a> I followed the approach mentioned in here, storing sorted vector for each node of the segment tree and using binary search for query. But I'm getting TLE.</p><p>Here is my <a href="https://ideone.com/IOhbb2">solution</a>.</p><p>How can I optimise my solution to make it pass? Any help is appreciated.</p><p>Thanks!</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-422138 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-422138 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-422138">
            <li>
<div class="comment">
    <table class="comment-table" commentid="422167" commentparentid="422138">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/orlon." style="position: relative;">
<img src="http://userpic.codeforces.com/547248/avatar/ed2f32cdb165ea55.jpg">        </a>
        <div><a href="/profile/orlon." title="Specialist orlon." class="rated-user user-cyan">orlon.</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Mar/27/2018 11:42 UTC">3 weeks ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-422167" href="?#comment-422167" style="font-size:1.2em;">#</a></span>
                        <span class="item"><a title="Parent comment" href="#comment-422138" style="font-size:1.2em;">^</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="422167" data-commentrating="0" data-commentuserid="547248">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:gray;font-weight:bold;">0</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-422167">
                    <div class="moveup">
                    <div class="ttypography"><p>Nevermind, I found the problem and corrected it to get AC. My query function was too slow because it was merging nodes for every query. I changed it to return the answer directly by using binary search instead.Here is the AC <a href="https://ideone.com/wWUae6">solution</a>.</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-422167 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-422167 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-422167">
    </ul>
</div>
</li>
    </ul>
</div>

<div class="comment">
    <table class="comment-table" commentid="425817" commentparentid="-1">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/r19560bharat" style="position: relative;">
<img src="http://userpic.codeforces.com/no-avatar.jpg">        </a>
        <div><a href="/profile/r19560bharat" title="Newbie r19560bharat" class="rated-user user-gray">r19560bharat</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Apr/18/2018 13:56 UTC">13 hours ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-425817" href="?#comment-425817" style="font-size:1.2em;">#</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="425817" data-commentrating="0" data-commentuserid="573287">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:gray;font-weight:bold;">0</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-425817">
                    <div class="moveup">
                    <div class="ttypography"><p>I couldn't understand why the reasoning behind this statement sum(1,i,r)-sum(1,i,l-1)&gt;k-1 and answer will be api. How do we arrive at the fact that we have to check tree after the rth and l-1th updates?</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-425817 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-425817 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-425817">
            <li>
<div class="comment">
    <table class="comment-table" commentid="425819" commentparentid="425817">
        <tbody><tr>
            <td class="left">
                <div style="position: absolute; left: 0;" class="comment-indent-holder">
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                        <div class="comment-no-indent">
                            <span></span>
                        </div>
                </div>
    <div class="avatar">
        <a href="/profile/r19560bharat" style="position: relative;">
<img src="http://userpic.codeforces.com/no-avatar.jpg">        </a>
        <div><a href="/profile/r19560bharat" title="Newbie r19560bharat" class="rated-user user-gray">r19560bharat</a></div>
    </div>
            </td>
            <td class="right">
                <div class="info">
                    
                    <span class="item"><span class="format-humantime" title="Apr/18/2018 14:06 UTC">13 hours ago</span>,</span>
                    <span class="item"><a title="Link to comment" name="comment-425819" href="?#comment-425819" style="font-size:1.2em;">#</a></span>
                        <span class="item"><a title="Parent comment" href="#comment-425817" style="font-size:1.2em;">^</a></span>
                    <span class="item">|</span>
                    <span style="position: relative; top: 2px;">
</span>
                    <div style="position:absolute;right:0;top:0;">
                        &nbsp;

<span commentid="425819" data-commentrating="0" data-commentuserid="573287">
<a href="#" class="vote-for-comment" votedirection="1" dd="x"><img style="position:relative;top:3px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png" alt="Vote: I like it" title="Vote: I like it"></a>
<span class="commentRating"><span style="color:gray;font-weight:bold;">0</span></span>
<a href="#" class="vote-for-comment" votedirection="-1" dd="y"><img style="position:relative;top:2px;opacity:0.35;" src="http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png" alt="Vote: I do not like it" title="Vote: I do not like it"></a>
</span>                    </div>
                </div>
                <div class="comment-content comment-content-425819">
                    <div class="moveup">
                    <div class="ttypography"><p>Never mind, I was confused by the multiple arrays that had been considered. Got it now.</p></div>
                    </div>
                </div>
                <div class="reply info">
                    <a class="comment-425819 en false" href="#" style="text-decoration: none;"><span class="arrow"></span></a>
                    <a class="comment-425819 en false" href="#">Reply</a>
                </div>
            </td>
        </tr>
    </tbody></table>
    <ul class="comment-children comment-425819">
    </ul>
</div>
</li>
    </ul>
</div>
    <br>

<div id="editBox-15964" style="width:50em;display:none;">
    <div class="previewBody" style="border: 1px solid #d4d4d4; margin-bottom: 0.5em; padding: 0.25em; display:none;">&nbsp;</div>
    <div style="width: 1px">&nbsp;</div>
    <div class="commentLocale" style="position: relative; top: 0.5em;left:4px;display: none;">
        <input type="radio" name="locale" value="en"><span style="font-size: 1.2rem;position: relative; bottom: 3px;">In English</span>
        <input style="margin-left:1em" type="radio" name="locale" value="ru"><span style="font-size: 1.2rem;position: relative; bottom: 3px;">In Russian</span>
    </div>
    <textarea data-drafts-id="CommentReplyFrame" class="wysiwyg" name="editContent" rows="20" style="width:99%;"></textarea>
    <div class="error error__content"></div>
    <div style="text-align:center;">
        <input type="button" name="preview" style="padding: 0.25em 1em; margin-top: 1em; min-width: 6.5em;" value="Preview">
        <input type="button" name="save" style="padding: 0.25em 1em; margin-top: 1em; min-width: 6.5em;" value="Save">
    </div>
</div>

    <script type="text/javascript">
        $(document).ready(function () {

var firstPreview15964 = true;
var lastPreviewContent15964 = '';

if (!window.moveCommentRevision) {
    moveCommentRevision = function(e, dir) {
        var p = e.parent();
        var revisionCount = parseInt(p.attr("revisionCount"));
        var revision = parseInt(p.attr("revision"));
        var next = revision + dir;
        var commentId = p.attr("commentId");
        if (next >= 1 && next <= revisionCount) {
            $.post(
                "/data/comment-data",
                {action: "revision", commentId: commentId, revision: next},
                function(json) {
                    if (json.success == "true") {
                        var parentDiv = e;

                        while (parentDiv !== null && (parentDiv[0].nodeName.toLowerCase() !== "td" || !parentDiv.hasClass("right"))) {
                            parentDiv = parentDiv.parent();
                        }

                        if (parentDiv === null) {
                            return;
                        }

                        parentDiv.find("div.comment-content-" + commentId + " .moveup").html(json.content);
                        Codeforces.setupSpoilers(parentDiv.find("div.comment-content-" + commentId + " .moveup"));
                        p.attr("revision", next);
                        p.find("span.revision").text(next);
                        if (next == 1) {
                            p.find("a.leftRevision").css("visibility", "hidden");
                        } else {
                            p.find("a.leftRevision").css("visibility", "visible");
                        }
                        if (next == revisionCount) {
                            p.find("a.rightRevision").css("visibility", "hidden");
                        } else {
                            p.find("a.rightRevision").css("visibility", "visible");
                        }

                        window.updateTypography();
                    } else {
                        alert(e.error);
                    }
                },
                "json"
            );
        }
    };
}

$("div[commentableId=15964] a.leftRevision").click(function () {
    window.moveCommentRevision($(this), -1);
    return false;
});

$("div[commentableId=15964] a.rightRevision").click(function () {
    window.moveCommentRevision($(this), +1);
    return false;
});



        });
    </script>


        <script src="http://st.codeforces.com/s/21816/js/swfobject-2.2.min.js" type="text/javascript"></script>
        <script src="http://st.codeforces.com/s/21816/js/ftaa.js" type="text/javascript"></script>
        <script type="text/javascript">
            $(function() {
                if (window.evercookie) {
                    var ec = new evercookie({
                        history: false,
                        silverlight: false,
                        baseurl: '',
                        asseturi: '/assets',
                        phpuri: '/2fdcd78',
                        pngPath: '/eps',
                        etagPath: '/ees',
                        cachePath: '/ecs'
                    });

                    var randomNumber = function () {
                        return Math.random().toString(36).substr(2);
                    };

                    var randomToken = function () {
                        return (randomNumber() + randomNumber()).substring(0, 18);
                    };

                    window._ftaa = "";

                    ec.get("70a7c28f3de", function (value) {
                        window._ftaa = value;
                        if (!window._ftaa) {
                            window._ftaa = randomToken();
                            ec.set("70a7c28f3de", window._ftaa);
                        }
                        $.post("/data/empty", {bfaa: window._bfaa, ftaa: window._ftaa});
                    });
                } else {
                    window._ftaa = "n/a";
                    $.post("/data/empty", {bfaa: window._bfaa, ftaa: window._ftaa});
                }
            });
        </script>

        <script src="http://st.codeforces.com/s/21816/js/bfaa.js" type="text/javascript"></script>
        <script type="text/javascript">
            $(function() {
                if (window.Fingerprint2) {
                    var options = {swfPath: undefined};
                    window._bfaa = "";

                    new Fingerprint2(options).get(function(result){
                        window._bfaa = result;
                        $.post("/data/empty", {bfaa: window._bfaa, ftaa: window._ftaa});
                    });
                } else {
                    window._bfaa = "n/a";
                    $.post("/data/empty", {bfaa: window._bfaa, ftaa: window._ftaa});
                }
            });
        </script>

    <script type="text/javascript">
        $(document).ready(function () {
    $("a.new-root-comment").click(function () {
            window.location = "/enter";
        return false;
    });

    $(".comment-table .reply a").click(function () {
            window.location = "/enter";
        return false;
    });
        });
    </script>
    <script type="text/javascript">
        $(document).ready(function () {
    $(".vote-for-comment").mouseover(function () {
        var vote = $(this);
        var direction = vote.attr("voteDirection");
        var commentUserId = $(this).parent().attr("data-commentUserId");
        var ownComment = false;
        if (direction == 1 && !ownComment) {
            vote.find("img").attr("src", "http://st.codeforces.com/s/21816/images/actions/comment-voteup.png");
            vote.find("img").attr("popacity", vote.find("img").css("opacity"));
            vote.find("img").css("opacity", "1.0");
        }
        if (direction == -1 && !ownComment) {
            vote.find("img").attr("src", "http://st.codeforces.com/s/21816/images/actions/comment-votedown.png");
            vote.find("img").attr("popacity", vote.find("img").css("opacity"));
            vote.find("img").css("opacity", "1.0");
        }
    });

    $(".vote-for-comment").mouseout(function () {
        var vote = $(this);
        var direction = vote.attr("voteDirection");
        var commentUserId = $(this).parent().attr("data-commentUserId");
        var ownComment = false;
        if (direction == 1 && !ownComment) {
            vote.find("img").attr("src", "http://st.codeforces.com/s/21816/images/actions/comment-voteup-blue.png");
            vote.find("img").css("opacity", vote.find("img").attr("popacity"));
        }
        if (direction == -1 && !ownComment) {
            vote.find("img").attr("src", "http://st.codeforces.com/s/21816/images/actions/comment-votedown-blue.png");
            vote.find("img").css("opacity", vote.find("img").attr("popacity"));
        }
    });

    $(".vote-for-comment").click(function () {
        var vote = $(this);
        var commentId = $(this).parent().attr("commentid");
        var commentRating = $(this).parent().attr("data-commentRating");
        var direction = $(this).attr("voteDirection");
        var commentUserId = $(this).parent().attr("data-commentUserId");
        var ownComment = false;
        $.post("/data/comment/vote", {commentId: commentId, _tta: Codeforces.tta(), vote: direction, commentRating: commentRating}, function(data) {
            if (direction != 0 && !ownComment && data["success"] == "true") {
                vote.parent().find(".vote-for-comment").attr("voteDirection", 0);
                if (direction == 1)
                    vote.find("img").attr("src", "http://st.codeforces.com/s/21816/images/actions/comment-voteup.png");
                else
                    vote.find("img").attr("src", "http://st.codeforces.com/s/21816/images/actions/comment-votedown.png");
                vote.find("img").attr("popacity", "1.0");
                vote.find("img").css("opacity", "1.0");
                vote.parent().find(".commentRating").html(data["commentRating"]);
            }
            Codeforces.showMessage(data["message"]);
        }, "json");
        return false;
    });

    $(".negative-comment-vote").closest(".comment-table").addClass("comment-bad");

    $(".troll-comment-vote").closest(".comment").css("display", "none");

    $(".too-negative-comment-vote").closest(".comment-table").each(function () {
        var e = $(this);
        e.addClass("comment-too-bad");
        var commentId = e.attr("commentId");
        $("<div class='bad-comment-replacement ttypography'>The comment is hidden because of too negative feedback, click <a href=# class=show-bad-comment-link>here</a> to view it</div>").appendTo(
            e.find(".right")
        );
        e.find(".comment-content").hide();
        e.find(".show-bad-comment-link").click(function () {
            e.find(".comment-content").show();
            e.find(".bad-comment-replacement").hide();
            return false;
        });
    });
        });
    </script>
</div>

<style type="text/css">
    .new-comments-box {
        padding: 0.5em;
        width: 22px;
        font-size: 1.3rem;
        font-weight: bold !important;

        position: fixed;
        top: 40%;
        right: 0;
        opacity: 0.2;
        color: white;
        text-align: center;

        border: 1px solid #222;
        background-color: #888 !important;
        border-radius: 3px;
        -moz-border-radius: 3px;
        -webkit-border-radius: 3px;
    }

    .new-comments-box:hover {
        opacity: 1;
    }

    .new-comments-box .dir:hover {
        background: #3B5998 !important;
        cursor: pointer;
    }
</style>

<div class="new-comments-box" data-position="outside" data-index="-1" style="display: none;">
    <div class="up dir" title="Ctrl+Up"><hr></div>
    <div class="info" title="New comments"></div>
    <div class="down dir" title="Ctrl+Down"><hr></div>
</div>

    <script type="text/javascript">
        $(document).ready(function () {
    function gotoComment(direction) {
        var box = $(".new-comments-box");
        var index = parseInt(box.attr("data-index"));
        if (index == -1)
            index = 0;
        else
            index = Math.max(0, Math.min(parseInt(box.find(".info").text()) - 1, index + direction));
        box.attr("data-index", index);
        var comment = $($(".comment .highlight-blue[commentId]").get(index));
        $('html, body').animate({
          'scrollTop': Math.max(0, comment.offset().top - ($(window).height() - comment.height()) / 2)
        });
        return false;
    }

    $(".new-comments-box .down").click(function () {
        return gotoComment(1);
    });

    $(".new-comments-box .up").click(function () {
        return gotoComment(-1);
    });

    $(document).keydown(function (e) {
         var code = (e.keyCode ? e.keyCode : e.which);
         if (e.ctrlKey) {
            if (code == 38 || code == 40) {
                gotoComment(code - 39);
            }
         }
    });

    var newCommentCount = $(".comment .highlight-blue[commentId]").length;
    if (newCommentCount > 0) {
        $(".new-comments-box .info").text(newCommentCount);
        $(".new-comments-box").show();
    }

    $('table.comment-table').mouseenter(function () {
        var comment = $(this);
        var cnt = 0;
        while (true) {
            var id = comment.attr("commentId");
            var parentId = comment.attr("commentParentId");
            comment.find(".comment-indent-holder:first .comment-no-indent").addClass("comment-indent");
            if (parentId == -1) {
                break;
            }
            comment = $("table.comment-table[commentId=" + parentId + "]");
        }
        return false;
    });

    $('table.comment-table').mouseleave(function () {
        var comment = $(this);
        var cnt = 0;
        while (true) {
            var id = comment.attr("commentId");
            var parentId = comment.attr("commentParentId");
            comment.find(".comment-indent-holder:first .comment-no-indent").removeClass("comment-indent");
            if (parentId == -1) {
                break;
            }
            comment = $("table.comment-table[commentId=" + parentId + "]");
        }
        return false;
    });
        });
    </script>


    <script type="text/javascript">
        $(document).ready(function () {
    $(".topic-vote-up-15948").click(function () {
        $.post("/data/topic/vote", {topicId: 15948, _tta: Codeforces.tta(), topicRevisionId: 58663, vote: +1}, function(data) {
            Codeforces.showMessage(data);
        }, "json");
        return false;
    });
    $(".topic-vote-down-15948").click(function () {
        $.post("/data/topic/vote", {topicId: 15948, _tta: Codeforces.tta(), topicRevisionId: 58663, vote: -1}, function(data) {
            Codeforces.showMessage(data);
        }, "json");
        return false;
    });
        });
    </script>
</div>
        </div>
    </div>
                </div>
        </div>
            <br style="clear: both;">
            <div id="footer">
                <div><a href="http://codeforces.com/">Codeforces</a> (c) Copyright 2010-2018 Mike Mirzayanov</div>
                <div>The only programming contests Web 2.0 platform</div>
                    <div>Server time: Apr/19/2018 03:24:55<sup title="timezone offset" style="font-size:8px;">UTC</sup> (d3).</div>
                    <div>Desktop version, switch to <a rel="nofollow" class="switchToMobile" href="?mobile=true">mobile version</a>.</div>
                <div class="smaller"><a href="/privacy">Privacy Policy</a></div>

            </div>
        <script type="text/javascript">
            $(function() {
                $(".switchToMobile").click(function() {
                    Codeforces.redirect(Codeforces.updateUrlParameter(document.location.href, "mobile", "true"));
                    return false;
                });
                $(".switchToDesktop").click(function() {
                    Codeforces.redirect(Codeforces.updateUrlParameter(document.location.href, "mobile", "false"));
                    return false;
                });
            });
        </script>
    <script type="text/javascript">
        $(document).ready(function () {
            if ($(window).width() < 1600) {
                $('.button-up').css('width', '30px').css('line-height', '30px').css('font-size', '20px');
            }

            if ($(window).width() >= 1200) {
                $ (window).scroll (function () {
                    if ($ (this).scrollTop () > 100) {
                        $ ('.button-up').fadeIn();
                    } else {
                        $ ('.button-up').fadeOut();
                    }
                });

                $('.button-up').click(function () {
                    $('body,html').animate({
                        scrollTop: 0
                    }, 500);
                    return false;
                });

                $('.button-up').hover(function () {
                    $(this).animate({
                        'opacity':'1'
                    }).css({'background-color':'#e7ebf0','color':'#6a86a4'});
                }, function () {
                    $(this).animate({
                        'opacity':'0.7'
                    }).css({'background':'none','color':'#d3dbe4'});;
                });
            }
            Codeforces.focusOnError();
        });
    </script>

        <div class="userListsFacebox" style="display:none;">
            <div style="padding: 0.5em; width: 600px; max-height: 200px; overflow-y: auto">
<div class="datatable" style="background-color: #E1E1E1; padding-bottom: 3px;">
            <div class="lt">&nbsp;</div>
            <div class="rt">&nbsp;</div>
            <div class="lb">&nbsp;</div>
            <div class="rb">&nbsp;</div>

            <div style="padding: 4px 0 0 6px;font-size:1.4rem;position:relative;">
                User lists

                <div style="position:absolute;right:0.25em;top:0.35em;">
                    <span style="padding:0;position:relative;bottom:2px;" class="rowCount"></span>

                    <img class="closed" src="http://st.codeforces.com/s/21816/images/icons/control.png">

                    <span class="filter" style="display:none;">
                        <img class="opened" src="http://st.codeforces.com/s/21816/images/icons/control-270.png">
                        <input style="padding:0;position:relative;bottom:2px;border:1px solid #aaa;height:17px;font-size:1.3rem;">
                    </span>
                </div>
            </div>
            <div style="background-color: white;margin:0.3em 3px 0 3px;position:relative;">
            <div class="ilt">&nbsp;</div>
            <div class="irt">&nbsp;</div>
            <table class="">
                    <thead>
                    <tr>
                        <th class="top left right">Name</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr class="no-items visible"><td style="text-align:left;" colspan="32" class="bottom dark left right">No items</td></tr></tbody>
            </table>
            </div>
        </div>
    <script type="text/javascript">
        $(document).ready(function () {
                // Create new ':containsIgnoreCase' selector for search
                jQuery.expr[':'].containsIgnoreCase = function(a, i, m) {
                    return jQuery(a).text().toUpperCase()
                            .indexOf(m[3].toUpperCase()) >= 0;
                };

                if (window.updateDatatableFilter == undefined) {
                    window.updateDatatableFilter = function(i) {
                        var parent = $(i).parent().parent().parent().parent();
                        $("tr.no-items", parent).remove();
                        $("tr", parent).hide().removeClass('visible');
                        var text = $(i).val();
                        if (text) {
                            $("tr" + ":containsIgnoreCase('" + text + "')", parent).show().addClass('visible');
                        } else {
                            parent.find(".rowCount").text("");
                            $("tr", parent).show().addClass('visible');
                        }

                        var found = false;
                        var visibleRowCount = 0;
                        $("tr", parent).each(function () {
                            if (!found) {
                                if ($(this).find("th").size() > 0) {
                                    $(this).show().addClass('visible');
                                    found = true;
                                }
                            }
                            if ($(this).hasClass('visible')) {
                                visibleRowCount++;
                            }
                        });
                        if (text) {
                            parent.find(".rowCount").text("Matches: " + (visibleRowCount - (found ? 1 : 0)));
                        }
                        if (visibleRowCount == (found ? 1 : 0)) {
                            $("<tr class='no-items visible'><td style=\"text-align:left;\"colspan=\"32\">No items<\/td><\/tr>").appendTo($(parent).find('table'));
                        }
                        $(parent).find("tr td").removeClass("dark");
                        $(parent).find("tr.visible:odd td").addClass("dark");
                    }

                    $(".datatable .closed").click(function () {
                        var parent = $(this).parent();
                        $(this).hide();
                        $(".filter", parent).fadeIn(function () {
                            $("input", parent).val("").focus().css("border", "1px solid #aaa");
                        });
                    });

                    $(".datatable .opened").click(function () {
                        var parent = $(this).parent().parent();
                        $(".filter", parent).fadeOut(function () {
                            $(".closed", parent).show();
                            $("input", parent).val("").each(function () {
                                window.updateDatatableFilter(this);
                            });
                        });
                    });

                    $(".datatable .filter input").keyup(function(e) {
                        window.updateDatatableFilter(this);
                        e.preventDefault();
                        e.stopPropagation();
                    });

                    $(".datatable table").each(function () {
                        var found = false;
                        $("tr", this).each(function () {
                            if (!found && $(this).find("th").size() == 0) {
                                found = true;
                            }
                        });
                        if (!found) {
                            $("<tr class='no-items visible'><td style=\"text-align:left;\"colspan=\"32\">No items<\/td><\/tr>").appendTo(this);
                        }
                    });

                    // Applies styles to datatables.
                    $(".datatable").each(function () {
                        $(this).find("tr:first th").addClass("top");
                        $(this).find("tr:last td").addClass("bottom");
                        $(this).find("tr:odd td").addClass("dark");
                        $(this).find("tr td:first-child, tr th:first-child").addClass("left");
                        $(this).find("tr td:last-child, tr th:last-child").addClass("right");
                    });

                    $(".datatable table.tablesorter").each(function () {
                        $(this).bind("sortEnd", function () {
                            $(".datatable").each(function () {
                                $(this).find("th, td")
                                    .removeClass("top").removeClass("bottom")
                                    .removeClass("left").removeClass("right")
                                    .removeClass("dark");
                                $(this).find("tr:first th").addClass("top");
                                $(this).find("tr:last td").addClass("bottom");
                                $(this).find("tr:odd td").addClass("dark");
                                $(this).find("tr td:first-child, tr th:first-child").addClass("left");
                                $(this).find("tr td:last-child, tr th:last-child").addClass("right");
                            });
                        });
                    });
                }
        });
    </script>
            </div>
        </div>
        <script type="application/javascript">
            $(function() {
                $(".userListMarker").click(function() {
                    $.post("/data/lists", {action: "findTouched"}, function(json) {
                        Codeforces.facebox(".userListsFacebox");
                        var tbody = $("#facebox tbody");
                        tbody.empty();
                        for (var i in json) {
                            tbody.append(
                                    $("<tr></tr>").append(
                                            $("<td></td>").attr("data-readKey", json[i].readKey).text(json[i].name)
                                    )
                            );
                        }
                        Codeforces.updateDatatables();
                        tbody.find("td").css("cursor", "pointer").click(function() {
                            document.location = Codeforces.updateUrlParameter(document.location.href, "list", $(this).attr("data-readKey"));
                        });
                    }, "json");
                });
            });
        </script>


</div><div id="datepick-div" style="display: none;"></div><div id="cboxOverlay" style="display: none;"></div><div id="colorbox" class="" style="display: none; padding-bottom: 42px; padding-right: 42px;"><div id="cboxWrapper"><div><div id="cboxTopLeft" style="float: left;"></div><div id="cboxTopCenter" style="float: left;"></div><div id="cboxTopRight" style="float: left;"></div></div><div style="clear: left;"><div id="cboxMiddleLeft" style="float: left;"></div><div id="cboxContent" style="float: left;"><div id="cboxLoadedContent" style="width: 0px; height: 0px; overflow: hidden; float: left;"></div><div id="cboxLoadingOverlay" style="float: left;"></div><div id="cboxLoadingGraphic" style="float: left;"></div><div id="cboxTitle" style="float: left;"></div><div id="cboxCurrent" style="float: left;"></div><div id="cboxNext" style="float: left;"></div><div id="cboxPrevious" style="float: left;"></div><div id="cboxSlideshow" style="float: left;"></div><div id="cboxClose" style="float: left;"></div></div><div id="cboxMiddleRight" style="float: left;"></div></div><div style="clear: left;"><div id="cboxBottomLeft" style="float: left;"></div><div id="cboxBottomCenter" style="float: left;"></div><div id="cboxBottomRight" style="float: left;"></div></div></div><div style="position: absolute; width: 9999px; visibility: hidden; display: none;"></div></div><div id="swfcontainer" style="visibility: visible;"></div><div id="userdata_el" style="visibility: hidden; position: absolute;"></div></body><img src="https://mc.yandex.ru/metrika/advert.gif" style="position: absolute; visibility: hidden; width: 0px; height: 0px;"></html>